<div class="container">

<table style="width: 100%;"><tr>
<td>readNHES</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Connect to NHES Survey Data</h2>

<h3>Description</h3>

<p>Opens a connection to a National Household Education Survey (NHES) data file and
returns an <code>edsurvey.data.frame</code> with
information about the file and data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">readNHES(savFiles, surveyCode = "auto", forceReread = FALSE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>savFiles</code></td>
<td>
<p>a character vector to the full file path(s) to the NHES
extracted SPSS (*.sav) data files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surveyCode</code></td>
<td>
<p>a character vector of the <code>surveyCode</code> to identify the year and survey type of the passed <code>savFiles</code> data file(s).
The default value is set to <code>auto</code> which attempts to automatically identify the survey/year based on the file attributes.
Occasionally, the <code>auto</code> lookup may be unable to determine the <code>surveyCode</code> and must be explicitly set by the user.
The lengths of the <code>savFiles</code> vector and <code>surveyCode</code> vector must match, unless <code>surveyCode</code> is set to <code>auto</code>.
To view the <code>surveyCodes</code> available, use the <code>getNHES_SurveyInfo</code>, or <code>viewNHES_SurveyCodes</code> function to view the codes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceReread</code></td>
<td>
<p>a logical value to force a rereading of all processed data.
The default value of <code>FALSE</code> speeds up the
<code>readNHES</code> function by using existing read-in data if already processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical value that defaults to <code>TRUE</code> for verbose console output that indicates progress information.
If <code>verbose = FALSE</code>, no information will be printed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Reads in the unzipped public-use files downloaded from the NCES Online Codebook (<a href="https://nces.ed.gov/datalab/onlinecodebook">https://nces.ed.gov/datalab/onlinecodebook</a>) in SPSS (*.sav) format.
Other sources of NHES data, such as restricted-use files or other websites, may require additional conversion steps to generate the required SPSS data format
and/or explicitly setting the <code>surveyCode</code> parameter.
</p>


<h3>Value</h3>

<p>an <code>edsurvey.data.frame</code> if only one NHES file is specified for the <code>savFiles</code> argument,
or an <code>edsurvey.data.frame.list</code> if multiple files are passed to the <code>savFiles</code> argument
</p>


<h3>Author(s)</h3>

<p>Tom Fink
</p>


<h3>See Also</h3>

<p><code>downloadNHES</code>, <code>getNHES_SurveyInfo</code>, and <code>viewNHES_SurveyCodes</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
rootPath &lt;- "~/"

#get instructions for obtaining NHES data 
downloadNHES()

#get SPSS *.sav file paths of all NHES files for 2012 and 2016
filesToImport &lt;- list.files(path = file.path(rootPath, "NHES", c(2012, 2016)), 
                            pattern="\\.sav$", 
                            full.names = TRUE, 
                            recursive = TRUE)

#import all files to edsurvey.data.frame.list object
esdfList &lt;- readNHES(savFiles = filesToImport, surveyCode = "auto", 
                     forceReread = FALSE, verbose = TRUE)

viewNHES_SurveyCodes() #view NHES survey codes in console

#get the full file path to the 2016 ATES NHES survey
path_ates2016 &lt;- list.files(path = file.path(rootPath, "NHES", "2016"), 
                            pattern=".*ates.*[.]sav$", full.names = TRUE)

#explicitly setting the surveyCode parameter (if required)
esdf &lt;- readNHES(savFiles = path_ates2016, surveyCode = "ATES_2016", 
                 forceReread = FALSE, verbose = TRUE)

#search for variables in the edsurvey.data.frame
searchSDF(string="sex", data=esdf)

## End(Not run)
</code></pre>


</div>