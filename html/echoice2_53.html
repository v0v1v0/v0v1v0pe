<div class="container">

<table style="width: 100%;"><tr>
<td>vd_dem_vdm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Demand Prediction (Volumetric Demand Model)</h2>

<h3>Description</h3>

<p>Generating demand predictions for volumetric demand model.
Reminder: there is no closed-form solution for demand, thus we need to integrate not only over the posterior distribution of parameters and the error distribution.
The function outputs a tibble containing id, task, alt, p, attributes, draws from the posterior of demand.
Error realizations can be pre-supplied to the <code>epsilon_not</code>. This helps create smooth demand curves or conduct optimization.
</p>


<h3>Usage</h3>

<pre><code class="language-R">vd_dem_vdm(
  vd,
  est,
  epsilon_not = NULL,
  error_dist = NULL,
  tidy = TRUE,
  cores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vd</code></td>
<td>
<p>data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est</code></td>
<td>
<p>ec-model draws</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsilon_not</code></td>
<td>
<p>(optional) error realizations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_dist</code></td>
<td>
<p>(optional) A string defining the error term distribution (default: 'EV1')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tidy</code></td>
<td>
<p>(optional) apply 'echoice2' tidier (default: TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>(optional) cores (default: auto-detect)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Draws of expected demand
</p>


<h3>See Also</h3>

<p><code>prep_newprediction()</code> to match <code>vd</code>'s factor levels,
<code>ec_gen_err_ev1()</code> for pre-generating error realizations and
<code>vd_est_vdm()</code> for estimating the corresponding model
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(icecream)
#run MCMC sampler (use way more than 10 draws for actual use)
icecream_est &lt;- icecream %&gt;% dplyr::filter(id&lt;20) %&gt;% vd_est_vdm(R=10, keep=1, cores=2)
#Generate demand predictions
icecream_predicted_demand=
 icecream %&gt;% dplyr::filter(id&lt;20) %&gt;%   
   vd_dem_vdm(icecream_est, cores=2)
#column .demdraws contains draws from posterior of predicted demand

</code></pre>


</div>