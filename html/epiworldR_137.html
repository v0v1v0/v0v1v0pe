<div class="container">

<table style="width: 100%;"><tr>
<td>epiworld-data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Accessing the database of epiworld</h2>

<h3>Description</h3>

<p>Models in <code>epiworld</code> are stored in a database. This database can be accessed
using the functions described in this manual page. Some elements of the
database are: the transition matrix, the incidence matrix, the reproductive
number, the generation time, and daily incidence at the virus and tool level.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_hist_total(x)

get_today_total(x)

get_hist_virus(x)

get_hist_tool(x)

get_transition_probability(x)

get_reproductive_number(x)

## S3 method for class 'epiworld_repnum'
plot(
  x,
  y = NULL,
  ylab = "Average Rep. Number",
  xlab = "Day (step)",
  main = "Reproductive Number",
  type = "b",
  plot = TRUE,
  ...
)

plot_reproductive_number(x, ...)

get_hist_transition_matrix(x, skip_zeros = FALSE)

## S3 method for class 'epiworld_hist_transition'
as.array(x, ...)

plot_incidence(x, ...)

## S3 method for class 'epiworld_hist_transition'
plot(
  x,
  type = "b",
  xlab = "Day (step)",
  ylab = "Counts",
  main = "Daily incidence",
  plot = TRUE,
  ...
)

get_transmissions(x)

get_generation_time(x)

## S3 method for class 'epiworld_generation_time'
plot(
  x,
  type = "b",
  xlab = "Day (step)",
  ylab = "Avg. Generation Time",
  main = "Generation Time",
  plot = TRUE,
  ...
)

plot_generation_time(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>epiworld_sir</code>, <code>epiworld_seir</code>, etc.
any model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab, xlab, main, type</code></td>
<td>
<p>Further parameters passed to <code>graphics::plot()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical scalar. If <code>TRUE</code> (default), the function will the
desired statistic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>In the case of plot methods, further arguments passed to
graphics::plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip_zeros</code></td>
<td>
<p>Logical scalar. When <code>FALSE</code> it will return all the
entries in the transition matrix.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>plot_reproductive_number</code> function is a wrapper around
get_reproductive_number that plots the result.
</p>
<p>The <code>plot_incidence</code> function is a wrapper between
get_hist_transition_matrix and it's plot method.
</p>
<p>The plot method for the <code>epiworld_hist_transition</code> class plots the
daily incidence of each state. The function returns the data frame used for
plotting.
</p>


<h3>Value</h3>


<ul><li>
<p> The <code>get_hist_total</code> function returns an object of class
epiworld_hist_total.
</p>
</li></ul>
<ul><li>
<p> The <code>get_today_total</code> function returns a named vector with the
total number of individuals in each state at the end of the simulation.
</p>
</li></ul>
<ul><li>
<p> The <code>get_hist_virus</code> function returns an object of class
epiworld_hist_virus.
</p>
</li></ul>
<ul><li>
<p> The <code>get_hist_tool</code> function returns an object of epiworld_hist_virus.
</p>
</li></ul>
<ul><li>
<p> The <code>get_transition_probability</code> function returns an object of class
<code>matrix</code>.
</p>
</li></ul>
<ul><li>
<p> The <code>get_reproductive_number</code> function returns an object of class
epiworld_repnum.
</p>
</li></ul>
<ul><li>
<p> The <code>plot</code> function returns a plot of the reproductive number over time.
</p>
</li></ul>
<ul><li> <p><code>get_hist_transition_matrix</code> returns a data.frame with four columns:
"state_from", "state_to", "date", and "counts."
</p>
</li></ul>
<ul><li>
<p> The <code>as.array</code> method for <code>epiworld_hist_transition</code> objects turns the
<code>data.frame</code> returned by <code>get_hist_transition_matrix</code> into an array of
<code style="white-space: pre;">⁠nstates x nstates x (ndays + 1)⁠</code>
entries, where the first entry is the initial state.
</p>
</li></ul>
<ul><li>
<p> The <code>plot_incidence</code> function returns a plot originating from the object
<code>get_hist_transition_matrix</code>.
</p>
</li></ul>
<ul><li>
<p> The <code>plot</code> function returns a plot which originates from the
<code>epiworld_hist_transition</code> object.
</p>
</li></ul>
<ul><li>
<p> The function <code>get_transmissions</code> returns a <code>data.frame</code> with the following
columns: <code>date</code>, <code>source</code>, <code>target</code>, <code>virus_id</code>, <code>virus</code>, and <code>source_exposure_date</code>.
</p>
</li></ul>
<ul><li>
<p> The function <code>get_generation_time</code> returns a <code>data.frame</code> with
the following columns: "agent", "virus_id", "virus", "date", and "gentime".
</p>
</li></ul>
<ul><li>
<p> The function <code>plot_generation_time</code> is a wrapper for plot and
get_generation_time.
</p>
</li></ul>
<h3>See Also</h3>

<p>Other Models: 
<code>ModelDiffNet()</code>,
<code>ModelSEIR()</code>,
<code>ModelSEIRCONN()</code>,
<code>ModelSEIRD()</code>,
<code>ModelSEIRDCONN()</code>,
<code>ModelSEIRMixing()</code>,
<code>ModelSIR()</code>,
<code>ModelSIRCONN()</code>,
<code>ModelSIRD()</code>,
<code>ModelSIRDCONN()</code>,
<code>ModelSIRLogit()</code>,
<code>ModelSIRMixing()</code>,
<code>ModelSIS()</code>,
<code>ModelSISD()</code>,
<code>ModelSURV()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># SEIR Connected
seirconn &lt;- ModelSEIRCONN(
  name              = "Disease",
  n                 = 10000,
  prevalence        = 0.1,
  contact_rate      = 2.0, 
  transmission_rate = 0.8,
  incubation_days   = 7.0,
  recovery_rate     = 0.3
)

# Running the simulation for 50 steps (days)
set.seed(937)
run(seirconn, 50)

# Retrieving the transition probability
get_transition_probability(seirconn) 

# Retrieving date, state, and counts dataframe including any added tools 
get_hist_tool(seirconn)

# Retrieving overall date, state, and counts dataframe 
head(get_hist_total(seirconn))

# Retrieving date, state, and counts dataframe by variant
head(get_hist_virus(seirconn))

# Retrieving (and plotting) the reproductive number
rp &lt;- get_reproductive_number(seirconn)
plot(rp) # Also equivalent to plot_reproductive_number(seirconn)

# We can go further and get all the history
t_hist &lt;- get_hist_transition_matrix(seirconn)

head(t_hist)

# And turn it into an array
as.array(t_hist)[,,1:3]

# We cam also get (and plot) the incidence, as well as
# the generation time
inci &lt;- plot_incidence(seirconn)
gent &lt;- plot_generation_time(seirconn)

</code></pre>


</div>