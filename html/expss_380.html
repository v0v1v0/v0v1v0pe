<div class="container">

<table style="width: 100%;"><tr>
<td>val_lab</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set or get value labels</h2>

<h3>Description</h3>

<p>These functions set/get/drop value labels. Duplicated values are not allowed.
If argument <code>x</code> is data.frame or list then labels applied to all 
elements of data.frame/list. To drop value labels, use <code>val_lab(var) &lt;- 
NULL</code> or <code>unvl(var)</code>. <code>make_labels</code> converts text from the form 
that usually used in questionnaires to named vector. For variable labels see
var_lab. For working with entire data.frame see apply_labels.
</p>

<ul>
<li>
<p><code>val_lab</code> returns value labels or NULL if labels doesn't 
exist. 
</p>
</li>
<li>
<p><code>val_lab&lt;-</code> set value labels.
</p>
</li>
<li>
<p><code>set_val_lab</code> returns variable with value labels. 
</p>
</li>
<li>
<p><code>add_val_lab&lt;-</code> add value labels to already existing value labels. 
</p>
</li>
<li>
<p><code>unvl</code> drops value labels.
</p>
</li>
<li>
<p><code>make_labels</code> makes named vector from text for usage as value labels.
</p>
</li>
<li>
<p><code>num_lab</code>, <code>lab_num</code> and  <code>autonum</code> are shortcuts for <code>make_labels</code>
with <code>code_postion</code> 'left', 'right' and 'autonum' accordingly.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">val_lab(x)

val_lab(x) &lt;- value

set_val_lab(x, value, add = FALSE)

add_val_lab(x, value)

add_val_lab(x) &lt;- value

unvl(x)

drop_val_labs(x)

make_labels(text, code_position = c("left", "right", "autonum"))

drop_unused_labels(x)

num_lab(text)

lab_num(text)

autonum(text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Variable(s). Vector/data.frame/list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>Named vector. Names of vector are labels for the
appropriate values of variable x.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>Logical. Should we add value labels to old labels or replace it?
Deafult is FALSE - we completely replace old values. If TRUE new value
labels will be combined with old value labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text</code></td>
<td>
<p>text that should be converted to named vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code_position</code></td>
<td>
<p>Possible values "left", "right" - position of numeric code in
<code>text</code>. "autonum" - makes codes by autonumbering lines of <code>text</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Value labels are stored in attribute "labels" 
(<code>attr(x,"labels")</code>). We set variable class to "labelled" for preserving
labels from dropping during some operations (such as <code>c</code> and <code>`[`</code>).
</p>


<h3>Value</h3>

<p><code>val_lab</code> return value labels (named vector). If labels doesn't 
exist it return NULL . <code>val_lab&lt;-</code> and <code>set_val_lab</code> return 
variable (vector x) of class "labelled" with attribute "labels" which
contains value labels. <code>make_labels</code> return named vector for usage as
value labels.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># toy example
data.table::setDTthreads(2)
set.seed(123)
# score - evaluation of tested product

score = sample(-1:1,20,replace = TRUE)
var_lab(score) = "Evaluation of tested brand"
val_lab(score) = c("Dislike it" = -1,
                   "So-so" = 0,
                   "Like it" = 1    
                   )

# frequency of product scores                                      
fre(score)

# brands - multiple response question
# Which brands do you use during last three months? 

brands = as.sheet(t(replicate(20,sample(c(1:5,NA),4,replace = FALSE))))

var_lab(brands) = "Used brands"
val_lab(brands) = make_labels("
                              1 Brand A
                              2 Brand B
                              3 Brand C
                              4 Brand D
                              5 Brand E
                              ")


# percentage of used brands
fre(brands)

# percentage of brands within each score
cro_cpct(brands, score)

## make labels from text copied from questionnaire

age = c(1, 2, 1, 2)

val_lab(age) = num_lab("
 1. 18 - 26
 2. 27 - 35
")

# note support of value lables in base R
table(age)

# or, if in original codes is on the right side

products = 1:8

val_lab(products) = lab_num("
 Chocolate bars    1
 Chocolate sweets (bulk)	2
 Slab chocolate(packed)	3
 Slab chocolate (bulk)	4
 Boxed chocolate sweets	5
 Marshmallow/pastilles in chocolate coating	6
 Marmalade in chocolate coating	7
 Other	8
")

table(products)
</code></pre>


</div>