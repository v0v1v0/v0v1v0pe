<div class="container">

<table style="width: 100%;"><tr>
<td>wrap4Explanation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Wrap prediction model for explanations</h2>

<h3>Description</h3>

<p>The function wraps given prediction model to be used with ExplainPrediction package.
Currently <code>nnet</code> from <code>nnet</code> package and models of class <code>svm</code> 
from package <code>e1071</code> are supported, but others can easily be added. Please, note that models from
<code>CORElearn-package</code> can be used directly and need no wrapper.
If inclusion of other models into ExplainPrediction is desired, please, contact the author.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  wrap4Explanation(model)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p> The model as returned by <code>nnet</code> or any of <code>svm</code> functions in <code>e1071</code></p>
</td>
</tr></table>
<p> package.                                    
</p>


<h3>Details</h3>

<p>The function adds necessary components to the prediction model so that function <code>explainVis</code> 
can generate explanations and their visualizations.
Currently, four components are added:
</p>

<ul>
<li> <p><code>formula</code>, a formula specifying the dependent and independent variables used by the supplied model.
</p>
</li>
<li> <p><code>model</code>, a name of the supplied model.
</p>
</li>
<li> <p><code>noClasses</code>, a number of class values for classification problems and 0 for regression.
</p>
</li>
<li> <p><code>class.lev</code>, for classification problem a vector of class value names.
</p>
</li>
</ul>
<p>If for a given <code>model</code> the method <code>predict</code> returns the class value probabilities
as matrix or in a list with component <code>probabilities</code>, nothing else is needed, otherwise
the internal function <code>getPredictions</code> has to be adequately modified.
</p>


<h3>Value</h3>

<p>The function returns unchanged <code>model</code> with the components described in Details. 
</p>


<h3>Author(s)</h3>

<p> Marko Robnik-Sikonja </p>


<h3>See Also</h3>

<p><code>explainVis</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# use iris data set, split it randomly into a training and testing set
trainIdxs &lt;- sample(x=nrow(iris), size=0.7*nrow(iris), replace=FALSE)
testIdxs &lt;- c(1:nrow(iris))[-trainIdxs]
# build a nnet model with certain parameters
require(nnet)
modelNN &lt;- nnet(Species ~ ., iris[trainIdxs,], size=20)

# use wrapper
modelNNet &lt;- wrap4Explanation(modelNN)

# generate model explanation and visualization
# turn on history in the visualization window to see all graphs
explainVis(modelNNet, iris[trainIdxs,], iris[testIdxs,], method="EXPLAIN",visLevel="both",
           problemName="iris", fileType="none", 
           naMode="avg", explainType="WE", classValue=1) 

## End(Not run)
</code></pre>


</div>