<div class="container">

<table style="width: 100%;"><tr>
<td>irt_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a Stan data list from an item response matrix or from long-form data.</h2>

<h3>Description</h3>

<p>Create a Stan data list from an item response matrix or from long-form data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">irt_data(response_matrix = matrix(), y = integer(), ii = integer(),
  jj = integer(), covariates = data.frame(), formula = ~1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>response_matrix</code></td>
<td>
<p>An item response matrix.
Columns represent items and rows represent persons.
NA may be supplied for missing responses.
The lowest score for each item should be 0, with exception to rating scale
models.
<code>y</code>, <code>ii</code>, and <code>jj</code> should not be supplied if a response
matrix is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of scored responses for long-form data.
The lowest score for each item should be 0, with exception to rating scale
models.
NAs are not permitted, but missing responses may simply be ommitted
instead.
Required if <code>response_matrix</code> is not supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ii</code></td>
<td>
<p>A vector indexing the items in <code>y</code>.
This must consist of consecutive integers starting at 1.
<code>labelled_integer</code> may be used to create a suitable vector.
Required if <code>response_matrix</code> is not supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jj</code></td>
<td>
<p>A vector indexing the persons in <code>y</code>.
This must consist of consecutive integers starting at 1.
<code>labelled_integer</code> may be used to create a suitable vector.
Required if <code>response_matrix</code> is not supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>An optional data frame containing (only) person-covariates.
It must contain one row per person or be of the same length as <code>y</code>,
<code>ii</code>, and <code>jj</code>. If it contains one row per person, it must be in
the same order as the response matrix (or <code>unique(jj)</code>). If it has a
number of columns equal to the length of <code>y</code>,
<code>ii</code>, and <code>jj</code>, it must be in the same order as <code>jj</code> (for
example, it may be a subset of columns from the same data frame that contains
<code>y</code>, <code>ii</code>, and <code>jj</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An optional formula for the latent regression that is applied
to <code>covariates</code>. The left side  should be blank (for example,
<code>~ v1 + v2</code>). By default it includes only a model intercept,
interpretable as the mean of the person distribution. If set to
<code>NULL</code>, then <code>covariates</code> is used directly  as the design matrix
for the latent regression.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data list suitable for <code>irt_stan</code>.
</p>


<h3>See Also</h3>

<p>See <code>labelled_integer</code> for a means of creating
appropriate inputs for <code>ii</code> and <code>jj</code>.
See <code>irt_stan</code> to fit a model to the data list.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># For a response matrix ("wide-form" data) with person covariates:
spelling_list &lt;- irt_data(response_matrix = spelling[, 2:5],
                          covariates = spelling[, "male", drop = FALSE],
                          formula = ~ 1 + male)

# Alternatively, the same may be created by:
W &lt;- cbind(intercept = 1, spelling[, "male"])
spelling_list &lt;- irt_data(response_matrix = spelling[, 2:5],
                          covariates = W,
                          formula = NULL)

# For long-form data (one row per item-person pair):
agg_list_1 &lt;- irt_data(y = aggression$poly,
                       ii = aggression$item,
                       jj = aggression$person)

# Add a latent regression and use labelled_integer() with the items
agg_list_2 &lt;- irt_data(y = aggression$poly,
                       ii = labelled_integer(aggression$description),
                       jj = aggression$person,
                       covariates = aggression[, c("male", "anger")],
                       formula = ~ 1 + male*anger)
</code></pre>


</div>