<div class="container">

<table style="width: 100%;"><tr>
<td>ebv_create_taxonomy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an EBV netCDF with taxonomy</h2>

<h3>Description</h3>

<p>Create the core structure of the EBV netCDF based on the json
from the <a href="https://portal.geobon.org">EBV Data Portal</a>. Additionally,
you can add the hierarchy of the taxonomy. This is not provided in the
<code>ebv_create()</code> function. Use the <code>ebv_create()</code> function
if your dataset holds no taxonomic information. Data will be added
afterwards using <code>ebv_add_data()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ebv_create_taxonomy(
  jsonpath,
  outputpath,
  taxonomy,
  lsid = FALSE,
  epsg = 4326,
  extent = c(-180, 180, -90, 90),
  resolution = c(1, 1),
  timesteps = NULL,
  fillvalue = NULL,
  prec = "double",
  sep = ",",
  force_4D = TRUE,
  overwrite = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>jsonpath</code></td>
<td>
<p>Character. Path to the json file downloaded from the EBV Data
Portal. Login to the page and click on 'Uploads' and 'New Upload' to start
the process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputpath</code></td>
<td>
<p>Character. Set path where the netCDF file should be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxonomy</code></td>
<td>
<p>Character. Path to the csv table holding the taxonomy.
Default: comma-separated delimiter, else change the <code>sep</code> argument
accordingly. The csv needs to have the following structure: The header
displays the names of the different taxon levels ordered from the highest
level to the lowest, e.g. "Order", "Family", "Genus", "Species". The last
column (if <code>lsid</code>=FALSE) is equivalent to the <code>entity</code> argument in the
<code>ebv_create()</code> function. Each row of the csv corresponds to a
unique entity. In case the <code>lsid</code> argument (see below) is set to the TRUE,
this table gets an additional last column which holds the lsid per entity -
in this case the second last column contains the entity names, e.g. the
following column order: "Order", "Family", "Genus", "Species", "lsid".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lsid</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE if the last column in your
taxonomy csv file defines the lsid for each entity. For more info check
<a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#taxon-names-and-identifiers">CF
convention 1.8: Taxon Names and Identifiers</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsg</code></td>
<td>
<p>Integer. Default: 4326 (WGS84). Defines the coordinate reference
system via the corresponding epsg code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extent</code></td>
<td>
<p>Numeric. Default: c(-180,180,-90,90). Defines the extent of the
data: c(xmin, xmax, ymin, ymax).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>Numerical. Vector of two numerical values defining the
longitudinal and latitudinal resolution of the pixel: c(lon,lat).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timesteps</code></td>
<td>
<p>Character. Vector of the timesteps in the dataset. Default:
NULL - in this case the time will be calculated from the start-, endpoint
and temporal resolution given in the metadata file (json). Else, the dates
must be given in in ISO format 'YYYY-MM-DD' or shortened 'YYYY' in case of
yearly timesteps.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fillvalue</code></td>
<td>
<p>Numeric. Value of the missing data in the array. Not
mandatory but should be defined!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prec</code></td>
<td>
<p>Character. Default: 'double'. Precision of the data set. Valid
options: 'short' 'integer' 'float' 'double' 'char' 'byte'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>Character. Default: ','. If the delimiter of the csv specifying the
entity-names differs from the default, indicate here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force_4D</code></td>
<td>
<p>Logical. Default is TRUE. If the argument is TRUE, there will
be 4D cubes (lon, lat, time, entity) per metric. If this argument is changed
to FALSE, there will be 3D cubes (lon, lat, time) per entity (per metric).
So the latter yields a higher amount of cubes and does not bundle all
information per metric. In the future the standard will be restricted to the
4D version. Recommendation: go with the 4D cubes!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the output
file defined by 'outputpath'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE. #' @note To check out the results take a look at your netCDF
file with <a href="https://www.giss.nasa.gov/tools/panoply/">Panoply</a> provided
by the NASA.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Creates the netCDF file at the 'outputpath' location including the
taxonomy information.
</p>


<h3>Note</h3>

<p>You can check the taxonomy info with <code>ebv_properties()</code> in the slot
'general' under the name 'taxonomy' and 'taxonomy_lsid'.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#set path to JSON file
json &lt;- system.file(file.path("extdata/testdata","5.json"), package="ebvcube")
#set output path of the new EBV netCDF
out &lt;-  tempfile(fileext='.nc')
#set path to the csv holding the taxonomy names
taxonomy &lt;- file.path(system.file(package='ebvcube'),"extdata/testdata","id5_entities.csv")

#create new EBV netCDF with taxonomy
## Not run: 
ebv_create_taxonomy(jsonpath = json, outputpath = out, taxonomy = taxonomy,
           fillvalue = -127, resolution = c(0.25, 0.25), verbose = FALSE)
#remove file
file.remove(out)

## End(Not run)
</code></pre>


</div>