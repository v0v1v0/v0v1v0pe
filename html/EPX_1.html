<div class="container">

<table style="width: 100%;"><tr>
<td>AHR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate AHR (or expected AHR)</h2>

<h3>Description</h3>

<p>Calculates average hitrate (AHR), which is equivalent to average precision.
When there are ties in ranking (not all values in phat are unique), the
result is the expection of AHR. The algorithm that produces this analytic
result assumes that the items in any tied group are in an arbitrary order
within the group.
</p>


<h3>Usage</h3>

<pre><code class="language-R">AHR(y, phat, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>True (binary) response vector where 1 is the rare/relevant class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phat</code></td>
<td>
<p>Numeric vector of estimated probabilities of relevance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Implementation adapted from Wang (2005, Chapter 3). Please also see Chapter 3
of Wang (2005) for AHR and expected AHR formulas.
</p>


<h3>Value</h3>

<p>Numeric value of average hitrate; expected average hitrate when there
are ties.
</p>


<h3>References</h3>

<p>Wang, M. (2005).
<em>Statistical Methods for High Throughput Screening Drug Discovery Data</em>
(Doctoral thesis).
University of Waterloo, Waterloo, Ontario, Canada.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## AHR when there are no ties in phat:
resp &lt;- c(1, 0, 0, 0, 1)
prob &lt;- (1:5)*0.1
AHR(y = resp, phat = prob)
# expect answer: 1/2 * (1 + 0 + 0 + 0 + 2/5)

## (Expected) AHR when there are ties in phat:
resp &lt;- c(1, 1, 0,   0,   0,   0,   0,    1,   0, 0)
prob &lt;- c(1, 1, 1, 0.4, 0.4, 0.3, 0.2, 0.15, 0.1, 0)
AHR(y = resp, phat = prob)
# expect answer: 1/3 * (2/3 + 1/2 * (1/3 + 2/3) + 1/3 * 4/3 +
#                       1/8 * (2/3 + 2/3 + 2/3 + 1))

</code></pre>


</div>