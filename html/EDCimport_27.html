<div class="container">

<table style="width: 100%;"><tr>
<td>split_mixed_datasets</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split mixed datasets</h2>

<h3>Description</h3>

<p>Split mixed tables, i.e. tables that hold both long data (N values per patient) and short data (one value per patient, duplicated on N lines), into one long table and one short table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">split_mixed_datasets(
  datasets = get_datasets(),
  id = get_key_cols()$patient_id,
  ...,
  ignore_cols = getOption("edc_cols_crfname", "CRFNAME"),
  output_code = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>datasets</code></td>
<td>
<p>a dataframe or a list of dataframes to split. Default to all the datasets from <code>.lookup</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>the patient identifier, probably "SUBJID". Should be shared by all datasets. Case-insensitive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_cols</code></td>
<td>
<p>columns to ignore when considering a table as long. Default to <code>getOption("edc_cols_crfname", "CRFNAME")</code>. Case-insensitive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_code</code></td>
<td>
<p>whether to print the code to explicitly write. Can also be a file path.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>whether to print informations about the process.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list of the new long and short tables. Use <code>load_list()</code> to load them into the global environment.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#tm = read_trialmaster("filename.zip", pw="xx")
tm = edc_example_mixed()
names(tm)
#load_list(tm)
print(tm$long_mixed) #`val1` and `val2` are long but `val3` is short

mixed_data = split_mixed_datasets(tm, id="subjid", verbose=TRUE)
load_list(mixed_data)
print(long_mixed_short) 
print(long_mixed_long) 

#alternatively, get the code and only use the datasets you need
split_mixed_datasets(tm, id="SUBJID", output_code=TRUE)
filename = tempfile("mixed_code", fileext=".R")
split_mixed_datasets(tm, id="SUBJID", output_code=filename)
readLines(filename)
</code></pre>


</div>