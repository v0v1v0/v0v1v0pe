<div class="container">

<table style="width: 100%;"><tr>
<td>efs_eval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Evaluation of Ensemble Features Selection</h2>

<h3>Description</h3>

<p>Provides several evaluation tests of
the ouput of <code>ensemble_fs</code>. There are
performance test, namely the logreg test and permutation 
test as well as tests of stability via the variance 
of feature importances and the Jaccard-index (see Details).
</p>


<h3>Usage</h3>

<pre><code class="language-R">efs_eval(data, efs_table, file_name, classnumber, NA_threshold, logreg = TRUE,
  rf = TRUE, permutation = TRUE, p_num = 100, variances = TRUE,
  jaccard = TRUE, bs_num = 100, bs_percentage = 0.9)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an object of class data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>efs_table</code></td>
<td>
<p>a table object of class matrix (retrieved
from <code>ensemble_fs</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_name</code></td>
<td>
<p>a character string, name which is used for the two 
possible PDF files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classnumber</code></td>
<td>
<p>a number indicating the index of variable for binary classification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NA_threshold</code></td>
<td>
<p>a number in range of [0,1]. Threshold for deletion
of features with a greater proportion of NAs than <code>NA_threshold</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logreg</code></td>
<td>
<p>a logical value indicating whether to conduct an evaluation 
via logistic regression or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rf</code></td>
<td>
<p>a logical value indicating whether to conduct an evaluation 
via random forest or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>permutation</code></td>
<td>
<p>a logical value indicating whether to conduct a permutation 
of the class variable or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_num</code></td>
<td>
<p>number of permutations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variances</code></td>
<td>
<p>a logical value indicating whether to calculate the variances 
of importances retrieved from bootrapping or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jaccard</code></td>
<td>
<p>a logical value indicating whether to calculate the jaccard-index or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bs_num</code></td>
<td>
<p>a number of boostrap permutations of the importances</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bs_percentage</code></td>
<td>
<p>a number in range of [0,1]. Proportion of randomly selected samples for boostraping</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A logistic regression model with leave-one-out cross-validation (LOOCV) of the
selected features and of all feature is conducted by <code>logreg = TRUE</code>.
Both AUC-values of the ROC curves are compared with <code>roc.test</code>.
The ROC curves are illustrated on the PDF file "file_name" + "LG-ROC.pdf".
<br> 
By <code>rf = TRUE</code>, random forst model will be constructed and evaluated.
Parallel to Logreg, the AUC-values of the two ROC curves of all features and a subset  
of the best ranked feautres are compared with <code>roc.test</code>.
The ROC curves are illustrated on the PDF file "file_name" + "RF-ROC.pdf".
<br><br> The permutation test (<code>permutation = TRUE</code>) compares the AUC outcome of 
an logistic regression with <code>p_num</code> AUCs from random 
permutations of the class variable by a <code>t.test</code>.
<br><br> Variances of the importances after a bootstrapping analysis are 
calculated by <code>variances = TRUE</code>. Thereby the number and proportion
of the bootstrapping can be set by <code>bs_num</code> and <code>bs_percentage</code>.
The function also provides a PDF file "file_name" +"_Variances.pdf".
Additionally, the Jaccard-index of this bootstrapped importances 
can be calculated by setting <code>jaccard=TRUE</code>.
</p>


<h3>Value</h3>

<p>An object of class list, with the following components: 
<br> "AUC of LR with all parameters",
<br> "AUC of LR with EFS parameter" 
<br> "P-value of LR-ROC test",
#' <br> "AUC of RF with all parameters",
<br> "AUC of RF with EFS parameter" 
<br> "P-value of RF-ROC test",
<br> "P-value of permutation", 
<br> "Variances of feature importances",
<br> "Jaccard-index".
</p>


<h3>Author(s)</h3>

<p>Ursula Neumann
</p>


<h3>See Also</h3>

<p>glm, roc,prediction, boxplot, tail, t.test
</p>


<h3>Examples</h3>

<pre><code class="language-R"> ## Loading dataset in environment
 data(efsdata)
 ## Generate a ranking based on importance (with default
 ## NA_threshold = 0.7,cor_threshold = 0.2)
 efs&lt;-ensemble_fs(efsdata,5,runs=2)
 ## Conduct AUC test and permutation test
 eval_example &lt;- efs_eval(data = efsdata, efs_table = efs, file_name = 'eval_test', 
                      classnumber = 5, NA_threshold = 0.2,
                      logreg = TRUE,
                      rf = FALSE,
                      permutation = TRUE, p_num = 2, 
                      variances = FALSE, jaccard = FALSE)
## Calculating variances and the Jaccard-index can take several minutes computation time 
</code></pre>


</div>