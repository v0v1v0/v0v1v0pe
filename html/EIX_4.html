<div class="container">

<table style="width: 100%;"><tr>
<td>importance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Importance of variables and interactions in the model</h2>

<h3>Description</h3>

<p>This functions calculates a table with selected measures of importance
for variables and interactions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">importance(xgb_model, data, option = "both", digits = 4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xgb_model</code></td>
<td>
<p>a xgboost or lightgbm model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data table with data used to train the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>option</code></td>
<td>
<p>if "variables" then table includes only single variables,
if "interactions", then only interactions
if "both", then both single variable and interactions.
Default "both".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>number of significant digits that shall be returned. Will be passed to the signif() functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Available measures:
</p>

<ul>
<li>
<p> "sumGain" - sum of Gain value in all nodes, in which given variable occurs,
</p>
</li>
<li>
<p> "sumCover" - sum of Cover value in all nodes, in which given variable occurs; for LightGBM models: number of observation, which pass through the node,
</p>
</li>
<li>
<p> "mean5Gain" - mean gain from 5 occurrences of given variable with the highest gain,
</p>
</li>
<li>
<p> "meanGain" - mean Gain value in all nodes, in which given variable occurs,
</p>
</li>
<li>
<p> "meanCover" - mean Cover value in all nodes, in which given variable occurs; for LightGBM models: mean number of observation, which pass through the node,
</p>
</li>
<li>
<p> "freqency" - number of occurrences in the nodes for given variable.
</p>
</li>
</ul>
<p>Additionally for table with single variables:
</p>

<ul>
<li>
<p> "meanDepth"  - mean depth weighted by gain,
</p>
</li>
<li>
<p> "numberOfRoots" - number of occurrences in the root,
</p>
</li>
<li>
<p> "weightedRoot" - mean number of occurrences in the root, which is weighted by gain.
</p>
</li>
</ul>
<h3>Value</h3>

<p>a data table
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("EIX")
library("Matrix")
sm &lt;- sparse.model.matrix(left ~ . - 1,  data = HR_data)

library("xgboost")
param &lt;- list(objective = "binary:logistic", max_depth = 2)
xgb_model &lt;- xgboost(sm, params = param, label = HR_data[, left] == 1, nrounds = 25, verbose=0)

imp &lt;- importance(xgb_model, sm, option = "both")
imp
plot(imp,  top = 10)

imp &lt;- importance(xgb_model, sm, option = "variables")
imp
plot(imp,  top = nrow(imp))

 imp &lt;- importance(xgb_model, sm, option = "interactions")
 imp
plot(imp,  top =  nrow(imp))

 imp &lt;- importance(xgb_model, sm, option = "variables")
 imp
plot(imp, top = NULL, radar = FALSE, xmeasure = "sumCover", ymeasure = "sumGain")


</code></pre>


</div>