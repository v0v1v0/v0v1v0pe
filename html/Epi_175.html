<div class="container">

<table style="width: 100%;"><tr>
<td>Relevel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reorder and combine levels of a factor</h2>

<h3>Description</h3>

<p>The levels of a factor are re-ordered so that the levels specified by
<code>ref</code> appear first and remaining levels are moved down. This is
useful for <code>contr.treatment</code> contrasts which take the first level
as the reference. Factor levels may also be combined; two possibilities for
specifying this are supported: hard coding or table look-up.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'factor'
Relevel( x, ref, first = TRUE, collapse="+",
                 xlevels=TRUE, nogroup=TRUE, ... )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A(n unordered) factor</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref</code></td>
<td>
<p>Vector, list or data frame, array, matrix or table.
</p>
<p>If <code>ref</code> is a vector (integer or character), it is assumed it
contains the names or numbers of levels to be the first ones; non
mentioned levels are kept.
</p>
<p>If <code>ref</code> is a list (but not a data frame), factor levels
mentioned in each list element are combined. If the list is named
the names are used as new factor levels, otherwise new level names
are constructed from the old.
</p>
<p>If <code>ref</code> is a data frame or 2-dimensional array, matrix or
table, the first column is assumed to have unique levels of <code>x</code>
and the second to have groupings of this, respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first</code></td>
<td>
<p>Should the levels mentioned in <code>ref</code> (if it is a
list) come before those not?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>String used when constructing names for combined
factor levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlevels</code></td>
<td>
<p>Logical. Should all levels in the 2nd column of
<code>ref</code> be maintained as levels of the result, or (if
<code>FALSE</code>) only the actually occurring.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nogroup</code></td>
<td>
<p>Logical. Should levels present in the input but not in
the 1st column of <code>ref</code> be maintained as levels after the
grouping? If <code>FALSE</code>, NAs will be returned for such elements.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed on to other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The facility where <code>ref</code> is a two-column matrix mimics the
SAS-facility of formats where a dataset can be used to construct a
format â€” SAS format is the grouping tool for variable
values.
</p>
<p>If <code>ref</code> is a two-column object and <code>ref[,2]</code> is a factor
<code>Relevel</code> will preserve the order of levels from <code>ref[,2]</code>.  
</p>


<h3>Value</h3>

<p>An unordered factor, where levels of <code>x</code> have been reordered
and/or collapsed.
</p>


<h3>Author(s)</h3>

<p>Bendix Carstensen <a href="http://bendixcarstensen.com">http://bendixcarstensen.com</a>, Lars Jorge Diaz</p>


<h3>See Also</h3>

<p><code>Relevel.Lexis</code></p>


<h3>Examples</h3>

<pre><code class="language-R"># Grouping using a list (hard coding)
#
ff &lt;- factor(sample(letters[1:5], 100, replace = TRUE))
table( ff, Relevel(ff, list( AB = 1:2, "Dee" = 4, c(3,5))))
table( ff, Relevel(ff,
                   list( 5:4, Z = c("c", "a") ),
                   coll = "-und-",
                   first = FALSE ) )

## Grouping using a two-column matrix as input:
## A factor with levels to be grouped together
ff &lt;- factor(c("Bear","Bear","Crocodile","Snake","Crocodile","Bear"))
ff
## A grouping table
(gg &lt;- data.frame(Animal = c("Bear","Whale","Crocodile","Snake","Eagle"),
                   Class = c("Mammal","Mammal","Reptile","Reptile","Bird")))
str(gg)
Relevel(ff, gg, xlevels = FALSE)
Relevel(ff, gg )
Relevel(ff, gg[c(1:5,5:1),])

## This crashes with an error
(GG &lt;- rbind( gg, c("Bear","Reptile")))
try(Relevel(ff, GG))

ff &lt;- factor(c(as.character(ff), "Jellyfish", "Spider"))
Relevel(ff, gg)
# excludes non-occupied levels
Relevel(ff, gg, xlevels = FALSE)
# If you do not want unknown animals classified, this returns NAs:
Relevel(ff, gg, nogroup = FALSE)
# Both
Relevel(ff, gg, nogroup = FALSE, xlevels = FALSE) 
</code></pre>


</div>