<div class="container">

<table style="width: 100%;"><tr>
<td>lineSource</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Distribution of emissions by lines</h2>

<h3>Description</h3>

<p>Create a emission distribution from 'sp' or 'sf' spatial lines data.frame or
spatial lines.
</p>
<p>There 3 modes available to create the emission grid:
- using gridInfo function output (defoult)
- using the patch to "wrfinput" (output from real.exe) file or "geo" for (output from geog.exe)
- "sf" (and "sp") uses a grid in SpatialPolygons format
</p>
<p>The variable is the column of the data.frame with contains the variable to be used as emissions,
by defoult the idstribution taken into acount the lench distribution of lines into each grid cell
and the output is normalized.
</p>


<h3>Usage</h3>

<pre><code class="language-R">lineSource(
  s,
  grid,
  as_raster = FALSE,
  type = "info",
  gcol = 100,
  grow = 100,
  variable = "length",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>SpatialLinesDataFrame of SpatialLines object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>grid object with the grid information or filename</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_raster</code></td>
<td>
<p>output format, TRUE for raster, FALSE for matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>"info" (default), "wrfinput", "geo", "sp" or "sf" for grid type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcol</code></td>
<td>
<p>grid points for a "sp" or "sf" type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grow</code></td>
<td>
<p>grid points for a "sp" or "sf" type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>variable to use, default is line length</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>display additional information</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a raster object containing the spatial distribution of emissions
</p>


<h3>Source</h3>

<p>OpenstreetMap data avaliable <a href="https://www.openstreetmap.org/">https://www.openstreetmap.org/</a> and <a href="https://download.geofabrik.de/">https://download.geofabrik.de/</a>
</p>


<h3>See Also</h3>

<p><code>gridInfo</code> and <code>rasterSource</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# loading a shapefile with osm data for sao paulo metropolitan area
roads &lt;- sf::st_read(paste0(system.file("extdata",package="EmissV"),"/streets.shp"))
d3    &lt;- gridInfo(paste0(system.file("extdata", package = "EmissV"),"/wrfinput_d03"))

# calculating only for 2 streets
roadLength &lt;- lineSource(roads[1:2,],d3,as_raster=TRUE)

# to generate a quick plot
raster::plot(roadLength,ylab="Lat", xlab="Lon",main="Length of roads")
# lines(road_lines)



</code></pre>


</div>