<div class="container">

<table style="width: 100%;"><tr>
<td>get_text_annotation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare text annotation</h2>

<h3>Description</h3>

<p>The function <code>get_text_annotation()</code> prepares a data frame for putting
text on a plot prepared by the <code>ggplot()</code> function from the
‘<code>ggplot2</code>’ package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_text_annotation(
  model,
  rvu,
  x_range,
  y_range,
  rl_index = NULL,
  plot_option = "full",
  mtbs = "verified"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An ‘<code>expirest_osle</code>’ or an
‘<code>expirest_Wisle</code>’ object, i.e. a list returned
by the <code>expirest_osle()</code> or by the
<code>expirest_wisle()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rvu</code></td>
<td>
<p>A character string that specifies the unit associated with the
response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_range</code></td>
<td>
<p>A numeric vector of the form <code>c(min, max)</code> that
specifies the range of the time variable to be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_range</code></td>
<td>
<p>A numeric vector of the form <code>c(min, max)</code> that
specifies the range of the response variable to be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rl_index</code></td>
<td>
<p>A positive integer that specifies which of the release limit
values that have been handed over to <code>expirest_wisle()</code> should
be displayed. The default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_option</code></td>
<td>
<p>A character string of either <code>"full"</code>, <code>"lean"</code>,
<code>"lean1"</code>, <code>"lean2"</code>, <code>"basic1"</code> and <code>"basic2"</code>,
that specifies if additional information should be shown in the plot
(option <code>"full"</code>) or only basic information (options <code>"lean"</code>
and <code>"basic"</code>). Full means the data points, the fitted regression
line with the confidence or prediction interval, the specification
limit(s) and the estimated shelf life. For ‘expirest_osle’ objects,
only the options <code>"full"</code> and <code>"lean"</code> are relevant. The default
is <code>"full"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mtbs</code></td>
<td>
<p>A character string that specifies the “model to be shown”,
i.e. either <code>verified</code>, which is the default, or one of <code>cics</code>,
<code>dics</code>, <code>dids</code> or <code>dids.pmse</code>. The <code>verified</code> model
is the model that was identified through the poolability check. It is
thus also one of the possible optional models. The <code>dids</code> model
represents the case where a separate model is fitted to the data of each
individual batch while the <code>dids.pmse</code> model is the interaction
model which includes the <code class="reqn">batch</code> variable as main effect and in the
interaction term with the <code class="reqn">time</code> variable (<code class="reqn">batch \times time</code>),
i.e. a model where the mean square error is pooled across batches.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>get_text_annotation()</code> expects various pieces
of information characterising an ‘<code>expirest_osle</code>’ or an
‘<code>expirest_wisle</code>’ model. With this information, the function
prepares a data frame that that is used by the functions
<code>plot_expirest_osle()</code> or <code>plot_expirest_wisle(</code>))
to put text annotations on the graph that is prepared by these functions.
</p>


<h3>Value</h3>

<p>A data frame with the columns ‘Time’, ‘Response’,
Label and Colour is returned, where the column names ‘Time’ and
‘Response’ are placeholders for the corresponding variable names.
If <code>model</code> is an ‘expirest_osle’ object, the data frame has up
to three rows representing the relevant specification limit(s) (row 1 or
rows 1 and 2) and the POI obtained from ordinary shelf life estimation (row
2 or 3). If <code>model</code> is an ‘expirest_wisle’ object, the data
frame has up to seven rows representing the relevant specification limit(s),
the worst case scenario limit (row 2 or 3), the intercept (row 3 or 4), the
POI of the worst case scenario model (row 4 or 5), the POI obtained from
ordinary shelf life  estimation (row 5 or 6) and the release limit (row 6
or 7).
</p>


<h3>See Also</h3>

<p><code>plot_expirest_osle</code>, <code>plot_expirest_wisle</code>,
<code>print_val</code>, <code>ggplot</code>,
<code>geom_text</code>.
</p>


</div>