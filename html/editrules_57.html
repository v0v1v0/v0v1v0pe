<div class="container">

<table style="width: 100%;"><tr>
<td>editrules.plotting</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Graphical representation of edits</h2>

<h3>Description</h3>

<p>Plots a graph, showing which variables occur in what edits. By default,
squares represent edits, circles represent variables and an edge connecing
a variable with an edit indicates that the edit contains the variable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'editmatrix'
plot(
  x,
  nodetype = "all",
  rules = editnames(x),
  vars = getVars(x),
  violated = logical(nedits(x)),
  adapt = logical(length(getVars(x))),
  nabbreviate = 5,
  layout = igraph::layout.fruchterman.reingold,
  edgecolor = "steelblue",
  rulecolor = "khaki1",
  varcolor = "lightblue1",
  violatedcolor = "sienna1",
  adaptcolor = "sienna1",
  ...
)

## S3 method for class 'editarray'
plot(
  x,
  nodetype = "all",
  rules = editnames(x),
  vars = getVars(x),
  violated = logical(nedits(x)),
  adapt = logical(length(getVars(x))),
  nabbreviate = 5,
  layout = igraph::layout.fruchterman.reingold,
  edgecolor = "steelblue",
  rulecolor = "khaki1",
  varcolor = "lightblue1",
  violatedcolor = "sienna1",
  adaptcolor = "sienna1",
  ...
)

## S3 method for class 'editset'
plot(
  x,
  nodetype = "all",
  rules = editnames(x),
  vars = getVars(x),
  violated = logical(nedits(x)),
  adapt = logical(length(getVars(x))),
  nabbreviate = 5,
  layout = igraph::layout.fruchterman.reingold,
  edgecolor = "steelblue",
  rulecolor = "khaki1",
  varcolor = "lightblue1",
  violatedcolor = "sienna1",
  adaptcolor = "sienna1",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object of class <code>editmatrix</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodetype</code></td>
<td>
<p><code>'rules'</code>, <code>'vars'</code> or <code>'all'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rules</code></td>
<td>
<p>selection of edits</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>selection of variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>violated</code></td>
<td>
<p>A named <code>logical</code> vector of length <code>nrow(E)</code>. Ingnored when <code>nodetype='vars'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adapt</code></td>
<td>
<p>A named <code>logical</code> vector of <code>length(getVars(E))</code>. Ignored when <code>nodetype='rules'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nabbreviate</code></td>
<td>
<p><code>integer</code> To how many characters should variable and edit names be abbreviated?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>
<p>an <code>igraph</code> layout function. See <code>?igraph::layout</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edgecolor</code></td>
<td>
<p>Color of edges and node frames</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rulecolor</code></td>
<td>
<p>Color of rule nodes (ignored when <code>nodetype='vars'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varcolor</code></td>
<td>
<p>Color of variable nodes (ignored when <code>nodetype='rules'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>violatedcolor</code></td>
<td>
<p>Color of nodes corresponding to violated edits (ignored when <code>nodetype='vars'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adaptcolor</code></td>
<td>
<p>Color of nodes corresponding to variables to adapt (ignored when <code>nodetype='rules'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further  arguments to be passed to plot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Depending on the chosen <code>nodetype</code>, this function can plot
three types of graphs based on an edit set.
</p>

<ul>
<li>
<p>If <code>nodetype="all"</code> (default), the full bipartite graph is plotted. Each
variable is represented by a square node while each edit is represented by a circular
node. An edge is drawn when a variable occurs in an edit.
</p>
</li>
<li>
<p>If <code>nodetype="vars"</code> the variable graph is drawn. Each node represents a
variable, and an edge is drawn between two nodes if the variables occur together in at
least one edit. The edge width relates to the number of edits connecting two variables.
</p>
</li>
<li>
<p>If <code>nodetype="rules"</code> the rule graph is drawn. Each node represents an edit
rule and an edge is drawn between two nodes if they share at least one variable. The 
edge width relates to the number of edits connecting the two edit rules.
</p>
</li>
</ul>
<p>The boolean vectors <code>violated</code> and <code>adapt</code> can be used to color violated 
edits or variables which have to be adapted. The vectors must have named elements,
so variables and edit names can be matched. 
</p>
<p>The function works by coercing an editmatrix to an <code>igraph</code> object, and therefore
relies on the plotting capabilities of the igraph package. For more finetuning,
use <code>as.igraph</code> and see <code>?igraph.plotting</code>. 
</p>
<p>The default layout generated by the Fruchterman-Reingold algorithm. The resulting  
layout is one of several optimal layouts, generated randomly (using a attration-repulsion 
model between the nodes). To reproduce layouts, use fix a randseed before calling the plot 
function.
</p>


<h3>References</h3>

<p>Csardi G, Nepusz T: The igraph software package for complex network
research, InterJournal, Complex Systems 1695. 2006. http://igraph.sf.net
</p>


<h3>See Also</h3>

<p><code>as.igraph</code>, <code>adjacency</code>, <code>igraph.plotting</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Examples with linear (in)equality edits

# load predefined edits from package
data(edits)
edits

# convert to editmatrix
E &lt;- editmatrix(edits)

## Not run:
# (Note to reader: the Not run directive only prevents the examle commands from
# running when package is built)

# Total edit graph
plot(E)

# Graph with dependent edits
plot(E, nodetype="rules")

# Graph with dependent variables
plot(E, nodetype="vars")

# Total edit graph, but with curved lines (option from igraph package)
plot(E, edge.curved=TRUE)


# graph, plotting just the connections caused by variable 't'
plot(E,vars='t')

## End(Not run) 

# here's an example with a broken record.
r &lt;- c(ct = 100, ch = 30, cp = 70, p=30,t=130 ) 
violatedEdits(E,r)
errorLocalizer(E,r)$searchBest()$adapt

# we color the violated edits and the variables that have to be adapted

## Not run
set.seed(1) # (for reprodicibility)
plot(E,
     adapt=errorLocalizer(E,r)$searchBest()$adapt,   
     violated=violatedEdits(E,r))
## End(Not run) 



# extract total graph (as igraph object)
as.igraph(E)

# extract graph with edges related to variable 't' and 'ch'
as.igraph(E,vars=c('t','ch'))

# extract total adjacency matrix
adjacency(E)

# extract adjacency matrix related to variables t and 'ch'
adjacency(E,vars=c('t','ch'))

## Examples with categorical edits

# generate an editarray:
E &lt;- editarray(expression(
    age %in% c('&lt;15','16-65','&gt;65'),
    employment %in% c('unemployed','employed','retired'),
    salary %in% c('none','low','medium','high'),
    if (age == '&lt;15') employment=='unemployed',
    if (salary != 'none') employment != 'unemployed',
    if (employment == 'unemployed') salary == 'none'))


## Not run:
# plot total edit graph
plot(E)

# plot with a different layout
plot(E,layout=layout.circle)

# plot edit graph, just the connections caused by 'salary'
plot(E,vars='salary')

## End(Not run)

# extract edit graph
as.igraph(E)

# extract edit graph, just the connections caused by 'salary'
as.igraph(E,vars='salary')

# extract adjacency matrix
adjacency(E)

# extract adjacency matrix, only caused by 'employment'
adjacency(E,vars='employment')





</code></pre>


</div>