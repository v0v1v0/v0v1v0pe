<div class="container">

<table style="width: 100%;"><tr>
<td>esFinal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>esFinal</h2>

<h3>Description</h3>

<p>esFinal generates the final ESM dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">esFinal(esDf, esOpt = NULL, complianceRate = NULL,
  RELEVANTINFO_ES = NULL, RELEVANTVN_ES = NULL, maxRows = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>esOpt</code></td>
<td>
<p>a data.frame. This data.frame is generated as part of a list returned by the function <code>esAssign</code>. The name of this list's element is <code>ESopt</code>. Extract this element and pass it to the argument <code>esOpt</code> of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complianceRate</code></td>
<td>
<p>integer. This value must be set to a value between 0 and 100. If you want to have the completion rates for all participants and you also want to make sure that all participants are kept in the final ESM dataset, simply set the argument <code>complianceRate</code> to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code>setES</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code>setES</code> and it is extended once either by function <code>genDateTime</code> or by function <code>splitDateTime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxRows</code></td>
<td>
<p>a numeric value. The number of data lines (per participant)  in the final event sampling dataset; must be equal for all participants. If no number is entered the maximum number across all participants is used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The empty rows will either denote ESM questionnaires that were missed by the participant or it will denote fillers, i.e. rows of empty data to fill up the number of rows to be equal across all participants The number of maximum rows per participant either are computed by searching the actual maximum number of questionnaires started by the participant, or by what the user defines to be the maximum number of questionnaires (no less than 2).
</p>


<h3>Value</h3>

<p>The user receives a list containing 3 elements:
</p>

<ol>
<li>
<p> ESfinal, i.e. with empty rows of data added and with 2 additional columns MISSED and FILLER. MISSED refers to questionnaires that should have been answered by the participants but weren't. FILLER refers to empty rows of data due to all participants having to have equally many rows of data for multilevel modeling. See <strong>Details</strong> for more information..
</p>
</li>
<li>
<p> ESrateFinal, i.e. the average completion rates per participant, both per prompt and overall.
</p>
</li>
<li>
<p> ESfinalOut, i.e. ESM data that contains participants that won't be used for statistical analyses due to having less than a minimum number of answered ESM questionnaires. If no participant is deselected a character string is returned that affirms that no deselection took place.
</p>
</li>
</ol>
<p>Unlike the interim result returned by the function <code>esAssign</code> (whenever there was at least one daily prompt) the data.frame <code>ESrateFinal</code> shows the final completion rates per participant.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code>esmprep</code> (function 29 of 29).
</p>


<h3>Examples</h3>

<pre><code class="language-R"># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esFinal. Start ------------------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# tbsqDf is a raw ESM dataset, delivered with the package.
# Prerequisites in order to execute esFinal. End --------------------
# -------------------------------------------------------
# Run function 29 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# tbsqDf is the result of function 'computeTimeBetween'.
esDfFin &lt;- esFinal(tbsqDf, esOpt=esAssigned[["ESopt"]], complianceRate=50,
RELEVANTINFO_ES, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>


</div>