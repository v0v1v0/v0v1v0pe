<div class="container">

<table style="width: 100%;"><tr>
<td>exclude_duplicates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Exclude rows with duplicate IP addresses and/or locations</h2>

<h3>Description</h3>

<p>The <code>exclude_duplicates()</code> function removes
rows of data that have the same IP address and/or same latitude and
longitude. The function is written to work with data from
<a href="https://www.qualtrics.com/">Qualtrics</a> surveys.
</p>


<h3>Usage</h3>

<pre><code class="language-R">exclude_duplicates(
  x,
  id_col = "ResponseId",
  ip_col = "IPAddress",
  location_col = c("LocationLatitude", "LocationLongitude"),
  rename = TRUE,
  dupl_ip = TRUE,
  dupl_location = TRUE,
  include_na = FALSE,
  quiet = TRUE,
  print = TRUE,
  silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Data frame (preferably imported from Qualtrics using {qualtRics}).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_col</code></td>
<td>
<p>Column name for unique row ID (e.g., participant).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ip_col</code></td>
<td>
<p>Column name for IP addresses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location_col</code></td>
<td>
<p>Two element vector specifying columns for latitude and
longitude (in that order).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rename</code></td>
<td>
<p>Logical indicating whether to rename columns (using <code>rename_columns()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dupl_ip</code></td>
<td>
<p>Logical indicating whether to check IP addresses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dupl_location</code></td>
<td>
<p>Logical indicating whether to check latitude and
longitude.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_na</code></td>
<td>
<p>Logical indicating whether to include rows with NAs for
IP address and location as potentially excluded rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical indicating whether to print message to console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>Logical indicating whether to print returned tibble to
console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>Logical indicating whether to print message to console. Note
this argument controls the exclude message not the check message.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To record this information in your Qualtrics survey, you must ensure that
<a href="https://www.qualtrics.com/support/survey-platform/survey-module/survey-options/survey-protection/#AnonymizingResponses">Anonymize responses is disabled</a>.
</p>
<p>Default column names are set based on output from the
<a href="https://docs.ropensci.org/qualtRics/reference/fetch_survey.html"><code>qualtRics::fetch_survey()</code></a>.
By default, IP address and location are both checked, but they can be
checked separately with the <code>dupl_ip</code> and <code>dupl_location</code> arguments.
</p>
<p>The function outputs to console separate messages about the number of
rows with duplicate IP addresses and rows with duplicate locations.
These counts are computed independently, so rows may be counted for both
types of duplicates.
</p>


<h3>Value</h3>

<p>An object of the same type as <code>x</code> that excludes rows
with duplicate IP addresses and/or locations.
For a function that just checks for and returns duplicate rows,
use <code>check_duplicates()</code>. For a function that marks these rows,
use <code>mark_duplicates()</code>.
</p>


<h3>See Also</h3>

<p>Other duplicates functions: 
<code>check_duplicates()</code>,
<code>mark_duplicates()</code>
</p>
<p>Other exclude functions: 
<code>exclude_duration()</code>,
<code>exclude_ip()</code>,
<code>exclude_location()</code>,
<code>exclude_preview()</code>,
<code>exclude_progress()</code>,
<code>exclude_resolution()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Exclude duplicate IP addresses and locations
data(qualtrics_text)
df &lt;- exclude_duplicates(qualtrics_text)

# Remove preview data first
df &lt;- qualtrics_text %&gt;%
  exclude_preview() %&gt;%
  exclude_duplicates()

# Exclude only for duplicate locations
df &lt;- qualtrics_text %&gt;%
  exclude_preview() %&gt;%
  exclude_duplicates(dupl_location = FALSE)
</code></pre>


</div>