<div class="container">

<table style="width: 100%;"><tr>
<td>w_mean</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute various weighted statistics</h2>

<h3>Description</h3>


<ul>
<li>
<p><code>w_mean</code> weighted mean of a numeric vector
</p>
</li>
<li>
<p><code>w_sd</code> weighted sample standard deviation of a numeric vector
</p>
</li>
<li>
<p><code>w_var</code> weighted sample variance of a numeric vector
</p>
</li>
<li>
<p><code>w_se</code> weighted standard error of a numeric vector
</p>
</li>
<li>
<p><code>w_median</code> weighted median of a numeric vector
</p>
</li>
<li>
<p><code>w_mad</code> weighted mean absolute deviation from median of a numeric vector
</p>
</li>
<li>
<p><code>w_sum</code> weighted sum of a numeric vector
</p>
</li>
<li>
<p><code>w_n</code> weighted number of values of a numeric vector
</p>
</li>
<li>
<p><code>w_cov</code> weighted covariance matrix of a numeric matrix/data.frame
</p>
</li>
<li>
<p><code>w_cor</code> weighted Pearson correlation matrix of a numeric matrix/data.frame
</p>
</li>
<li>
<p><code>w_pearson</code> shortcut for <code>w_cor</code>. Weighted Pearson
correlation matrix of a numeric matrix/data.frame
</p>
</li>
<li>
<p><code>w_spearman</code> weighted Spearman correlation matrix of a numeric matrix/data.frame
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">w_mean(x, weight = NULL, na.rm = TRUE)

w_median(x, weight = NULL, na.rm = TRUE)

w_var(x, weight = NULL, na.rm = TRUE)

w_sd(x, weight = NULL, na.rm = TRUE)

w_se(x, weight = NULL, na.rm = TRUE)

w_mad(x, weight = NULL, na.rm = TRUE)

w_sum(x, weight = NULL, na.rm = TRUE)

w_n(x, weight = NULL, na.rm = TRUE)

unweighted_valid_n(x, weight = NULL)

valid_n(x, weight = NULL)

w_max(x, weight = NULL, na.rm = TRUE)

w_min(x, weight = NULL, na.rm = TRUE)

w_cov(x, weight = NULL, use = c("pairwise.complete.obs", "complete.obs"))

w_cor(x, weight = NULL, use = c("pairwise.complete.obs", "complete.obs"))

w_pearson(x, weight = NULL, use = c("pairwise.complete.obs", "complete.obs"))

w_spearman(x, weight = NULL, use = c("pairwise.complete.obs", "complete.obs"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a numeric vector (matrix/data.frame for correlations) containing the
values whose weighted statistics is to be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>a vector of weights to use for each element of x. Cases with
missing, zero or negative weights will be removed before calculations. If
<code>weight</code> is missing then unweighted statistics will be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>a logical value indicating whether NA values should be stripped
before the computation proceeds. Note that contrary to base R statistic
functions the default value is TRUE (remove missing values).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p><code>"pairwise.complete.obs"</code> (default) or <code>"complete.obs"</code>.
In the first case  the correlation or covariance between each pair of
variables is computed using all complete pairs of observations on those
variables. If <code>use</code> is <code>"complete.obs"</code> then missing values are
handled by casewise deletion.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If argument of correlation functions is data.frame with variable labels then
variables names will be replaced with labels. If this is undesirable behavior
use drop_var_labs function: <code>w_cor(drop_var_labs(x))</code>. Weighted
Spearman correlation coefficients are calculated with weights rounded to nearest
integer. It gives the same result as in SPSS Statistics software. By
now this algorithm is not memory efficient.
</p>


<h3>Value</h3>

<p>a numeric value of length one/correlation matrix
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(mtcars)
dfs = mtcars %&gt;% columns(mpg, disp, hp, wt)

with(dfs, w_mean(hp, weight = 1/wt))

# apply labels
mtcars = mtcars %&gt;% 
    apply_labels(
        mpg = "Miles/(US) gallon",
        cyl = "Number of cylinders",
        disp = "Displacement (cu.in.)",
        hp = "Gross horsepower",
        drat = "Rear axle ratio",
        wt = "Weight (lb/1000)",
        qsec = "1/4 mile time",
        vs = "Engine",
        vs = c("V-engine" = 0, 
                "Straight engine" = 1),
        am = "Transmission",
        am = c(automatic = 0, 
                manual=1),
        gear = "Number of forward gears",
        carb = "Number of carburetors"
    )

# weighted correlations with labels
w_cor(dfs, weight = 1/dfs$wt)

# without labels
w_cor(drop_var_labs(dfs), weight = 1/dfs$wt)
</code></pre>


</div>