<div class="container">

<table style="width: 100%;"><tr>
<td>EEAaq_get_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download air quality data at european level from the EEA download service</h2>

<h3>Description</h3>

<p>This function imports air quality datasets at european level, based on the zone, time and pollutant specifications.
This function generates an <code>EEAaq_df</code> object, or an <code>EEAaq_df_sfc</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">EEAaq_get_data(
  zone_name = NULL,
  NUTS_level = NULL,
  pollutant = NULL,
  from = NULL,
  to = NULL,
  ID = FALSE,
  quadrant = NULL,
  polygon = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>zone_name</code></td>
<td>
<p>character vector specifying the names of the zones to consider. The reference is the NUTS and LAU nomenclature by Eurostat.
See <em>Details</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NUTS_level</code></td>
<td>
<p>character that specify the level of NUTS or LAU, to which <code>zone_name</code> belongs.
Allowed values are 'NUTS0', 'NUTS1', 'NUTS2', 'NUTS3', 'LAU'.
For further information see <em>Details</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pollutant</code></td>
<td>
<p>the pollutants for which to download data. It may be:
</p>

<ul>
<li>
<p>character vector representing the short names of the pollutants to analyse. The reference is the
variable <code>Notation</code> in the dataset <code>pollutants</code> provided by this package.
</p>
</li>
<li>
<p>numeric vector representing the codes of the pollutants to analyse. The reference is the variable <code>Code</code>
in the dataset <code>pollutants</code> provided by this package.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>the starting point of the time window to consider.
It may be:
</p>

<ul>
<li>
<p>integer representing the year (data are downloaded starting from the first day of the year specified)
</p>
</li>
<li>
<p>character containing a specific day of the year in the format <code>yyyy-mm-dd</code>
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>the ending point of the time window to consider.
It may be:
</p>

<ul>
<li>
<p>integer representing the year (data are downloaded ending at the last day of the year specified)
</p>
</li>
<li>
<p>character containing a specific day of the year in the format <code>yyyy-mm-dd</code>
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID</code></td>
<td>
<p>logic value (T or F). If <code>TRUE</code>, the character specified in the parameter <code>zone_name</code>
is the unique identifier code provided by Eurostat. The reference is the <code>NUTS_ID</code> column from the
<code>NUTS</code> dataset or the <code>LAU_ID</code> from the <code>LAU</code> dataset.
If <code>FALSE</code> (the default), the character specified in the parameter <code>zone_name</code> is the zone name
expressed in latin characters. The reference is the <code>NAME_LATN</code> column from the <code>NUTS</code> dataset and the
<code>LAU_NAME</code> column from the <code>LAU</code> dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quadrant</code></td>
<td>
<p>a list of bidimensional numeric vectors containing the coordinates in <b>WGS84</b> format.
If the list has two elements, the function builds a square using the two coordinates as
opposite extremes. If the list contains three or more elements, every point is a vertex of a
polygon, in particular the convex hull of the specified points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polygon</code></td>
<td>
<p>A <code>sfc_POLYGON</code> or <code>sfc_MULTIPOLYGON</code> class object
(see <a href="https://CRAN.R-project.org/package=sf">https://CRAN.R-project.org/package=sf</a> for further information), specifying the area of interest.
The polygon can be imported via shapefile or other formats from the user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logic value (T or F). If <code>TRUE</code> (the default) information about
the function progress are printed. If <code>FALSE</code> no message is printed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The NUTS classification (Nomenclature of territorial units for statistics) is a hierarchical system for dividing up the economic territory of the EU and the UK.
The levels are defined as follows:
</p>

<ul>
<li>
<p><strong>NUTS 0</strong>: the whole country
</p>
</li>
<li>
<p><strong>NUTS 1</strong>: major socio-economic regions
</p>
</li>
<li>
<p><strong>NUTS 2</strong>: basic regions for the application of regional policies
</p>
</li>
<li>
<p><strong>NUTS 3</strong>: small regions for specific diagnoses
</p>
</li>
</ul>
<p>Further information is available at <a href="https://ec.europa.eu/eurostat/web/nuts/background">https://ec.europa.eu/eurostat/web/nuts/background</a>.
These LAUs (Local Administrative Units) are the building blocks of the NUTS, and comprise the municipalities and communes of the European Union.
For further information see <a href="https://ec.europa.eu/eurostat/web/nuts/local-administrative-units">https://ec.europa.eu/eurostat/web/nuts/local-administrative-units</a>.
Note that a specific name can be associated with both LAU and NUTS levels.
For instance "Milano" is either a city or a NUTS 3 area in Italy. To download data referred to the city,
specify <code>zone_name = "Milano"</code> and <code>NUTS_level = "LAU"</code>, while to download data referred to the province, specify
<code>zone_name = "Milano"</code> and <code>NUTS_level = "NUTS3"</code>.
One of <code>zone_name</code>, <code>quadrant</code> and <code>polygon</code> should always be specified by the user.
</p>


<h3>Value</h3>

<p>A data frame of class <code>EEAaq_df</code>, if <code>zone_name</code> is specified, and of class <code>EEAaq_df_sfc</code>
if whether the parameter <code>quadrant</code> or <code>polygon</code> is specified.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library(dplyr)
library(utils)
#Download of the PM10 data in Milan (Lombardia, Italy) during 2023.
EEAaq_get_data(zone_name = "Milano", NUTS_level = "LAU",
  pollutant = "PM10", from = 2023, to = 2023, ID = FALSE, verbose = TRUE)

#Alternatively, it is possible to obtain the same result using
#the LAU_ID of Milan and the pollutant code:
EEAaq_get_data(zone_name = "015146", NUTS_level = "LAU",
  pollutant = "PM10", from = 2023, to = 2023, ID = TRUE, verbose = TRUE)

#Another way to get the nitrogen dioxide in Milan during 2023,
#is to extract the geometry from the LAU dataset and use it with the polygon parameter:
temp &lt;- tempfile()
download.file("https://github.com/AgostinoTassanMazzocco/EEAaq/raw/main/LAU.rds",
  temp, quiet = TRUE)
milan &lt;- readRDS(temp) %&gt;%
    filter(LAU_NAME == "Milano") %&gt;%
    pull(geometry)
EEAaq_get_data(pollutant = "PM10", from = 2023, to = 2023, polygon = milan)

#Another option is to choose the exact dates, for example,
#in order to import Milan PM10 january 2023 data,
#it is possible to write:
EEAaq_get_data(polygon = milan, pollutant = "PM10", from = "2023-01-01", to = "2023-01-31")

#Spcifying the parameter quadrant, it is possible to choose
#a specific quadrant on the geographic map.
#For instance, using the points (11.5, 46.5), (10.5, 46),
#will be imported data about the air quality stations
#located inside the rectangle which has, as opposite vertexes,
#the two selected points. In this case
#PM10 and PM2.5 data are downloaded for the whole 2021:
EEAaq_get_data(pollutant = c("PM10", "PM2.5"),
  quadrant = list(c(11.5, 46.5), c(10.5, 46)),
  from = 2021, to = 2021, verbose = TRUE)

</code></pre>


</div>