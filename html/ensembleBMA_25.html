<div class="container">

<table style="width: 100%;"><tr>
<td>controlBMAgamma0</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Control parameters for BMA precipitation modeling
</h2>

<h3>Description</h3>

<p>Specifies a list of values controling the Bayesian Model Averaging fit 
of a mixture of gammas with a point mass at 0 to ensemble forecasts for
precipitation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">controlBMAgamma0(maxIter = Inf, tol = sqrt(.Machine$double.eps), 
                 power = (1/3), rainobs = 10, 
                 init = list(varCoefs = NULL, weights = NULL),
             optim.control = list(ndeps = rep( sqrt(.Machine$double.eps), 2)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>maxIter</code></td>
<td>

<p>An integer specifying an upper limit on the number of iterations
for fitting  the BMA mixture via EM. The default is 
<code>Inf</code>, which sets no upper limit on the number of iterations, 
so that the convergence criterion based on <code>eps</code> is used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>

<p>A numeric convergence tolerance. The EM fit for the mixture of
gammas is terminated when the relative error in successive 
objective values in the M-step falls below <code>tol</code>.
The default is <code>sqrt(.Machine$double.eps)</code>, 
which is approximately <code>1.e-8</code> on IEEE compliant machines.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>

<p>A scalar value giving the power by which the data will be
transformed to fit the models for the point mass at 0
and mean of nonzero observations. The default is to use the 1/3
power of the data.
The untransformed forecast is used to fit the variance model.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rainobs</code></td>
<td>

<p>An integer specifying a minimum number of observations with
nonzero precipitation in the training data. When necessary and
possible, the training period will be extended backward in
increments of days to meet the minimum requirement.
It is not possible to fit the BMA model for precipitation without
sufficient nonzero observations. The default minimum number is 10.
It many instances fewer nonzero observations may suffice, but it
could also be that more are needed to model precipitation in some
datasets.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>

<p>An optional list of initial values for variance coefficients
and weights. The default is to start with the variance coefficients
equal to 1, and with equal weights for each member of the ensemble.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optim.control</code></td>
<td>

<p>Control parameters	for the	optim function used in the M-step of EM.
The default here is list(ndeps = rep( sqrt(.Machine$double.eps), 2)),
which assigns a smaller finite-difference step size than the
<code>optim</code> default of 1.e-3. To use the default control parameters for
<code>optim</code>, set <code>optim.control=NULL</code>.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list whose components are the input arguments and their assigned values. 
</p>


<h3>References</h3>

<p>J. M. Sloughter, A. E. Raftery, T Gneiting and C. Fraley, 
Probabilistic quantitative precipitation forecasting 
using Bayesian model averaging,
<em>Monthly Weather Review 135:3209â€“3220, 2007</em>.
</p>
<p>C. Fraley, A. E. Raftery, T. Gneiting and J. M. Sloughter,
<code>ensembleBMA</code>: An <code>R</code> Package for Probabilistic Ensemble Forecasting
using Bayesian Model Averaging,
Technical Report No. 516R, Department of Statistics, University of
Washington, 2007 (revised 2010).
</p>


<h3>See Also</h3>

<p><code>ensembleBMAgamma0</code>, 
<code>fitBMAgamma0</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">  data(ensBMAtest)

  ensMemNames &lt;- c("gfs","cmcg","eta","gasp","jma","ngps","tcwb","ukmo")
  
  obs &lt;- paste("PCP24","obs", sep = ".")
  ens &lt;- paste("PCP24", ensMemNames, sep = ".")

  prcpTestData &lt;- ensembleData( forecasts = ensBMAtest[,ens],
                                dates = ensBMAtest[,"vdate"], 
                                observations = ensBMAtest[,obs], 
                                station = ensBMAtest[,"station"],
                                forecastHour = 48,
                                initializationTime = "00")

## Not run:  # R check
  prcpTestFit1 &lt;- ensembleBMAgamma0( prcpTestData, trainingDays = 30,
       control = controlBMAgamma0(power = (1/4)))

## End(Not run)

# for quick run only; use more training days for forecasting
  prcpTestFit1 &lt;- ensembleBMAgamma0( prcpTestData[1:14,], trainingDays = 6,
       control = controlBMAgamma0(power = (1/4)))
</code></pre>


</div>