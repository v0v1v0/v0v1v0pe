<div class="container">

<table style="width: 100%;"><tr>
<td>downloadPISA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download and Unzip PISA Files</h2>

<h3>Description</h3>

<p>Uses an Internet connection to download PISA data to a
computer. Data come from the OECD website.
</p>


<h3>Usage</h3>

<pre><code class="language-R">downloadPISA(
  root,
  years = c(2000, 2003, 2006, 2009, 2012, 2015, 2018),
  database = c("INT", "CBA", "FIN"),
  cache = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p>a character string indicating the directory where the PISA data should
be stored. Files are placed in a folder named PISA/[year].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>years</code></td>
<td>
<p>an integer vector of the assessment years to download. Valid years are 2000, 2003,
2006, 2009, 2012, 2015, and 2018.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>database</code></td>
<td>
<p>a character vector to indicate which database to download from. For 2012,
three databases are available (<code>INT</code> = International, <code>CBA</code> = Computer-Based Assessment, and
<code>FIN</code> = Financial Literacy). For other years, only <code>INT</code> is available (for example, if PISA
2015 financial literacy is to be downloaded, the database argument should be set to <code>INT</code>).
Defaults to <code>INT</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>a logical value set to process and cache the text (.txt) version of files.
This takes a very long time but saves time for future uses of
the data. Default value is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical value to either print or suppress status message output.
The default value is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function uses
<code>download.file</code>
to download files from provided URLs. Some machines might require a different
user agent in HTTP(S) requests. If the downloading gives an error or behaves
unexpectedly (e.g., a zip file cannot be unzipped or a data file is
significantly smaller than expected), users can toggle <code>HTTPUserAgent</code>
options to find one that works for their machines. One common alternative option is
</p>
<p><code>options(HTTPUserAgent="Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0")</code>
</p>
<p>Beginning in the 2018 data files, the <code>SPSS_STU_COG.zip</code> source data file is a <code>DEFLATE64</code> compressed zip file.
This means that the user must manually extract the contained <code>CY07_MSU_STU_COG.sav</code> file using an external zip
program capable of handling <code>DEFLATE64</code> zip format, as existing R functions are unable to handle this zip format natively.
</p>


<h3>Author(s)</h3>

<p>Yuqi Liao, Paul Bailey, and Trang Nguyen
</p>


<h3>See Also</h3>

<p><code>readPISA</code>, <code>download.file</code>, <code>options</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# download PISA 2012 data (for all three databases)
downloadPISA(years = 2012, database = c("INT","CBA","FIN"), root="~/")

# download PISA 2009, 2012, and 2015 data (International Database only) 
# to C:/PISA/2009, C:/PISA/2012, and C:/PISA/2015 folders, respectively
downloadPISA(years = c(2009,2012,2015), root="~/")  

## End(Not run)
</code></pre>


</div>