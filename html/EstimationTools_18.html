<div class="container">

<table style="width: 100%;"><tr>
<td>legend.HazardShape</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Customize legend for <code>plot.HazardShape</code> outputs</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p>Put legend after run <code>plot.HazardShape</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">legend.HazardShape(
  x,
  y = NULL,
  legend = c("Empirical TTT", "Spline curve"),
  fill = NULL,
  col = 1,
  border = "white",
  lty = NA,
  lwd = NA,
  pch = c(1, NA),
  angle = 45,
  density = NULL,
  bty = "o",
  bg = par("bg"),
  box.lwd = par("lwd"),
  box.lty = par("lty"),
  box.col = par("fg"),
  pt.bg = NA,
  cex = 1,
  pt.cex = cex,
  pt.lwd = lwd,
  xjust = 0,
  yjust = 1,
  x.intersp = 1,
  y.intersp = 1,
  adj = c(0, 0.5),
  text.width = NULL,
  text.col = par("col"),
  text.font = NULL,
  merge = TRUE,
  trace = FALSE,
  plot = TRUE,
  ncol = 1,
  horiz = FALSE,
  title = NULL,
  inset = 0,
  xpd = TRUE,
  title.col = text.col[1],
  title.adj = 0.5,
  title.cex = cex[1],
  title.font = text.font[1],
  seg.len = 2,
  curve_options = list(col = 2, lwd = 2, lty = 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>the x and y co-ordinates to be used to position the legend.
They can be specified by keyword or in any way which is accepted by
<code>xy.coords</code>: See ‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>a character or expression vector
of length <code class="reqn">\ge 1</code> to appear in the legend.  Other
objects will be coerced by <code>as.graphicsAnnot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>if specified, this argument will cause boxes filled
with the specified colors (or shaded in the specified colors)
to appear beside the legend text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>the color of points or lines appearing in the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>the border color for the boxes (used only if
<code>fill</code> is specified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty, lwd</code></td>
<td>
<p>the line types and widths for lines appearing in the
legend.  One of these two <em>must</em> be specified for line drawing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>the plotting symbols appearing in the legend, as
numeric vector or a vector of 1-character strings (see
<code>points</code>). Unlike <code>points</code>, this can all be
specified as a single multi-character string.  <em>Must</em> be
specified for symbol drawing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>angle of shading lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p>the density of shading lines, if numeric and
positive. If <code>NULL</code> or negative or <code>NA</code> color filling
is assumed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bty</code></td>
<td>
<p>the type of box to be drawn around the legend.  The allowed
values are <code>"o"</code> (the default) and <code>"n"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg</code></td>
<td>
<p>the background color for the legend box.  (Note that this is
only used if <code>bty != "n"</code>.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box.lty, box.lwd, box.col</code></td>
<td>
<p>the line type, width and color for
the legend box (if <code>bty = "o"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pt.bg</code></td>
<td>
<p>the background color for the <code>points</code>,
corresponding to its argument <code>bg</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>character expansion factor <b>relative</b> to current
<code>par("cex")</code>.  Used for text, and provides the default for
<code>pt.cex</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pt.cex</code></td>
<td>
<p>expansion factor(s) for the points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pt.lwd</code></td>
<td>
<p>line width for the points, defaults to the one for
lines, or if that is not set, to <code>par("lwd")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xjust</code></td>
<td>
<p>how the legend is to be justified relative to the legend
x location.  A value of 0 means left justified, 0.5 means centered
and 1 means right justified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yjust</code></td>
<td>
<p>the same as <code>xjust</code> for the legend y location.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.intersp</code></td>
<td>
<p>character interspacing factor for horizontal (x) spacing
between symbol and legend text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.intersp</code></td>
<td>
<p>vertical (y) distances (in lines of text shared above/below each legend entry).
A vector with one element for each row of the legend can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adj</code></td>
<td>
<p>numeric of length 1 or 2; the string adjustment for legend
text.  Useful for y-adjustment when <code>labels</code> are
plotmath expressions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.width</code></td>
<td>
<p>the width of the legend text in x (<code>"user"</code>)
coordinates.  (Should be positive even for a reversed x axis.)
Can be a single positive numeric value (same width for each column of the legend),
a vector (one element for each column of the legend),
<code>NULL</code> (default) for computing a proper maximum value of <code>strwidth(legend)</code>),
or <code>NA</code> for computing a proper column wise maximum value of <code>strwidth(legend)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.col</code></td>
<td>
<p>the color used for the legend text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.font</code></td>
<td>
<p>the font used for the legend text, see <code>text</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge</code></td>
<td>
<p>logical; if <code>TRUE</code>, merge points and lines but
not filled boxes.  Defaults to <code>TRUE</code> if there are points and lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trace</code></td>
<td>
<p>logical; if <code>TRUE</code>, shows how <code>legend</code> does all
its magical computations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical.  If <code>FALSE</code>, nothing is plotted but the
sizes are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncol</code></td>
<td>
<p>the number of columns in which to set the legend items
(default is 1, a vertical legend).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>horiz</code></td>
<td>
<p>logical; if <code>TRUE</code>, set the legend horizontally
rather than vertically (specifying <code>horiz</code> overrides the <code>ncol</code>
specification).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>a character string or length-one expression giving a
title to be placed at the top of the legend.  Other objects will be
coerced by <code>as.graphicsAnnot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inset</code></td>
<td>
<p>inset distance(s) from the margins as a fraction of the
plot region when legend is placed by keyword.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xpd</code></td>
<td>
<p>if supplied, a value of the graphical parameter <code>xpd</code>
to be used while the legend is being drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title.col</code></td>
<td>
<p>color for <code>title</code>, defaults to <code>text.col[1]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title.adj</code></td>
<td>
<p>horizontal adjustment for <code>title</code>: see the help
for <code>par("adj")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title.cex</code></td>
<td>
<p>expansion factor(s) for the title, defaults to <code>cex[1]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title.font</code></td>
<td>
<p>the font used for the legend title, defaults to <code>text.font[1]</code>,
see <code>text</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seg.len</code></td>
<td>
<p>the length of lines drawn to illustrate <code>lty</code>
and/or <code>lwd</code> (in units of character widths).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>curve_options</code></td>
<td>
<p>a list whose names are curve graphical parameters, and whose
values are the corresponding graphical parameters values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is a wrapper for the <code>legend</code> function.
It just adds two features:
</p>

<ul>
<li> <p><code>legend</code> has a default value, regarding that <code>HazardShape</code> objects
produces the TTT plot and its LOESS estimation.
</p>
</li>
<li> <p><code>curve_options</code> is used to set legend parameters for the LOESS
curve. We encourage you to define first a list with curve parameters, and then
pass it to <code>plot.HazardShape</code> and <code>legend.HazardShape</code> (see example 2).
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Jaime Mosquera Gutiérrez <a href="mailto:jmosquerag@unal.edu.co">jmosquerag@unal.edu.co</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(EstimationTools)

data("reduction_cells")
TTT_IG &lt;- TTTE_Analytical(Surv(days, status) ~ 1, data = reduction_cells,
                          method = 'censored')
HS_IG &lt;- TTT_hazard_shape(TTT_IG, data = reduction_cells)

#----------------------------------------------------------------------------
# Example 1: put legend to the TTT plot of the reduction cells data set.

# Run `plot.HazardShape` method.
par(
  cex.lab=1.8,
  cex.axis=1.8,
  mar=c(4.8,5.4,1,1),
  las = 1,
  mgp=c(3.4,1,0)
)
plot(HS_IG, pch = 16, cex = 1.8)

# Finally, put the legend
legend.HazardShape(
  x = "bottomright",
  box.lwd = NA,
  cex = 1.8,
  pt.cex = 1.8,
  bty = 'n',
  pch = c(16, NA)
)
#----------------------------------------------------------------------------
# Example 2: example 1 with custom options for the curve

# This is the list with curve parameters
loess_options &lt;- list(
  col = 3, lwd = 4, lty = 2
)
par(
  cex.lab=1.8,
  cex.axis=1.8,
  mar=c(4.8,5.4,1,1),
  las = 1,
  mgp=c(3.4,1,0)
)

plot(HS_IG, pch = 16, cex = 1.8, curve_options = loess_options)
legend.HazardShape(
  x = "bottomright",
  box.lwd = NA,
  cex = 1.8,
  pt.cex = 1.8,
  bty = 'n',
  pch = c(16, NA),
  curve_options = loess_options
)

</code></pre>


</div>