<div class="container">

<table style="width: 100%;"><tr>
<td>apc.LCa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit Age-Period-Cohort models and Lee-Carter models with effects
modeled by natural splines.
</h2>

<h3>Description</h3>

<p><code>apc.LCa</code> fits an Age-Period-Cohort model and sub-models (using
<code>apc.fit</code>) as well as Lee-Carter models (using
<code>LCa.fit</code>). <code>show.apc.LCa</code> plots the models in little
boxes with their residual deviance with arrows showing their
relationships.
</p>


<h3>Usage</h3>

<pre><code class="language-R">apc.LCa( data,
  keep.models = FALSE,
          ... )
show.apc.LCa( x,
       dev.scale = TRUE,
             top = "Ad", ... )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame that must have columns <code>A</code>, <code>P</code>,
<code>D</code> and <code>Y</code>, see e.g. <code>apc.fit</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.models</code></td>
<td>
<p>Logical. Should the <code>apc</code> object and the 5
<code>LCa</code> objects be returned too?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further parameters passed on to <code>LCa.fit</code> or
<code>boxes.matrix</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The result from a call to <code>apc.LCa</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev.scale</code></td>
<td>
<p>Should the vertical position of the boxes with the
models be scales relative to the deviance between the Age-drift
model and the extended Lee-Carter model?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>top</code></td>
<td>
<p>The model presented at the top of the plot of boxes
(together with any other model with larger deviance) when
vertical position is scaled by deviances. Only "Ad", "AP", "AC",
"APa" or "ACa" will make sense.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>apc.LCa</code> fits all 9 models (well, 10) available as
extension and sub-models of the APC-model and compares them by
returning deviance and residual df.
</p>


<h3>Value</h3>

<p>A 9 by 2 matrix classified by model and deviance/df; optionally
(if <code>models=TRUE</code>) a list with the matrix as <code>dev</code>, <code>apc</code>, an
<code>apc</code> object (from <code>apc.fit</code>), and <code>LCa</code>, a list
with 5 <code>LCa</code> objects (from <code>LCa.fit</code>). 
</p>


<h3>Author(s)</h3>

<p>Bendix Carstensen, <a href="http://bendixcarstensen.com">http://bendixcarstensen.com</a>
</p>


<h3>See Also</h3>

<p><code> apc.fit</code>, <code>LCa.fit </code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library( Epi )
clear()
# Danish lung cancer incidence in 5x5x5 Lexis triangles
data( lungDK )
lc &lt;- subset( lungDK, Ax&gt;40 )[,c("Ax","Px","D","Y")]
names( lc )[1:2] &lt;- c("A","P")
head( lc )

al &lt;- apc.LCa( lc, npar=c(9,6,6,6,10), keep.models=TRUE, maxit=500, eps=10e-3 )
show.apc.LCa( al, dev=TRUE )

# Danish mortality data
## Not run: 
data( M.dk )
mdk &lt;- subset( M.dk, sex==1 )[,c("A","P","D","Y")]
head( mdk )

al &lt;- apc.LCa( mdk, npar=c(15,15,20,6,6), maxit=50, eps=10e-3,
               quiet=FALSE, VC=FALSE )
show.apc.LCa( al, dev=FALSE )
show.apc.LCa( al, dev=TRUE )
show.apc.LCa( al, top="AP" )

# Fit a reasonable model to Danish mortality data and plot results
mAPa &lt;- LCa.fit( mdk, model="APa", npar=c(15,15,20,6,6), c.ref=1930,
                 a.ref=70, quiet=FALSE, maxit=250 )
par( mfrow=c(1,3) )
plot( mAPa ) 
## End(Not run)
</code></pre>


</div>