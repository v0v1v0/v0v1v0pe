<div class="container">

<table style="width: 100%;"><tr>
<td>edl_set_token</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get or set an earthdata login token</h2>

<h3>Description</h3>

<p>This function will ping the EarthData API for any available tokens.
If a token is not found, it will request one.  You may only have
two active tokens at any given time.  Use edl_revoke_token to remove
unwanted tokens.  By default, the function will also set an environmental
variable for the active R session to store the token.  This allows
popular R packages which use gdal to immediately authenticate any http
addresses to NASA EarthData assets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">edl_set_token(
  username = default("user"),
  password = default("password"),
  token_number = 1,
  set_env_var = TRUE,
  format = c("token", "header", "file"),
  prompt_for_netrc = interactive()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>username</code></td>
<td>
<p>EarthData Login User</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>password</code></td>
<td>
<p>EarthData Login Password</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_number</code></td>
<td>
<p>Which token (1 or 2)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>set_env_var</code></td>
<td>
<p>Should we set the GDAL_HTTP_HEADER_FILE
environmental variable?  logical, default TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>One of "token", "header" or "file."  "header" adds the prefix
used by http headers to the return string.  "file" returns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prompt_for_netrc</code></td>
<td>
<p>Often netrc is preferable, so this function will by
default prompt the user to switch.  Set to FALSE to silence this.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>IMPORTANT: it is necessary to unset this token using <code>edl_unset_token()</code>
before trying to access HTTP resources that are not part of EarthData,
as setting this token will cause those calls to fail! OR simply use
<code>edl_netrc()</code> to authenticate without facing this issue.
</p>
<p>NOTE: Because GDAL &gt;= 3.6.1 is required to recognize the GDAL_HTTP_HEADERS,
but all versions recognize GDAL_HTTP_HEADER_FILE. So we set the Bearer token
in a temporary file and provide this path as GDAL_HTTP_HEADER_FILE to
improve compatibility with older versions.
</p>


<h3>Value</h3>

<p>A text string containing only the token (format=token),
or a token with the header prefix included, <code style="white-space: pre;">⁠Authorization: Bearer &lt;token&gt;⁠</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
edl_set_token()
edl_unset_token()

</code></pre>


</div>