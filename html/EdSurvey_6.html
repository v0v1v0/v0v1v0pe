<div class="container">

<table style="width: 100%;"><tr>
<td>achievementLevels</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Achievement Levels</h2>

<h3>Description</h3>

<p>Returns achievement levels using weights and variance estimates appropriate for the <code>edsurvey.data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">achievementLevels(
  achievementVars = NULL,
  aggregateBy = NULL,
  data,
  cutpoints = NULL,
  returnDiscrete = TRUE,
  returnCumulative = FALSE,
  weightVar = NULL,
  jrrIMax = 1,
  dropOmittedLevels = TRUE,
  defaultConditions = TRUE,
  recode = NULL,
  returnNumberOfPSU = FALSE,
  returnVarEstInputs = FALSE,
  omittedLevels = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>achievementVars</code></td>
<td>
<p>character vector indicating variables to be included in the achievement
levels table, potentially with a subject scale or subscale. When the subject
scale or subscale is omitted, the default subject scale or subscale is
used. You can find the default composite scale and all subscales using the
function <code>showPlausibleValues</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregateBy</code></td>
<td>
<p>character vector specifying variables by which to aggregate achievement levels. The percentage
column sums up to 100 for all levels of all variables specified here. When set to the
default of <code>NULL</code>, the percentage column sums up to 100 for all
levels of all variables specified in <code>achievementVars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an <code>edsurvey.data.frame</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutpoints</code></td>
<td>
<p>numeric vector indicating cutpoints. Set to standard NAEP cutpoints for
Basic, Proficient, and Advanced by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnDiscrete</code></td>
<td>
<p>logical indicating if discrete achievement levels should be returned. Defaults
to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnCumulative</code></td>
<td>
<p>logical indicating if cumulative achievement levels should be returned. Defaults
to <code>FALSE</code>. The first and last categories are the same as defined for discrete levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weightVar</code></td>
<td>
<p>character string indicating the weight variable to use.
Only the name of the
weight variable needs to be included here, and any
replicate weights will be automatically included.
When this argument is <code>NULL</code>, the function uses the default.
Use <code>showWeights</code> to find the default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jrrIMax</code></td>
<td>
<p>a numeric value. When using the jackknife variance estimation method, the default estimation option, <code>jrrIMax=1</code>, uses the
sampling variance from the first plausible value as the component for sampling variance estimation. The <code class="reqn">V_{jrr}</code>
term (see <a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf"><em>Statistical Methods Used in EdSurvey</em></a> for the definition of <code class="reqn">V_{jrr}</code>)
can be estimated with any number of plausible values, and values larger than the number of
plausible values on the survey (including <code>Inf</code>) will result in all plausible values being used.
Higher values of <code>jrrIMax</code> lead to longer computing times and more accurate variance estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropOmittedLevels</code></td>
<td>
<p>a logical value. When set to the default value (<code>TRUE</code>), it drops those levels in all factor variables
that are specified in <code>achievementVars</code> and <code>aggregateBy</code>.
Use <code>print</code> on an <code>edsurvey.data.frame</code> to see the omitted levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>defaultConditions</code></td>
<td>
<p>a logical value. When set to the default value of <code>TRUE</code>, uses the default
conditions stored in an <code>edsurvey.data.frame</code> to subset the data.
Use <code>print</code> on an <code>edsurvey.data.frame</code> to see the default
conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recode</code></td>
<td>
<p>a list of lists to recode variables. Defaults to <code>NULL</code>. Can be set as
<code>recode</code> <code>=</code> <code>list(var1=</code> <code>list(from=c("a",</code> <code>"b",</code> <code>"c"),</code> <code>to ="d"))</code>. See Examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnNumberOfPSU</code></td>
<td>
<p>a logical value set to <code>TRUE</code> to return the number of
primary sampling units (PSUs)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnVarEstInputs</code></td>
<td>
<p>a logical value set to <code>TRUE</code> to return the
inputs to the jackknife and imputation variance
estimates, which allows for the computation
of covariances between estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omittedLevels</code></td>
<td>
<p>this argument is deprecated. Use <code>dropOmittedLevels</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>achievementLevels</code> function applies appropriate weights
and the variance estimation method for each
<code>edsurvey.data.frame</code>, with several arguments for customizing
the aggregation and output of the analysis
results. Namely, by using these optional arguments, users can choose
to generate the percentage of students
performing at each achievement level (discrete), generate the
percentage of students performing at or above each achievement level
(cumulative),
calculate the percentage distribution of students by achievement
level (discrete or cumulative) and
selected characteristics (specified in <code>aggregateBy</code>), and
compute the percentage distribution of students
by selected characteristics within a specific achievement level.
</p>


<h4>Calculation of percentages</h4>

<p>The details of the methods are shown in the vignette titled
<a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf">Statistical Methods Used in EdSurvey</a> in
“Estimation of Weighted Percentages When Plausible Values Are Present” and are used to calculate
all cumulative and discrete probabilities.
</p>
<p>When the requested achievement levels are discrete (<code>returnDiscrete = TRUE</code>),
the percentage <code class="reqn">\mathcal{A}</code> is the percentage of students (within the categories specified in <code>aggregateBy</code>)
whose scores lie in the range  <code class="reqn">[cutPoints_i, cutPoints_{i+1}), i = 0,1,...,n</code>.
<code>cutPoints</code> is the score thresholds provided by the user with <code class="reqn">cutPoints_0</code> taken
to be 0. <code>cutPoints</code> are set to NAEP standard cutpoints for achievement levels by default.
To aggregate by a specific variable, for example, <code>dsex</code>, specify <code>dsex</code> in <code>aggregateBy</code>
and all other variables in <code>achievementVars</code>. To aggregate by subscale, specify
the name of the subscale (e.g., <code>num_oper</code>) in <code>aggregateBy</code> and all other variables in
<code>achievementVars</code>.
</p>
<p>When the requested achievement levels are cumulative (<code>returnCumulative = TRUE</code>),
the percentage <code class="reqn">\mathcal{A}</code> is the percentage of students (within the categories specified in <code>aggregateBy</code>)
whose scores lie in the range  [<code class="reqn">cutPoints_i</code>, <code class="reqn">\infty</code>), <code class="reqn">i = 1, 2, ..., n-1</code>. The
first and last categories are the same as defined for discrete levels.
</p>



<h4>Calculation of standard error of percentages</h4>

<p>The method used to calculate the standard error of the percentages is described in the vignette titled
<a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf">Statistical Methods Used in EdSurvey</a>
in the sections “Estimation of the Standard Error of Weighted Percentages When Plausible Values Are Present, Using the Jackknife Method”
and “Estimation of the Standard Error of Weighted Percentages When Plausible Values Are Not Present, Using the Taylor Series Method.”
For “Estimation of the Standard Error of Weighted Percentages When Plausible Values Are Present, Using the Jackknife Method,”
the value of <code>jrrIMax</code> sets the value of <code class="reqn">m^*</code>.
</p>



<h3>Value</h3>

<p>A <code>list</code> containing up to two data frames, one discrete achievement levels (when <code>returnDiscrete</code> is <code>TRUE</code>)
and one for cumulative achievement levels (when <code>returnCumulative</code> is <code>TRUE</code>). The <code>data.frame</code> contains the following columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Level</code></td>
<td>
<p>one row for each level of the specified achievement cutpoints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Variables in achievementVars</code></td>
<td>
<p>one column for each variable in <code>achievementVars</code>
and one row for each level of each variable in <code>achievementVars</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Percent</code></td>
<td>
<p>the percentage of students at or above each achievement level aggregated as specified by <code>aggregateBy</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>StandardError</code></td>
<td>
<p>the standard error of the percentage, accounting for the survey sampling methodology.
See the vignette titled <a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf">Statistical Methods Used in EdSurvey</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>the number of observations in the incoming data (the
number of rows when <code>omittedLevels</code> and
<code>defaultConditions</code> are set to <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wtdN</code></td>
<td>
<p>the weighted number of observations in the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nPSU</code></td>
<td>
<p>the number of PSUs at or above each achievement level aggregated as specified by <code>aggregateBy</code>. Only returned with <code>returnNumberOfPSU=TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Huade Huo, Ahmad Emad, and Trang Nguyen
</p>


<h3>References</h3>

<p>Rubin, D. B. (1987). <em>Multiple imputation for nonresponse in surveys</em>. New York, NY: Wiley.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# read in the example data (generated, not real student data)
sdf &lt;- readNAEP(path=system.file("extdata/data", "M36NT2PM.dat", package="NAEPprimer"))

# discrete achievement levels
achievementLevels(achievementVars=c("composite"), aggregateBy=NULL, data=sdf)

# discrete achievement levels with a different subscale
achievementLevels(achievementVars=c("num_oper"), aggregateBy=NULL, data=sdf)

# cumulative achievement levels
achievementLevels(achievementVars=c("composite"), aggregateBy=NULL, data=sdf, 
                  returnCumulative=TRUE) 

# cumulative achievement levels with a different subscale
achievementLevels(achievementVars=c("num_oper"), aggregateBy=NULL, data=sdf, 
                  returnCumulative=TRUE) 

# achievement levels as independent variables, by sex aggregated by composite
achievementLevels(achievementVars=c("composite", "dsex"), aggregateBy="composite",
                  data=sdf, returnCumulative=TRUE) 

# achievement levels as independent variables, by sex aggregated by sex
achievementLevels(achievementVars=c("composite", "dsex"), aggregateBy="dsex", 
                  data=sdf, returnCumulative=TRUE) 

# achievement levels as independent variables, by race aggregated by race
achievementLevels(achievementVars=c("composite", "sdracem"),
                  aggregateBy="sdracem", data=sdf, returnCumulative=TRUE) 

# use customized cutpoints
achievementLevels(achievementVars=c("composite"), aggregateBy=NULL, data=sdf, 
                  cutpoints = c("Customized Basic" = 200, 
                                "Customized Proficient" = 300, 
                                "Customized Advanced" = 400))

# use recode to change values for specified variables:
achievementLevels(achievementVars=c("composite", "dsex", "b017451"),
                  aggregateBy = "dsex", sdf,
                  recode=list(b017451=list(from=c("Never or hardly ever",
                                                  "Once every few weeks",
                                                  "About once a week"),
                                           to="Infrequently"),
                              b017451=list(from=c("2 or 3 times a week",
                                                  "Every day"),
                                           to="Frequently")))

## End(Not run)
</code></pre>


</div>