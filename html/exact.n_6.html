<div class="container">

<table style="width: 100%;"><tr>
<td>n1.get</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find smallest value of n1 that achieves target power</h2>

<h3>Description</h3>

<p>Function calculates minimum value of n1 that achieves power beta. If there
is no solution less than 500, it models observed powers as a function of n1
and then extrapolates. It returns an infinite value if the power is
unattainable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">n1.get(data, n0, beta, delta, alpha, type = 1, plt = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a matrix with column names beta, p0.vals, n0, n1 and 481^2 rows
(See details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0</code></td>
<td>
<p>scalar value of n0 between 20 and 500 inclusive</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>scalar target for power</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>value of clinically relevant difference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>value of nominal size of test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of minimum solution (See details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plt</code></td>
<td>
<p>if true produce diagnostic plots</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is called by n1.get.vector and will likely never be run by the
user.
</p>
<p>The data matrix will be a subset of one of the 85 main databases. Supplying
alpha and delta loads the appropriate database and selecting a value of p0
further subsets this data base. The resulting matrix will have 4 columns and
481^2 rows corresponding to all values of n0 and n1 from 20 to 500 inclusive
and is suitable for input into n1.get.
</p>
<p>If type=1, the smallest value N1 of n1 so that power &gt; beta is returned. If
type=2, the smallest value N1 of n1 so that power &gt; beta for all n1&gt;=N1 is
returned.
</p>


<h3>Value</h3>

<p>a single scalar value of n1. An integer indicates a solution was
found in the database. A non-integer indicates an extrapolated solution. An
Inf value indicates no extrapolated solution was found.
</p>


<h3>Author(s)</h3>

<p>Chris J. Lloyd
</p>


<h3>References</h3>

<p>C.J. Lloyd (2022) Exact samples sizes for clinical trials subject to
size and power constraints. Preprint. <a href="https://doi.org/10.13140/RG.2.2.11828.94085">doi:10.13140/RG.2.2.11828.94085</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Load toy version of power library for alpha=0.025, delta=0.20.
# Alternatively, load the full library using fetch.data(alpha=0.025,delta=0.20)
rdata_file = system.file('files', 'LIB.a025.d20.Rdata', package = 'exact.n')
load(rdata_file)
data=LIB.a025.d20[LIB.a025.d20[,2]==0.5,] # select subset with p0=.5
# For given value of n0, what minimum value of n1 ensures power at least 0.7?
n1.get(data, n0=70, beta=.7, delta=.2, alpha=0.025,
       type = 1, plt = TRUE) # Explicit solution 63 found in data base
n1.get(data, n0=50, beta=.7, delta=.2, alpha=0.025,
       type = 1, plt = TRUE) # Approximate solution 131 extrapolated from toy data base
# You can check the accuracy of this extrapolated result:
# POWER(n0=50,n1=131,alpha=0.025,delta=0.2,p0=0.5,type="elr")
# The minimum power at p0=0.5 is 0.699, slightly less than 0.7.
# With the full library n1.get returns the correct answer of n1=136.
n1.get(data, n0=30, beta=.7, delta=.2, alpha=0.025,
       type = 1, plt = TRUE) # Extrapolated solution is infinite


</code></pre>


</div>