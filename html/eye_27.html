<div class="container">

<table style="width: 100%;"><tr>
<td>eyes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Count patients and eyes</h2>

<h3>Description</h3>

<p>Counts number of subjects and right and left eyes. Columns are
guessed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">eyes(x, id_col = NULL, eye_col = NULL, dropunknown = TRUE, details = FALSE)

eyestr(x, ..., english = "small", caps = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>required. (data frame)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_col</code></td>
<td>
<p>Subject identifying column, passed as (quoted) character
Can also be abbreviated to "id" as per partial matching</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eye_col</code></td>
<td>
<p>Eye identifying column, passed as (quoted) character.
Can also be abbreviated to "eye" as per partial matching</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropunknown</code></td>
<td>
<p>introduces NA for values not recognized by recodeye</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>details</code></td>
<td>
<p>if TRUE, will add information about which and how many
subjects have only one eye or both included, and provide a list of
subject IDs for each</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed to eyes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>english</code></td>
<td>
<p>Which numbers to be written in plain english:
choose "small" for numbers till 12, "all" (all numbers),
or "none" (or any other string!) for none</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caps</code></td>
<td>
<p>if TRUE, first number will have capital first letter</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List (of class "eyes" with count of patients and eyes
if "details = TRUE", an list of class "eyes_details" will be returned
</p>
<p><code>eyestr</code>: Character string - can be directly pasted into reports
</p>


<h3>Column guessing</h3>

<p><strong>id_col</strong> and <strong>eye_col</strong> arguments overrule the name guessing for
the respective columns (here, cases need to match). Both arguments can be
abbreviated (<em>id</em> or <em>eye</em>) as per partial argument name matching.
</p>
<p>For any below, <strong>cases are always ignored</strong> (column names can be in upper or
lower case, as you please)
</p>
<p><strong>patient ID columns</strong>:
</p>

<ul>
<li>
<p> First, <code>eyes</code> is looking for names that contain both strings
"pat" and "id" (the order doesn't matter) -
you can change this with set_eye_strings
</p>
</li>
<li>
<p> Next, it will look for columns that are plainly called "ID"
</p>
</li>
<li>
<p> Last, it will search for all names that contain either "pat"
or "id"
</p>
</li>
</ul>
<p><strong>eye column</strong>:
</p>

<ul><li> <p><code>eyes</code> primarily looks for columns called either "eye" or "eyes",
(you can change this with set_eye_strings)
and if they are not present, columns containing string "eye"
(e.g., EyeName will be recognized)
</p>
</li></ul>
<h3>Eye coding</h3>

<p>The following codes are recognized: (change this with set_eye_strings)
</p>

<ul>
<li>
<p> integer coding 0:1 and 1:2, right eye being the lower number.
</p>
</li>
<li>
<p> right eyes: c("r", "re", "od", "right") and
</p>
</li>
<li>
<p> left eyes: c("l", "le", "os", "left") and
</p>
</li>
<li>
<p> both eyes: c("b", "both", "ou")
</p>
</li>
</ul>
<p>If your eye column contains other values, they will be dropped to
NA (dropunknown) or kept (and then only patients will be counted, because
coding remains unclear). Recommend then to recode with recodeye
</p>


<h3>eyestr</h3>

<p>eyestr creates a string which can be pasted into reports.
It currently only supports "x eyes of n patient(s)" This is a limitation,
but I guess in the vast majority  of cases will be "correct".
To use for other categories (e.g., "people" or "participants"), use
<code>eyes(...)[1]</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(eyedata)
eyes(amd2)

## If you code your eyes with different strings,
## e.g., because you are using a different language,
## you can change this either with `set_eye_strings`
set_eye_strings(right = c("droit", "od"), left = c("gauche", "og"))

## restore defaults with
set_eye_strings()
# Examples for the usage of eyestr
eyestr(amd2)

set.seed(1)
ls_dat &lt;-
  lapply(c(1, 12, 13),
    function(x) data.frame(id = as.character(1:x),
                           eye = sample(c("r", "l"), x, replace = TRUE)))

lapply(ls_dat, eyestr, english = "small")
lapply(ls_dat, eyestr, english = "all")
lapply(ls_dat, eyestr, english = "all", caps = TRUE)
lapply(ls_dat, eyestr, english = "none")
lapply(ls_dat, eyestr, english = "none")
</code></pre>


</div>