<div class="container">

<table style="width: 100%;"><tr>
<td>treat_outliers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Treats Outliers in Numerical Data</h2>

<h3>Description</h3>

<p>Treats numerical outliers either by winsorizing or by truncating.
</p>


<h3>Usage</h3>

<pre><code class="language-R">treat_outliers(x, percentile = 0.01, truncate = FALSE, by = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Data that is coercible into a numeric vector or matrix.
If it is a data frame then all numerical variables
of the data frame are coerced into a matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentile</code></td>
<td>
<p>A numeric scalar.
The percentile below which observations
are considered to be outliers. Is treated symmetrical so that
<code>c(percentile, 1-percentile)</code> are used as boundaries.
Defaults to 0.01 and needs to be &gt; 0 and &lt; 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncate</code></td>
<td>
<p>A logical scalar. If TRUE then data are truncated
(i.e., set to NA if out of bounds). Defaults to FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>NULL or either a factor vector or a character string
identifying a factor variable in the data frame provided by x.
The factor indicated by 'by' is being used to identify groups
by which the outlier treatment is applied. Defaults to NULL (no grouping).
If provided, the resulting vector must not contain NAs and needs to be such so that
<code>length(byvec) == nrows(as.matrix(x))</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters forwarded to quantile (notably, <code>type</code>)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>All members of the numerical matrix are checked for finiteness and are
set to NA if they are not finite. NAs are removed when calculating the outlier cut-offs.
</p>


<h3>Value</h3>

<p>A numeric vector or matrix containing the outlier-treated <code>x</code>.
if a data frame was provided in <code>x</code>, a data frame with its numeric variables
replaced by their outlier-treated values.
</p>


<h3>Examples</h3>

<pre><code class="language-R">treat_outliers(seq(1:100), 0.05)
treat_outliers(seq(1:100), truncate = TRUE, 0.05)

# When you like the percentiles calculated like STATA's summary or pctile:
treat_outliers(seq(1:100), 0.05, type = 2)

df &lt;- data.frame(a = seq(1:1000), b = rnorm(1000), c = sample(LETTERS[1:5], 1000, replace=TRUE))
winsorized_df &lt;- treat_outliers(df)
summary(df)
summary(winsorized_df)

winsorized_df &lt;- treat_outliers(df, 0.05, by="c")
by(df, df$c, summary)
by(winsorized_df, df$c, summary)

hist(treat_outliers(rnorm(1000)), breaks=100)
</code></pre>


</div>