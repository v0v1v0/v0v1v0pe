<div class="container">

<table style="width: 100%;"><tr>
<td>make_time_cluster_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make data for cluster analysis.</h2>

<h3>Description</h3>

<p>Takes data that has been summarized into time-bins by <code>make_time_sequence_data()</code>, finds adjacent time
bins that pass some test-statistic threshold, and assigns these adjacent bins into groups (clusters).
Output is ready for a cluster permutation-based analyses (Maris &amp; Oostenveld, 2007). Supports <code>t.test</code>,
<code>wilcox.test</code>, <code>(g)lm</code>, and <code>(g)lmer</code>. Also includes support for
the "bootstrapped-splines" test (see <code>?make_boot_splines_data</code> and
<a href="http://www.eyetracking-r.com/vignettes/divergence">the divergence vignette</a> for more info).
By default, this function uses 'proportion-looking' (<code>Prop</code>) as the DV, which can be changed
by manually specifying the formula.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_time_cluster_data(data, ...)

## S3 method for class 'time_sequence_data'
make_time_cluster_data(
  data,
  predictor_column,
  aoi = NULL,
  test,
  threshold = NULL,
  formula = NULL,
  treatment_level = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The output of the <code>make_time_sequence_data</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Any other arguments to be passed to the selected 'test' function (e.g., paired,
var.equal, etc.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predictor_column</code></td>
<td>
<p>The column name containing the variable whose test statistic you are interested in.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aoi</code></td>
<td>
<p>Which AOI should be analyzed? If not specified (and dataframe has multiple AOIs),
then AOI should be a predictor/covariate in your model (so 'formula' needs
to be specified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>What type of test should be performed in each time bin? Supports
<code>t.test</code>, <code>(g)lm</code>, or <code>(g)lmer</code>. Also includes experimental support for
the "bootstrapped-splines" test (see <code>?make_boot_splines_data</code> and
<a href="http://www.eyetracking-r.com/vignettes/divergence">the divergence vignette</a>
for more info). Does not support <code>wilcox.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Time-bins with test-statistics greater than this amount will be grouped into clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>What formula should be used for test? Optional (for all but <code>(g)lmer</code>), if unset
uses <code>Prop ~ [predictor_column]</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_level</code></td>
<td>
<p>If your predictor is a factor, regression functions like 'lm' and 'lmer' by default will
treatment-code it. One option is to sum-code this predictor yourself before entering it
into this function. Another is to use the 'treatment_level' argument, which specifies the
level of the predictor. For example, you are testing a model where 'Target' is a predictor,
which has two levels, 'Animate' and 'Inanimate'. R will code 'Animate' as the reference
level, and code 'Inanimate' as the treatment level. You'd therefore want to set
'treatment_level = Inanimate'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The original data, augmented with information about clusters. Calling summary on this data will
describe these clusters. The dataset is ready for the <code>analyze_time_clusters</code> method.
</p>


<h3>Methods (by class)</h3>


<ul><li> <p><code>make_time_cluster_data(time_sequence_data)</code>: Make data for time cluster analysis
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(word_recognition)
data &lt;- make_eyetrackingr_data(word_recognition,
                               participant_column = "ParticipantName",
                               trial_column = "Trial",
                               time_column = "TimeFromTrialOnset",
                               trackloss_column = "TrackLoss",
                               aoi_columns = c('Animate','Inanimate'),
                               treat_non_aoi_looks_as_missing = TRUE )
response_window &lt;- subset_by_window(data, window_start_time = 15500, window_end_time = 21000,
                                    rezero = FALSE)

# identify clusters in the sequence data using a t-test with
# threshold t-value of 2

# (note: t-tests require a summarized dataset)
response_time &lt;- make_time_sequence_data(response_window, time_bin_size = 500, aois = "Animate",
                                         predictor_columns = "Sex",
                                         summarize_by = "ParticipantName")

time_cluster_data &lt;- make_time_cluster_data(data = response_time,
                                            predictor_column = "Sex",
                                            aoi = "Animate",
                                            test = "t.test",
                                            threshold = 2
)

# identify clusters in the sequence data using an lmer() random-effects
# model with a threshold t-value of 1.5.

# random-effects models don't require us to summarize
response_time &lt;- make_time_sequence_data(response_window, time_bin_size = 500, aois = "Animate",
                                         predictor_columns = "Sex")

# but they do require a formula to be specified
time_cluster_data &lt;- make_time_cluster_data(data = response_time,
                           predictor_column = "SexM",
                           aoi = "Animate",
                           test = "lmer",
                           threshold = 1.5,
                           formula = LogitAdjusted ~ Sex + (1|Trial) + (1|ParticipantName)
)

## End(Not run)

</code></pre>


</div>