<div class="container">

<table style="width: 100%;"><tr>
<td>diagnose_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diagnose EcoDiet model</h2>

<h3>Description</h3>

<p>This function operates a diagnostic of the fit EcoDiet model.
</p>
<p>A message is printed to provide the number of variables for which the Gelman-Rubin diagnostic exceeds
specific thresholds (&gt; 1.01, &gt; 1.05, &gt;1.1). The list of the 10 worst variables in terms of convergence
is also printed.
</p>
<p>You need to have run the <code>run_model</code> function before using this function.
</p>
<p>The design of this function is substantially inspired from a function with a similar objective
in the MixSIAR package [(Stock et al. 2018)](https://doi.org/10.7717/peerj.5096), for which code is available online on
the [MixSIAR GitHub repository](https://github.com/brianstock/MixSIAR).
The diagnostic plots are generated using the <code>ggmcmc</code> package [(Fernández-i-Marín, 2016)](https://CRAN.R-project.org/package=ggmcmc).
</p>


<h3>Usage</h3>

<pre><code class="language-R">diagnose_model(jags_output, var.to.diag = "all", save = FALSE, save_path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>jags_output</code></td>
<td>
<p>The MCMC output summarized in the class jagsUI object
output by <code>run_model</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var.to.diag</code></td>
<td>
<p>The list of variables for which diagnostic plots should be produced and save. By default, this
argument is "all" hence is run for all the variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save</code></td>
<td>
<p>Indicates whether diagnostic plots should be produced and saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_path</code></td>
<td>
<p>The path indicating where to save the diagnostic plots.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A matrix containing the Gelman diagnostic for all the variables monitored by the <code>run_model</code> function (<code>variables_to_save argument</code>).
</p>


<h3>See Also</h3>

<p><code>run_model</code> to run the model
</p>


<h3>Examples</h3>

<pre><code class="language-R">

realistic_biotracer_data &lt;- read.csv(system.file("extdata", "realistic_biotracer_data.csv",
                                               package = "EcoDiet"))
realistic_stomach_data &lt;- read.csv(system.file("extdata", "realistic_stomach_data.csv",
                                             package = "EcoDiet"))

data &lt;- preprocess_data(biotracer_data = realistic_biotracer_data,
                        trophic_discrimination_factor = c(0.8, 3.4),
                        literature_configuration = FALSE,
                        stomach_data = realistic_stomach_data)
                        
write_model(literature_configuration = FALSE)

mcmc_output &lt;- run_model("EcoDiet_model.txt", data, run_param="test")

Gelman_test &lt;- diagnose_model(mcmc_output)
Gelman_test



</code></pre>


</div>