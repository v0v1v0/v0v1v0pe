<div class="container">

<table style="width: 100%;"><tr>
<td>search_data_packages</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search data packages</h2>

<h3>Description</h3>

<p>Searches data packages in the EDI data repository using the
specified Solr query.
</p>


<h3>Usage</h3>

<pre><code class="language-R">search_data_packages(query, as = "data.frame", env = "production")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>(character) Query (see details below)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as</code></td>
<td>
<p>(character) Format of the returned object. Can be: "data.frame" 
or "xml".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>(character) Repository environment. Can be: "production",
"staging", or "development".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Documents in the EDI data repository Solr index can be discovered
based on metadata values stored in the following list of searchable fields
(not all EML content is queryable):
</p>
<p>Single-value fields:
</p>

<ul>
<li>
<p> abstract
</p>
</li>
<li>
<p> begindate - In ISO format (YYYY-MM-DDThh:mm:ss)
</p>
</li>
<li>
<p> doi
</p>
</li>
<li>
<p> enddate - In ISO format (YYYY-MM-DDThh:mm:ss)
</p>
</li>
<li>
<p> funding
</p>
</li>
<li>
<p> geographicdescription
</p>
</li>
<li>
<p> id
</p>
</li>
<li>
<p> methods
</p>
</li>
<li>
<p> packageid - Data Id in "scope.identifier.revision" format 
</p>
</li>
<li>
<p> pubdate - In ISO format (YYYY-MM-DDThh:mm:ss)
</p>
</li>
<li>
<p> responsibleParties
</p>
</li>
<li>
<p> scope
</p>
</li>
<li>
<p> singledate
</p>
</li>
<li>
<p> site
</p>
</li>
<li>
<p> taxonomic
</p>
</li>
<li>
<p> title
</p>
</li>
</ul>
<p>Multi-value fields:
</p>

<ul>
<li>
<p> author
</p>
</li>
<li>
<p> coordinates - Use <code>"IsWithin(West+East+North+South)"</code> where each 
cardinal direction is in decimal degrees with South of the equator as
negative and East of the prime meridian positive.
</p>
</li>
<li>
<p> keyword
</p>
</li>
<li>
<p> organization
</p>
</li>
<li>
<p> projectTitle
</p>
</li>
<li>
<p> relatedProjectTitle
</p>
</li>
<li>
<p> timescale
</p>
</li>
</ul>
<p><code>query</code> parser: The optimal query parser (defType=edismax) is added to
every query.
</p>
<p>See <a href="https://cwiki.apache.org/confluence/display/solr/">Apache Solr Wiki</a> for how to construct a Solr query.
</p>


<h3>Value</h3>

<p>(data.frame or xml_document) Search results containing the fields:
</p>

<ul>
<li>
<p> abstract
</p>
</li>
<li>
<p> begindate
</p>
</li>
<li>
<p> doi
</p>
</li>
<li>
<p> enddate
</p>
</li>
<li>
<p> funding
</p>
</li>
<li>
<p> geographicdescription
</p>
</li>
<li>
<p> id
</p>
</li>
<li>
<p> methods
</p>
</li>
<li>
<p> packageid
</p>
</li>
<li>
<p> pubdate
</p>
</li>
<li>
<p> responsibleParties
</p>
</li>
<li>
<p> scope
</p>
</li>
<li>
<p> site
</p>
</li>
<li>
<p> taxonomic
</p>
</li>
<li>
<p> title
</p>
</li>
<li>
<p> authors
</p>
</li>
<li>
<p> spatialCoverage
</p>
</li>
<li>
<p> sources
</p>
</li>
<li>
<p> keywords
</p>
</li>
<li>
<p> organizations
</p>
</li>
<li>
<p> singledates
</p>
</li>
<li>
<p> timescales
</p>
</li>
</ul>
<h3>Note</h3>

<p>Only the newest version of data packages are searchable, older
versions are not.
</p>
<p>When constructing a query note that the 15403 data packages of the
<a href="https://lternet.edu/the-ecotrends-project/">ecotrends</a> project and
10492 data packages of the
<a href="https://lternet.edu/lter-remote-sensing-and-geographic-information-system-data/">LTER Landsat</a>
project, can be excluded from the returned results by including
<code>&amp;fq=-scope:(ecotrends+lter-landsat)</code> in the query string.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Search for data packages containing the term "air temperature"
res &lt;- search_data_packages(query = 'q="air+temperature"&amp;fl=*')

# Search for data packages containing the term "air temperature" and
# returning only the packageid, title, and score of each match
res &lt;- search_data_packages(query = 'q="air+temperature"&amp;fl=packageid,title,score')

# Search for data packages containing the term "air temperature", returning
# only the packageid, title, score, and excluding ecotrends and lter-landsat
# scopes from the returned results
query &lt;- paste0('q="air+temperature"&amp;fl=packageid,title,score&amp;',
                'fq=-scope:(ecotrends+lter-landsat)')
res &lt;- search_data_packages(query)

## End(Not run)
</code></pre>


</div>