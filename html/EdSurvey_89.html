<div class="container">

<table style="width: 100%;"><tr>
<td>readPISA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Connect to PISA Data</h2>

<h3>Description</h3>

<p>Opens a connection to a PISA data file and
returns an <code>edsurvey.data.frame</code> with
information about the file and data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">readPISA(
  path,
  database = c("INT", "CBA", "FIN"),
  countries,
  cognitive = c("score", "response", "none"),
  forceReread = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>a character vector to the full directory path(s) to the
PISA-extracted fixed-width files and SPSS control files (.txt).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>database</code></td>
<td>
<p>a character to indicate a selected database. Must be one of
<code>INT</code> (general database that most people use),
<code>CBA</code> (computer-based database in PISA 2012 only),
or <code>FIN</code> (financial literacy database in PISA 2012 and 2018).
Defaults to <code>INT</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>countries</code></td>
<td>
<p>a character vector of the country/countries to include using the
three-digit ISO country code. A list of country codes can be found
in the PISA codebook or <a href="https://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">https://en.wikipedia.org/wiki/ISO_3166-1#Current_codes</a>.
If files are downloaded using <code>downloadPISA</code>,
a country dictionary text file can be
found in the filepath.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cognitive</code></td>
<td>
<p>one of <code>none</code>, <code>score</code>, or <code>response</code>. Default
is <code>score</code>. The PISA database often has three student
files: student questionnaire, cognitive item
response, and scored cognitive item response. The first
file is used as the main student file with student
background information. Users can choose whether to
merge <code>score</code> or
<code>response</code> data into the main file or not (if <code>none</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceReread</code></td>
<td>
<p>a logical value to force rereading of all processed data.
Defaults to <code>FALSE</code>. Setting <code>forceReread</code>
to be <code>TRUE</code> will cause PISA data to be reread and
increase processing time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical value that will determine if you want verbose
output while the function is running to indicate progress.
Defaults to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Reads in the unzipped files downloaded from the PISA database using the
OECD Repository (<a href="https://www.oecd.org/pisa/">https://www.oecd.org/pisa/</a>). Users can use
<code>downloadPISA</code> to download all required files.
Student questionnaire files (with weights and plausible values) are used as
main files, which are then
merged with cognitive, school, and parent files (if available).
</p>
<p>The average first-time processing time for 1 year and one database for all
countries is 10–15 minutes. If <code>forceReread</code> is set
to be <code>FALSE</code>, the next time this function is called will take only
5–10 seconds.
</p>
<p>For the PISA 2000 study, please note that the study weights are subject
specific. Each weight has different adjustment factors for reading, mathematics, and science
based on it's original subject source file.  For example, the <code>w_fstuwt_read</code> weight is associated with the reading
subject data file.  Special care must be used to select the correct weight based on your specific analysis.  See the OECD
documentation for further details.  Use the <code>showWeights</code> function to see all three student level subject weights:
</p>

<ul>
<li> <p><strong>w_fstuwt_read</strong> = Reading (default)
</p>
</li>
<li> <p><strong>w_fstuwt_scie</strong> = Science
</p>
</li>
<li> <p><strong>w_fstuwt_math</strong> = Mathematics
</p>
</li>
</ul>
<h3>Value</h3>

<p>an <code>edsurvey.data.frame</code> for a single specified country or
an <code>edsurvey.data.frame.list</code> if multiple countries are specified
</p>


<h3>Author(s)</h3>

<p>Tom Fink, Trang Nguyen, and Paul Bailey
</p>


<h3>References</h3>

<p>Organisation for Economic Co-operation and Development. (2017). <em>PISA 2015 technical report</em>. Paris, France: OECD Publishing. Retrieved from <em><a href="https://www.oecd.org/pisa/data/2015-technical-report/">https://www.oecd.org/pisa/data/2015-technical-report/</a></em>
</p>


<h3>See Also</h3>

<p><code>getData</code> and <code>downloadPISA</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# the following call returns an edsurvey.data.frame to 
# PISA 2012 International Database for Singapore
sgp2012 &lt;- readPISA(path = "~/PISA/2012", database = "INT", countries = "sgp")

# extract a data.frame with a few variables
gg &lt;- getData(sgp2012, c("cnt","read","w_fstuwt"))  
head(gg)

# conduct an analysis on the edsurvey.data.frame
edsurveyTable(formula=read ~ st04q01 + st20q01, data = sgp2012)

## End(Not run)
</code></pre>


</div>