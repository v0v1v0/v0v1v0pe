<div class="container">

<table style="width: 100%;"><tr>
<td>preprocess_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check and preprocess the data</h2>

<h3>Description</h3>

<p>This function preprocesses the data input by the user, checks that the different inputs 
have the right format, and creates the data list that will feed the JAGS model.
</p>
<p>If an error appears with a clear message, it means that the input needs to be reformatted. Please 
follow the instructions in the error message. You can also look at the data examples to guide you.
</p>


<h3>Usage</h3>

<pre><code class="language-R">preprocess_data(
  biotracer_data,
  trophic_discrimination_factor,
  literature_configuration = FALSE,
  topology = NULL,
  element_concentration = 1,
  stomach_data = NULL,
  rescale_stomach = FALSE,
  literature_diets = NULL,
  nb_literature,
  literature_slope
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>biotracer_data</code></td>
<td>
<p>A dataframe containing the biotracer data in the specific format: the first column
corresponds to the trophic group or latin species and the remaining columns contains the biotracer
measures</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trophic_discrimination_factor</code></td>
<td>
<p>A vector containing the trophic discrimination factors 
corresponding to each column found in the biotracer data (except the group column of course)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>literature_configuration</code></td>
<td>
<p>A boolean (TRUE or FALSE) indicating whether the model will have
prior distributions informed by a literature study</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>topology</code></td>
<td>
<p>A matrix that the user may input if she wants the model to investigate some 
additionnal trophic links (by-default it is set on NULL and defined later from the stomach content 
data and the literature diets if present)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>element_concentration</code></td>
<td>
<p>A matrix containing the element concentration for each trophic group and
each biotracer element (listed in the biotracer data). It is a matrix with as many columns
as the number of trophic groups and as many rows as the number of elements. By default the matrix
is filled with ones.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stomach_data</code></td>
<td>
<p>A dataframe containing the stomach content data in a specific format: the first row
contains the names of the prey trophic groups, the headers contains the names of the consumer / 
predator trophic groups, and the rest are the number of the predator's stomachs in which this prey
was found. The last row contains the total number of non-empty stomach for the corresponding
predator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rescale_stomach</code></td>
<td>
<p>A boolean (TRUE or FALSE) indicating whether the stomach content data will be rescaled.
If TRUE, the stomach occurences are upscaled by dividing them by the maximum occurrences / the number
of non-empty stomach.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>literature_diets</code></td>
<td>
<p>A dataframe containing the diet proportions found in the literature
in a format similar to the stomach content data: the first row contains the names of the prey 
trophic groups, the headers contains the names of the consumer / predator trophic groups, 
and the rest are the average proportions of this prey in the predator's diet according to a 
literature study. The last row contains the pedigree score associated to the literature findings 
for each predators, a number between 0 and 1 indicating how much the literature findings are relevant
estimates for the input data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb_literature</code></td>
<td>
<p>A vector of one number containing the equivalent number of stomach 
for the literature priors on the eta variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>literature_slope</code></td>
<td>
<p>A vector of one number containing the slope of the linear relationship 
between the pedigree scores and the PIs' coefficients of variation (CVs)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of preprocessed data, ready to be fed to the EcoDiet model through the
'rjags' package. This list contains a different number of elements, depending on
which configuration is chosen by the user (literature_configuration = TRUE or FALSE).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
example_biotracer_data &lt;- read.csv(system.file("extdata", "example_biotracer_data.csv",
                                               package = "EcoDiet"))
example_stomach_data &lt;- read.csv(system.file("extdata", "example_stomach_data.csv",
                                             package = "EcoDiet"))

data &lt;- preprocess_data(biotracer_data = example_biotracer_data,
                        trophic_discrimination_factor = c(0.8, 3.4),
                        literature_configuration = FALSE,
                        stomach_data = example_stomach_data)
                        
example_literature_diets &lt;- read.csv(system.file("extdata", "example_literature_diets.csv",
                                                 package = "EcoDiet"))
                        
data2 &lt;- preprocess_data(biotracer_data = example_biotracer_data,
                         trophic_discrimination_factor = c(0.8, 3.4),
                         literature_configuration = TRUE,
                         stomach_data = example_stomach_data,
                         literature_diets = example_literature_diets,
                         nb_literature = 10,
                         literature_slope = 0.5)

</code></pre>


</div>