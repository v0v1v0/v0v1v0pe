<div class="container">

<table style="width: 100%;"><tr>
<td>catalog</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an Earthquake Catalog</h2>

<h3>Description</h3>

<p>Creates an object of class <code>"catalog"</code> representing
an earthquake catalog dataset. An  earthquake catalog is a
chronologically ordered list of time, epicenter and magnitude
of all recorded earthquakes  in geographical region during
a specific time period.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  catalog(data, time.begin=NULL, study.start=NULL,
          study.end=NULL, study.length=NULL,
          lat.range=NULL, long.range=NULL,
          region.poly=NULL, mag.threshold=NULL,
          flatmap=TRUE, dist.unit = "degree", 
          roundoff=TRUE, tz="GMT")
  
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> containing date, time,
latitude, longitude and magnitude of earthquakes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.begin</code></td>
<td>
<p>The beginning of time span of the catalog.
A character string or an object that can be converted to
date-time (calendar dates plus time to the nearest second) by
<code>as.POSIXlt</code>. The default <code>NULL</code> sets it
to the date-time of the first event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study.start</code></td>
<td>
<p>The start of the study period.
A character string or an object that can be converted to
date-time by <code>as.POSIXlt</code>. If not specified (<code>NULL</code>),
then <code>time.begin</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study.end</code></td>
<td>
<p>The end of the study period.
A character string or an object that can be converted to
date-time by <code>as.POSIXlt</code>. The default <code>NULL</code> sets it
to the date-time of the last event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study.length</code></td>
<td>
<p>A single numeric value specifying the length
of the study period in decimal days. Incompatible with
<code>study.end</code>: either <code>study.end</code> or <code>study.length</code>
can be specified, but not both.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat.range</code></td>
<td>
<p>The latitude range of a rectangular study region.
A numeric vector of size 2 giving (latmin, latmax). By default
(<code>NULL</code>) the range of the latitudes of events is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>long.range</code></td>
<td>
<p>The longitude range of a rectangular study region.
A numeric vector of size 2 giving (longmin, longmax). By default
(<code>NULL</code>) the range of the longitudes of events is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region.poly</code></td>
<td>
<p>Polygonal boundary of a non-rectangular
study region. A list with components <b>lat</b> and <b>long</b>
of equal length specifying the coordinates of the vertices of
a polygonal study region. The vertices must be listed in
<b>anticlockwise</b> order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mag.threshold</code></td>
<td>
<p>The magnitude threshold of the catalog.
A positive numeric value. The default (<code>NULL</code>) sets it to
the minimum magnitude of all events.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flatmap</code></td>
<td>
<p>Logical flag indicating whether to transform
the spherical coordinates <code class="reqn">(long, lat)</code> on the earth
surface to flat map (planar) coordinates <code class="reqn">(x, y)</code>
in order to approximate the
great-circle distance on the sphere by the corresponding Euclidean
distance on the flat map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist.unit</code></td>
<td>
<p>A character string specifying the unit of geographical
coordinates and spatial distances between events. Options
are <code>"degree"</code> (the default case) and <code>"km"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roundoff</code></td>
<td>
<p>Logical flag indicating whether to account for round-off 
error in coordinates of epicenters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>A character string specifying the time zone to be used
for the date-time conversion in <code>as.POSIXlt</code>.
The default <code>"GMT"</code> is the UTC (Universal Time, Coordinated).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>data</code> is required to have at least 5 columns with names
<code>date</code>, <code>time</code>, <code>lat</code>, <code>long</code> and <code>mag</code>
containing, respectively, the date, time, latitude, longitude
and magnitude of each event in the catalog.
</p>
<p>The geographical study region can be rectangular or polygonal:
</p>

<ul>
<li>
<p><b>rectangular study region</b> can be specified by <code>lat.range</code>
and <code>long.range</code> which must be numeric vectors of length 2.
</p>
</li>
<li>
<p><b>polygonal study region</b> can be specified by <code>region.poly</code>
which contains coordinates of the vertices of the polygon. It must
be either a <code>list</code> with components <b>lat</b> and <b>long</b>
of equal length or a <code>data.frame</code> with columns <b>lat</b>
and <b>long</b>. The vertices must be listed in
<em>anticlockwise</em> order and no vertex should be repeated
(i.e. do not repeat the first vertex).
</p>
</li>
</ul>
<p>The function <code>inside.owin</code> in the <code>spatstat</code>
is used to indicate whether events lie inside the study region.
Only events inside the study region and the study period
(<code>study.start</code>, <code>study.end</code>) are considered as
<em>target</em> events. Other events are assumed to be
<em>complementary</em> events.
</p>
<p>If the events in <code>data</code> are not chronologically sorted,
then a warning will be produced and the events will be sorted
in ascending order with respect to time of occurrence.
</p>
<p>If <code>flatmap=TRUE</code>, longitude-latitude coordinates convert to
flat map coordinates:
</p>

<ul>
<li>
<p> if <code>dist.unit="degree"</code>, then the
Equirectangular projection
</p>
<p style="text-align: center;"><code class="reqn">x = \cos(cnt.lat/180 \pi) (long - cnt.long)</code>
</p>

<p>and <code class="reqn">y = lat - cnt.lat</code>
is used to obtain the flat map coordinates <code class="reqn">(x, y)</code> in
degrees, where <code class="reqn">cnt.lat</code> and <code class="reqn">cnt.long</code> are,
respectively, the latitude and longitude of the centroid of the
geographical region.
</p>
</li>
<li>
<p> if <code>dist.unit="km"</code>, then the projection
</p>
<p style="text-align: center;"><code class="reqn">x = 111.32 \cos(lat/180 \pi) long</code>
</p>

<p>and <code class="reqn">y = 110.547 lat</code>
is used where  <code class="reqn">x</code> and <code class="reqn">y</code> are in (approximate) kilometers.
</p>
</li>
</ul>
<h3>Value</h3>

<p>An object of class <code>"catalog"</code> containing an earthquake
catalog dataset.
</p>


<h3>Author(s)</h3>

<p>Abdollah Jalilian
<a href="mailto:jalilian@razi.ac.ir">jalilian@razi.ac.ir</a>
</p>


<h3>References</h3>

<p>Zhuang J (2012).
Long-term Earthquake Forecasts Based on the Epidemic-type Aftershock
Sequence (ETAS) Model for Short-term Clustering.
<em>Research in Geophysics</em>, <b>2</b>(1), 52â€“57.
<a href="https://doi.org/10.4081/rg.2012.e8">doi:10.4081/rg.2012.e8</a>.
</p>


<h3>See Also</h3>

<p><code>etas</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  summary(iran.quakes)

  # creating a catalog with rectangular study region
  iran.cat &lt;- catalog(iran.quakes, time.begin="1973/01/01",
     study.start="1985/01/01", study.end="2016/01/01",
     lat.range=c(25, 42), long.range=c(42, 63),
     mag.threshold=4.5)

  print(iran.cat)
  ## Not run: 
  plot(iran.cat)
  
## End(Not run)

  # equivalently, specifying the length of the study period
  iran.cat2 &lt;- catalog(iran.quakes, time.begin="1973/01/01",
     study.start="1985/01/01", study.length=11322,
     lat.range=c(25, 42), long.range=c(42, 63),
     mag.threshold=4.5)

  print(iran.cat2)


  # specifying a polygonal geographical region
  jpoly &lt;- list(long=c(134.0, 137.9, 143.1, 144.9, 147.8,
      137.8, 137.4, 135.1, 130.6), lat=c(31.9, 33.0, 33.2,
      35.2, 41.3, 44.2, 40.2, 38.0, 35.4))
  # creating a catalog with polygonal study region
  japan.cat &lt;- catalog(japan.quakes, time.begin="1966-01-01",
      study.start="1970-01-01", study.end="2010-01-01",
      region.poly=jpoly, mag.threshold=4.5)

  print(japan.cat)
  ## Not run: 
  plot(japan.cat)
  
## End(Not run)
</code></pre>


</div>