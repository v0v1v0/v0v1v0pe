<div class="container">

<table style="width: 100%;"><tr>
<td>mml.sdf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>EdSurvey Direct Estimation</h2>

<h3>Description</h3>

<p>Prepare IRT parameters and score items and then estimate a linear model with direct estimation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mml.sdf(
  formula,
  data,
  weightVar = NULL,
  dropOmittedLevels = TRUE,
  composite = TRUE,
  verbose = 0,
  multiCore = FALSE,
  numberOfCores = NULL,
  minNode = -4,
  maxNode = 4,
  Q = 34,
  idVar = NULL,
  returnMmlCall = FALSE,
  omittedLevels = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a <code>formula</code> for the
model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an <code>edsurvey.data.frame</code> for the National Assessment of Educational Progress (NAEP)
and the Trends in International Mathematics and Science Study (TIMSS).
The attributes <code>dichotParamTab</code>, <code>polyParamTab</code>, <code>testData</code>,
<code>scoreCard</code> (for NAEP), and <code>scoreDict</code> (for TIMSS) must not be <code>NULL</code>.
Use the function <code>setNAEPScoreCard</code> or <code>setAttributes</code> to set attributes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weightVar</code></td>
<td>
<p>a character indicating the weight variable to use.
The <code>weightVar</code> must be one of the weights for the
<code>edsurvey.data.frame</code>. If <code>NULL</code>, it  uses the default
for the <code>edsurvey.data.frame</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropOmittedLevels</code></td>
<td>
<p>a logical value. When set to the value of <code>TRUE</code>, drops
the levels of all factor variables that are specified
in an <code>edsurvey.data.frame</code>. Use <code>print</code> on an
<code>edsurvey.data.frame</code> to see the omitted levels.
To draw plausible values for the full dataset, the user must set this to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>composite</code></td>
<td>
<p>logical; for a NAEP composite, setting to <code>FALSE</code> fits the model to all items at once,
in a single construct, whereas setting to <code>TRUE</code> fits the model as a NAEP composite
(i.e., a weighted average of the subscales). This argument is not applicable for TIMSS which is always
fit as an overall (non-composite).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical; indicates whether a detailed printout should display during execution, only for NAEP data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multiCore</code></td>
<td>
<p>allows the <code>foreach</code> package to be used. This function will setup and take down the cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numberOfCores</code></td>
<td>
<p>the number of cores to be used when using <code>multiCore</code>. Defaults to 75% of available cores. Users
can check available cores with <code>detectCores()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minNode</code></td>
<td>
<p>numeric; minimum integration point in direct estimation; see <code>mml</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxNode</code></td>
<td>
<p>numeric; maximum integration point in direct estimation; see <code>mml</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>integer; number of integration points per student used when integrating over the levels of the latent outcome construct.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idVar</code></td>
<td>
<p>a variable that is used to explicitly define the name of the student identifier
variable to be used from <code>data</code>. Defaults to <code>NULL</code>, and <code>sid</code> is used
as the student identifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnMmlCall</code></td>
<td>
<p>logical; when <code>TRUE</code>, do not process the mml call but instead return it for the user to edit before calling</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omittedLevels</code></td>
<td>
<p>this argument is deprecated. Use <code>dropOmittedLevels</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Typically, models are fit with NAEP data using plausible values to integrate out the uncertainty in the measurement of individual
student outcomes. When direct estimation is used, the measurement error is integrated out explicitly using <code>Q</code> quadrature points.
See documentation for <code>mml</code> in the <code>Dire</code> package.
</p>
<p>The <code>scoreDict</code> helps turn response categories that are not simple item responses, such as <code>Not Reached</code> and <code>Multiple</code>,
to something coded as inputs for the <code>mml</code> function in <code>Dire</code>. How <code>mml</code> treats these values depends on the test.
For NAEP, for a dichotomous item, 8 is scored as the same proportion correct as the guessing parameter for that item, 0 is
an incorrect response, an NA does not change the student's score, and 1 is correct. TIMSS does not require a <code>scoreDict</code>.
</p>


<h3>Value</h3>

<p>An <code>mml.sdf</code> object, which is the outcome from <code>mml.sdf</code>, with the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>mml</code></td>
<td>
<p>an object containing information from the <code>mml</code> procedure.
<code>?mml</code> can be used for further information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoreDict</code></td>
<td>
<p>the scoring used in the <code>mml</code> procedure</p>
</td>
</tr>
</table>
<p>.
</p>
<table><tr style="vertical-align: top;">
<td><code>itemMapping</code></td>
<td>
<p>the item mapping used in the <code>mml</code> procedure</p>
</td>
</tr></table>
<p>.
</p>


<h3>References</h3>

<p>Cohen, J., &amp; Jiang, T. (1999). Comparison of partially measured latent traits across nominal subgroups.
<em>Journal of the American Statistical Association</em>, <em>94</em>(448), 1035â€“1044. https://doi.org/10.2307/2669917
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Direct Estimation with NAEP 
# Load data 
sdfNAEP &lt;- readNAEP(path=system.file("extdata/data", "M36NT2PM.dat", package = "NAEPprimer"))

# Inspect scoring guidelines
defaultNAEPScoreCard()

# example output: 
#          resCat pointMult pointConst
# 1     Multiple         8          0
# 2  Not Reached        NA         NA
# 3      Missing        NA         NA
# 4      Omitted         8          0
# 5    Illegible         0          0
# 6 Non-Rateable         0          0
# 7     Off Task         0          0

# Run NAEP model, warnings are about item codings
mmlNAEP &lt;- mml.sdf(formula=algebra ~ dsex + b013801, data=sdfNAEP, weightVar='origwt')

# Call with Taylor
summary(mmlNAEP, varType="Taylor", strataVar="repgrp1", PSUVar="jkunit")

## Direct Estimation with TIMSS 
# Load data 
downloadTIMSS("~/", year=2015)
sdfTIMSS &lt;- readTIMSS(path="~/TIMSS/2015", countries="usa", grade = "4")

# Run TIMSS model, warnings are about item codings 
mmlTIMSS &lt;- mml.sdf(formula=mmat ~ itsex + asbg04, data=sdfTIMSS, weightVar='totwgt')

# Call with Taylor
summary(mmlTIMSS, varType="Taylor", strataVar="jkzone", PSUVar="jkrep")

## End(Not run)


</code></pre>


</div>