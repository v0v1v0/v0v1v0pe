<div class="container">

<table style="width: 100%;"><tr>
<td>processLastDose</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process and standardize extracted last dose times</h2>

<h3>Description</h3>

<p>This function takes last dose times extracted using the <span class="pkg">medExtractR</span> system and
processes the times into standardized datetime objects using recorded lab data where necessary.
The raw output from <code>extractMed</code> is filtered to just the LastDose extractions. Time expressions
are standardized into HH:MM:SS format based on what category they fall into (e.g., a time represented
with AM/PM, 24-hour military time, etc.). When the last dose time is after 12pm, it is assumed to have
been taken one day previous to the note's date. For any duration extractions (e.g. "14 hour level"),
the last dose time is calculated from the labtime by extracting the appropriate number of hours. The
final dataset is returned with last dose time formatted into a POSIXct variable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">processLastDose(mxrData, noteMetaData, labData)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mxrData</code></td>
<td>
<p>data.frame containing output from the <code>medExtractR</code> system</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noteMetaData</code></td>
<td>
<p>data.frame with meta data (<code>pid</code> (patient ID) and <code>date</code>) for
the file names contained within <code>mxrData</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labData</code></td>
<td>
<p>data.frame that contains lab dates and times associated with the file names
within <code>mxrData</code>. Must contain columns <code>pid</code> and <code>date</code>, as well as <code>labtime</code>.
The <code>date</code> column must be in the same format as <code>date</code> in <code>noteMetaData</code>, and
<code>labtime</code> must be a POSIXct</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See EHR Vignette for Extract-Med and Pro-Med-NLP for details.
</p>


<h3>Value</h3>

<p>data.frame with identifying information (e.g., filename, etc) as well as processed
and standardized last dose times as a POSIXct column
</p>


<h3>Examples</h3>

<pre><code class="language-R">tac_mxr &lt;- read.csv(system.file("examples", "tac_mxr.csv", package = "EHR"))
data(tac_metadata)
data(tac_lab)

processLastDose(mxrData = tac_mxr, noteMetaData = tac_metadata, labData = tac_lab)

</code></pre>


</div>