<div class="container">

<table style="width: 100%;"><tr>
<td>trend_line</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot the trendline report of epitweetr dashboard</h2>

<h3>Description</h3>

<p>Generates a trendline chart of number of tweets by region, for one topic, including alerts using the reweighted version of the EARS algorithm
</p>


<h3>Usage</h3>

<pre><code class="language-R">trend_line(
  topic,
  countries = c(1),
  date_type = "created_date",
  date_min = "1900-01-01",
  date_max = "2100-01-01",
  with_retweets = FALSE,
  location_type = "tweet",
  alpha = 0.025,
  alpha_outlier = 0.05,
  k_decay = 4,
  no_historic = 7,
  bonferroni_correction = FALSE,
  same_weekday_baseline = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>topic</code></td>
<td>
<p>Character(1) containing the topic to use for the report</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>countries</code></td>
<td>
<p>Character vector containing the name of the countries and regions to plot or their respective indexes on the Shiny app select, default: c(1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_type</code></td>
<td>
<p>Character vector specifying the time granularity of the report either 'created_weeknum' or 'created_date', default: 'created_date'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_min</code></td>
<td>
<p>Date indicating start of the reporting period, default: "1900-01-01"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_max</code></td>
<td>
<p>Date indicating end of the reporting period, default: "2100-01-01"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with_retweets</code></td>
<td>
<p>Logical value indicating whether to include retweets in the time series, default: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location_type</code></td>
<td>
<p>Character(1) vector indicating the location type. Possible values 'tweet', 'user' or 'both', default: 'tweet'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Numeric(1) value indicating the alert detection confidence, default: 0.025</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_outlier</code></td>
<td>
<p>Numeric(1) value indicating the outliers detection confidence for downweighting, default: 0.05</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k_decay</code></td>
<td>
<p>Strength of outliers downweighting, default: 4</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_historic</code></td>
<td>
<p>Number of observations to build the baseline for signal detection, default: 7</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bonferroni_correction</code></td>
<td>
<p>Logical value indicating whether to apply the Bonferroni correction for signal detection, default: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>same_weekday_baseline</code></td>
<td>
<p>Logical value indicating whether to use same day of weeks for building the baseline or consecutive days, default: FALSE</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Produces a multi-region line chart for a particular topic of number of tweets collected based on the provided parameters. 
Alerts will be calculated using a modified version of the EARS algorithm that applies a Farrington inspired downweighting of previous outliers.
</p>
<p>Days in this function are considered as contiguous blocks of 24 hours starting for the previous hour of the last collected tweet.
</p>
<p>This function requires <code>search_loop</code> and <code>detect_loop</code> to have already run successfully to show results.
</p>


<h3>Value</h3>

<p>A named list containing two elements: 'chart' with the ggplot2 figure and 'data' containing the data frame that was used to build the chart.
</p>


<h3>See Also</h3>

<p><code>create_map</code>
<code>create_topwords</code>
<code>generate_alerts</code>
<code>detect_loop</code>
<code>search_loop</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if(FALSE){
   message('Please choose the epitweetr data directory')
   setup_config(file.choose())
   #Getting trendline for dengue for South America for the last 30 days
   trend_line(
     topic = "dengue", 
     countries = "South America", 
     date_min = as.Date(Sys.time())-30, 
     date_max=as.Date(Sys.time())
   ) 
}
</code></pre>


</div>