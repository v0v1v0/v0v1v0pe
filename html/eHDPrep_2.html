<div class="container">

<table style="width: 100%;"><tr>
<td>apply_quality_ctrl</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply quality control measures to a dataset</h2>

<h3>Description</h3>

<p>The primary high level function for quality control. Applies several quality
control functions in sequence to input data frame (see Details for individual
functions).
</p>


<h3>Usage</h3>

<pre><code class="language-R">apply_quality_ctrl(
  data,
  id_var,
  class_tbl,
  bin_cats = NULL,
  min_freq = 1,
  to_numeric_matrix = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame, data frame extension (e.g. a tibble), or a lazy
data frame (e.g. from dbplyr or dtplyr).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_var</code></td>
<td>
<p>An unquoted  expression which corresponds to a variable (column) in
<code>data</code> which identifies each row (sample).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class_tbl</code></td>
<td>
<p>data frame such as the output tibble from
<code>assume_var_classes</code> followed by
<code>import_var_classes</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin_cats</code></td>
<td>
<p>Optional named vector of user-defined values for binary
values using <code>binary_label_1 = binary_label_2</code> syntax (e.g.
<code>c("No" = "Yes")</code> would assign level 1 to "No" and 2 to "Yes"). See
<code>encode_binary_cats</code> for defaults. Applied to variables (columns)
labelled "character" or "factor" in <code>class_tbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_freq</code></td>
<td>
<p>Minimum frequency of occurrence
<code>extract_freetext</code> will use to extract groups of proximal
words in free-text from variables (columns) labelled "freetext" in <code>class_tbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_numeric_matrix</code></td>
<td>
<p>Should QC'ed data be converted to a numeric matrix?
Default: FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The wrapped functions are applied in the following order:
</p>

<ol>
<li>
<p> Standardise missing values (<code>strings_to_NA</code>)
</p>
</li>
<li>
<p> Encode binary categorical variables (columns) (<code>encode_binary_cats</code>)
</p>
</li>
<li>
<p> Encode (specific) ordinal variables (columns)(<code>encode_ordinals</code>)
</p>
</li>
<li>
<p> Encode genotype variables (<code>encode_genotypes</code>)
</p>
</li>
<li>
<p> Extract information from free text variables (columns) (<code>extract_freetext</code>)
</p>
</li>
<li>
<p> Encode non-binary categorical variables (columns) (<code>encode_cats</code>)
</p>
</li>
<li>
<p> Encode output as numeric matrix (optional, <code>encode_as_num_mat</code>)
</p>
</li>
</ol>
<p><code>class_tbl</code> is used to apply the above functions to the appropriate variables (columns).
</p>


<h3>Value</h3>

<p><code>data</code> with several QC measures applied.
</p>


<h3>See Also</h3>

<p>Other high level functionality: 
<code>assess_quality()</code>,
<code>review_quality_ctrl()</code>,
<code>semantic_enrichment()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(example_data)
require(tibble)

# create an example class_tbl object
# note that diabetes_type is classes as ordinal and is not modified as its
# levels are not pre-coded
tibble::tribble(~"var", ~"datatype",
"patient_id", "id",
"tumoursize", "numeric",
"t_stage", "ordinal_tstage",
"n_stage", "ordinal_nstage",
"diabetes", "factor",
"diabetes_type", "ordinal",
"hypertension", "factor",
"rural_urban", "factor",
"marital_status", "factor",
"SNP_a", "genotype",
"SNP_b", "genotype",
"free_text", "freetext") -&gt; data_types

data_QC &lt;- apply_quality_ctrl(example_data, patient_id, data_types, 
   bin_cats =c("No" = "Yes", "rural" = "urban"),  min_freq = 0.6)
</code></pre>


</div>