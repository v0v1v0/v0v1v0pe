<div class="container">

<table style="width: 100%;"><tr>
<td>compareOverlap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Compare y between newDat and 
refDat for shared values of x
</h2>

<h3>Description</h3>

<p>Compute 
<code>dy &lt;- (y - yRef)</code> for all 
cases where <code>x == xRef</code>, 
where <code>x</code> and <code>y</code> are 
columns of <code>newDat</code> and 
<code>xRef</code> and <code>yRef</code> are 
columns of <code>refDat</code>.  
</p>
<p>Also compute 
<code>dyRef &lt;- dy / yRef</code>.  
</p>
<p>Return silently a 
<code>data.frame</code> with columns 
<code>x</code>, <code>y</code>, <code>yRef</code>, 
<code>dy</code>, and <code>dyRef</code>. 
</p>
<p>Also if 
<code>min(yRef)*max(yRef)&gt;0</code> 
<code>plot(dyRef)</code> else
<code>plot(dy)</code>.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">compareOverlap(y=2, yRef=y, x=1, 
      xRef=x, newDat, refDat, 
      ignoreCase=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y, yRef</code></td>
<td>

<p>columns of <code>newDat</code>, 
<code>refDat</code>, respectively, 
to compare, ignoring case in the 
names unless <code>ignoreCase</code> is 
<code>FALSE</code>.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, xRef</code></td>
<td>

<p>columns of <code>newDat</code>, 
<code>refDat</code>, respectively, 
to match when comparing 
<code>y</code> with <code>yRef</code>.
</p>
<p>As with <code>y</code> and <code>yRef</code>, 
ignore case in name matching 
unless <code>ignoreCase</code> is 
<code>FALSE</code>.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newDat, refDat</code></td>
<td>

<p><code>data.frame</code>s of new 
and reference data in which to 
search for overlap, i.e., common 
values of <code>newD[, x]</code> and 
<code>refDat[, xRef]</code>, and for 
those observations to compare 
<code>newDat[, y]</code> to 
<code>refDat[, yRef]</code>.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignoreCase</code></td>
<td>

<p>logical:  If <code>TRUE</code>, 
ignore case when searching 
for columns of <code>newDat</code> 
and <code>refDat</code> to match 
<code>y</code>, <code>yRef</code>, 
<code>x</code>, and <code>xRef</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>optional arguments to pass 
to <code>plot</code>
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is particularly useful 
for updating datasets that are obtained 
from sources like the 
<a href="https://bjs.ojp.gov">Bureau of Justice Statistics</a>, 
which publish many series with 
each update including the most recent 
11 years.  This function can be used 
to evaluate the extent of equivalence
between, e.g., historical data in 
<code>refDat</code> with the latest data
in <code>newDat</code>.
</p>


<h3>Value</h3>

<p>Invisibly return a 
<code>data.frame</code> with columns 
<code>x</code>, <code>paste0(y, 'New')</code>, 
<code>past0(yRef, 'Ref')</code>, 
<code>dy</code>, and <code>dyRef</code>
of the data compared.  
</p>


<h3>Author(s)</h3>

<p>Spencer Graves</p>


<h3>Examples</h3>

<pre><code class="language-R">nDat &lt;- data.frame(yr=2000:2015, 
          Y=0:15)
rDat &lt;- data.frame(Yr=2018:2011, 
          y=c(17:13, 13:11))
nrDat &lt;- compareOverlap(
  newDat=nDat, refDat=rDat)

# Correct answer
NRdat &lt;- data.frame(yr=2011:2015, 
  YNew=11:15, yRef=c(11:13, 13:14), 
  dy=c(0,0,0, 1, 1), 
  dyRef=c(0,0,0, 1,1) / 
        c(11:13, 13:14))


all.equal(nrDat, NRdat)

</code></pre>


</div>