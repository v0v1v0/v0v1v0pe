<div class="container">

<table style="width: 100%;"><tr>
<td>ensemble_rescale</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rescale SDM predictions</h2>

<h3>Description</h3>

<p>Rescale SDM predictions and (if applicable) associated uncertainties
</p>


<h3>Usage</h3>

<pre><code class="language-R">ensemble_rescale(x, x.idx, y, y.abund = NULL, x.var.idx = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object of class <code>sf</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.idx</code></td>
<td>
<p>vector of column names or column indices;
indicates columns in <code>x</code> with prediction values that will be rescaled</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>rescaling method; must be either "abundance" or "sumto1".
See 'Details' section for descriptions of the rescaling methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.abund</code></td>
<td>
<p>numeric value; ignored if <code>y</code> is not <code>"abundance"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.var.idx</code></td>
<td>
<p>vector of column names or column indices;
indicates columns in <code>x</code> with variance values that will be rescaled.
If <code>x.var.idx</code> is specified, it must be the same length as <code>x.idx</code>.
Use <code>x.var.idx = NULL</code> (the default) if none of the predictions have associated uncertainty values;
see the 'Details' section for more information</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ensemble_rescale</code> is intended to be used after overlaying predictions with
<code>overlay_sdm</code> and before creating ensembles with <code>ensemble_create</code>.
The provided rescaling methods are:
</p>

<ul>
<li>
<p>'abundance' - Rescale the density values so that the predicted abundance is <code>y.abund</code>
</p>
</li>
<li>
<p>'sumto1' - Rescale the density values so their sum is 1
</p>
</li>
</ul>
<p>SDM uncertainty values must be rescaled differently than the prediction values.
Columns specified in <code>x.var.idx</code> must contain variance values.
These values will be rescaled using the formula <code>var(c * x) = c^2 * var(x)</code>,
where <code>c</code> is the rescaling factor for the associated predictions.
</p>
<p>If <code>x.var.idx</code> is not <code>NULL</code>, then the function assumes
<code>x.var.idx[1]</code> contains the variance values associated with the predictions in <code>x.idx[1]</code>,
<code>x.var.idx[2]</code> contains the variance values associated with the predictions in <code>x.idx[2]</code>, etc.
Use <code>NA</code> in <code>x.var.idx</code> to indicate a set of predictions that does not have
associated uncertainty values (e.g., <code>x.var.idx = c(4, NA, 5)</code>)
</p>


<h3>Value</h3>

<p>The <code>sf</code> object <code>x</code> with the columns specified by <code>x.idx</code> and <code>x.var.idx</code> rescaled.
The <code>agr</code> attributes of <code>x</code> will be conserved
</p>


<h3>Examples</h3>

<pre><code class="language-R">ensemble_rescale(preds.1, c("Density", "Density2"), "abundance", 50)
ensemble_rescale(preds.1, c(1, 2), "sumto1")

ensemble_rescale(
  preds.1, c("Density", "Density2"), "abundance", 100, c(3,4)
)


</code></pre>


</div>