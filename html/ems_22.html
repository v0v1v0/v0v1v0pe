<div class="container">

<table style="width: 100%;"><tr>
<td>reclass</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Comparisson of the Standardized Resource Use (SRU)</h2>

<h3>Description</h3>

<p>Compares ICU's (intensive care units) SRU with diferent severity classes or compares ICU's SRU at two diferents times. This comparison checks if the ICUs remains in the same quadrant after a time period, and highlights their rank changes over time.
</p>
<p><code>plot.reclass</code> Plots a SMR vs. SRU scatter plot with the ICUs which had their quadrant/rank classification changed.
</p>
<p><code>print.reclass</code> Prints a table with information about which ICUs changed from a classification to another.
</p>


<h3>Usage</h3>

<pre><code class="language-R">reclass(
  x,
  y,
  same = TRUE,
  plot = FALSE,
  digits = 2,
  compare = c("SRU", "SMR", "BOTH"),
  decreasing = FALSE,
  complete.rank = TRUE
)

## S3 method for class 'reclass'
print(x, ...)

## S3 method for class 'reclass'
plot(
  x,
  ...,
  xlim_x = range(x$smr_x),
  ylim_x = range(x$sru_x),
  xlim_y = range(x$smr_y),
  ylim_y = range(x$sru_y),
  xlab = "SMR",
  ylab = "SRU",
  points.arg_x = list(pch = 21, col = "white", bg = "yellow", cex = 2),
  points.arg_y = list(pch = 21, col = "white", bg = "yellow", cex = 2),
  med.arg_x = list(col = "dodgerblue4", lwd = 2, lty = 1),
  med.arg_y = list(col = "dodgerblue4", lwd = 2, lty = 1),
  tert.arg_x = list(col = "darkorange2", lty = 2, lwd = 1),
  tert.arg_y = list(col = "darkorange2", lty = 2, lwd = 1),
  text.arg_x = list(labels = seq(1, nrow(x$tab)), cex = 0.6),
  text.arg_y = list(labels = seq(1, nrow(x$tab)), cex = 0.6),
  worse.arg_x = list(x = x$worse_x, pch = 21, col = "white", bg = "tomato", cex = 2),
  worse.arg_y = list(x = x$worse_y, pch = 21, col = "white", bg = "tomato", cex = 2),
  better.arg_x = list(x = x$better_x, pch = 21, col = "white", bg = "mediumseagreen",
    cex = 2),
  better.arg_y = list(x = x$better_y, pch = 21, col = "white", bg = "mediumseagreen",
    cex = 2),
  auto.legend = TRUE,
  leg.arg = list(x = "topleft", bty = "n", xpd = NA, inset = c(-1.8, -0.2), ncol = 1,
    horiz = F, pch = 19, cex = 0.8, pt.cex = 1.5),
  main.arg_x = list(main = "1st Stage"),
  main.arg_y = list(main = "2nd Stage")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>Objects of class 'SRU'. x is the SRU analsys from the 1st period (e.g. first trimester) and y from the 2nd period (e.g. second trimester). For <code>print.reclass</code> or <code>plot.reclass</code>, x is an object of class 'reclass'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>same</code></td>
<td>
<p>Logical; If <code>TRUE</code>, compare the same units, with the same severity classes at two consecutive time periods (default). If <code>same = TRUE</code> and the ICUs do not match exactly in 'x' and 'y', there is a warning and non matching units are discarded from the analysis. If <code>FALSE</code>, it compares the same units, with different severity classes within the same period. In this case, if the ICUs do not match exactly in 'x' and'y', the function will return an error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), plots a SMR vs. SRU scatter plot highlighting the ICUs which had their classification changed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Integer indicating the number of decimal places to be used in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compare</code></td>
<td>
<p>The way one prefers to benchmark the ICUs: by "SRU" (default), "SMR" or "BOTH". If "BOTH", the ICUs will be ranked by their SRU.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decreasing</code></td>
<td>
<p>Logical. Should the sort order of ICU's rank be increasing or decreasing?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complete.rank</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), returns all ICUs ranked. If <code>FALSE</code>, returns only ICUs whose efficiency classification ranked changed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be passed to methods (see <code>par</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim_x, ylim_x</code></td>
<td>
<p>Limits for x and y axis for 1st stage plot for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim_y, ylim_y</code></td>
<td>
<p>Limits for x and y axis for 2nd stage plot for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab, ylab</code></td>
<td>
<p>Labels of x and y axis for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>points.arg_x, points.arg_y</code></td>
<td>
<p>List of arguments passed to <code>points</code> for plotting points correponding to units' SMR and SRU in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>med.arg_x, med.arg_y</code></td>
<td>
<p>List of arguments passed to <code>abline</code> for plotting lines corresponding to SRU and SMR medians in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tert.arg_x, tert.arg_y</code></td>
<td>
<p>List of arguments passed to <code>abline</code> for plotting lines corresponding to SRU and SMR tertiles in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.arg_x, text.arg_y</code></td>
<td>
<p>List of arguments passed to <code>text</code> for plotting units labels in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>worse.arg_x, worse.arg_y</code></td>
<td>
<p>List of arguments passed to <code>points</code> for plotting points correponding to units which got their rank worse in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>better.arg_x, better.arg_y</code></td>
<td>
<p>List of arguments passed to <code>points</code> for plotting points correponding to units which got their rank better in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto.legend</code></td>
<td>
<p>Logical. If <code>TRUE</code>, it prints a legend with <code>leg.arg</code> arguments for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.arg</code></td>
<td>
<p>List of arguments passed to <code>legend</code> for plotting legends corresponding to SRU and SMR medians and tertiles in 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main.arg_x, main.arg_y</code></td>
<td>
<p>List of arguments passed to <code>plot</code> for the titles for the 1st and 2nd stage plots for <code>plot.reclass</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>reclass</code> retunrs  a data.frame with the following columns:
</p>

<ul>
<li> <p><code>Unit</code> Names of the ICU.
</p>
</li>
<li>
<p><code>Admission</code> Number of admissions in each ICU.
</p>
</li>
<li> <p><code>From</code> ICU's initial efficiency quadrant.
</p>
</li>
<li> <p><code>To</code> ICU's final efficiency quadrant.
</p>
</li>
<li> <p><code>SRU.1st</code> ICU's initial SRU estimate.
</p>
</li>
<li> <p><code>SRU.2nd</code> ICU's final SRU estimate.
</p>
</li>
<li> <p><code>SMR.1st</code> ICU's initial SMR estimate.
</p>
</li>
<li> <p><code>SMR.2nd</code> ICU's final SMR estimate.
</p>
</li>
<li> <p><code>Rank1</code> ICU's initial SRU (or SMR) rank.
</p>
</li>
<li> <p><code>Rank2</code> ICU's final SRU (or SMR) rank.
</p>
</li>
</ul>
<p><code>plot.reclass</code> returns a scatter plot with grpahical comparison of the two periods/stages with their respective medians and tertiles.
</p>


<h3>Author(s)</h3>

<p>Lunna Borges and Pedro Brasil
</p>


<h3>See Also</h3>

<p><code>SRU</code>, <code>SMR</code>, <code>funnel</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(icu)
# A little editing
icu$Saps3DeathProbabilityStandardEquation &lt;- icu$Saps3DeathProbabilityStandardEquation / 100
icu &lt;- icu[-which(icu$los &lt; 0 ),]

# Subseting the data for the 1st quarter
x &lt;- droplevels(icu[which(format(as.Date(icu$UnitAdmissionDate),"%m") %in% c("01","02","03")),])

# Subseting the data for the 2nd quarter
y &lt;- droplevels(icu[which(format(as.Date(icu$UnitAdmissionDate),"%m") %in% c("04","05","06")),])

# Running the SRU analysis for both quarters
FirstQ &lt;- SRU(prob = x$Saps3DeathProbabilityStandardEquation, death = x$UnitDischargeName,
unit = x$Unit, los = x$los, score = x$Saps3Points, originals = TRUE, type = 1, plot = FALSE)
FirstQ

SecondQ &lt;- SRU(prob = y$Saps3DeathProbabilityStandardEquation, death = y$UnitDischargeName,
unit = y$Unit, los = y$los, score = y$Saps3Points, originals = TRUE, type = 1, plot = FALSE)
SecondQ

z &lt;- reclass(x = FirstQ, y = SecondQ, same = TRUE)
z
plot(z)

rm(icu, x, y, FirstQ, SecondQ, z)

</code></pre>


</div>