<div class="container">

<table style="width: 100%;"><tr>
<td>toBinary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transforms a "survival" data frame into a data frame suitable for binary
(logistic) regression</h2>

<h3>Description</h3>

<p>The result of the transformation can be used to do survival analysis via
logistic regression. If the <code>cloglog</code> link is used, this corresponds to
a discrete time analogue to Cox's proportional hazards model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">toBinary(
  dat,
  surv = c("enter", "exit", "event"),
  strats,
  max.survs = NROW(dat)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>A data frame with three variables representing the survival
response. The default is that they are named <code>enter</code>, <code>exit</code>, and
<code>event</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surv</code></td>
<td>
<p>A character vector with the names of the three variables
representing survival.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strats</code></td>
<td>
<p>An eventual stratification variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.survs</code></td>
<td>
<p>Maximal number of survivors per risk set. If set to a
(small) number, survivors are sampled from the risk sets.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>toBinary calls <code>risksets</code> in the <code>eha</code> package.
</p>


<h3>Value</h3>

<p>Returns a data frame expanded risk set by risk set. The three
"survival variables" are replaced by a variable named <code>event</code> (which
overwrites an eventual variable by that name in the input). Two more
variables are created, <code>riskset</code> and <code>orig.row</code>.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p>Indicates an event in the corresponding risk set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>riskset</code></td>
<td>
<p>Factor (with levels 1, 2, ...) indicating risk set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>risktime</code></td>
<td>
<p>The 'risktime' (age) in the corresponding riskset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>orig.row</code></td>
<td>
<p>The row number for this item in the original data frame.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The survival variables must be three. If you only have <em>exit</em> and
<em>event</em>, create a third containing all zeros.
</p>


<h3>Author(s)</h3>

<p>Göran Broström
</p>


<h3>See Also</h3>

<p><code>coxreg</code>, <code>glm</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
enter &lt;- rep(0, 4)
exit &lt;- 1:4
event &lt;- rep(1, 4)
z &lt;- rep(c(-1, 1), 2)
dat &lt;- data.frame(enter, exit, event, z)
binDat &lt;- toBinary(dat)
dat
binDat
coxreg(Surv(enter, exit, event) ~ z, method = "ml", data = dat)
## Same as:
summary(glm(event ~ z + riskset, data = binDat, family = binomial(link = cloglog)))

</code></pre>


</div>