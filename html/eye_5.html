<div class="container">

<table style="width: 100%;"><tr>
<td>blink</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Your data in a blink of an eye</h2>

<h3>Description</h3>

<p><code>blink</code> summarizes your data tailored to the need of
ophthalmic research: It looks for VA and IOP columns and summarises those
with common statistics. In order to make it work, it requires specific
column naming - please see section "column names" and "data coding".
For more details how blink works, see <code>vignette("eye")</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">blink(x, va_to = "logmar", va_cols = NULL, iop_cols = NULL, fct_level = 0:4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>va_to</code></td>
<td>
<p>to which VA notation (passed to <code>va()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>va_cols</code></td>
<td>
<p>if specified, overruling automatic VA columns selection.
tidyselection supported</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iop_cols</code></td>
<td>
<p>if specified, overruling automatic IOP columns selection.
tidyselection supported</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fct_level</code></td>
<td>
<p>Remove columns for Summarizing when all unique values
fall into range. character or numeric vector, default <code>1:4</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>blink</code> is basically a wrapper around myop, eyes and reveal:
</p>

<ul>
<li>
<p> Duplicate rows are always removed
</p>
</li>
<li>
<p> Column names are prepared for myopization (see myop)
</p>
</li>
<li>
<p> VA will always be converted to logmar
</p>
</li>
</ul>
<h3>Value</h3>

<p>object of class <code>blink</code> and <code>list</code>. Class blink contains the
myopized data, count of patients and eyes,
and summaries for visual acuities and intraocular pressure.
</p>


<h3>Data coding</h3>


<ul>
<li>
<p> Only common codes supported:
</p>
</li>
<li> <p><strong>eyes</strong>: "r", "re", "od", "right" - or numeric coding r:l = 0:1 or 1:2
</p>
</li>
<li> <p><strong>Visual acuity</strong>: "VA", "BCVA", "Acuity"
</p>
</li>
<li> <p><strong>Intraocular pressure</strong>: "IOP", "GAT", "NCT", "pressure"
</p>
</li>
</ul>
<h3>Column name rules</h3>


<ul>
<li>
<p> No spaces!
</p>
</li>
<li>
<p> Do not use numeric coding for eyes in column names
</p>
</li>
<li>
<p> Separate eye and VA and IOP codes with <strong>underscores</strong>
("bcva_l_preop", "VA_r", "left_va", "IOP_re")
</p>
</li>
<li>
<p> Avoid separate VA or IOP codes if this is not actually containing
VA/ IOP data (e.g. "stableVA" instead of "stable_va", ChangeIOP instead
of "change_IOP")
</p>
</li>
<li>
<p> Keep names short
</p>
</li>
<li>
<p> Don't use underscores when you don't have to.
Consider each section divided by an underscore as a relevant
characteristic of your variable. ("preop" instead of "pre_op",
"VA" instead of "VA_ETDRS_Letters")
</p>
</li>
<li>
<p> Use common codes for your patient column (see eyes, section Guessing)
(e.g., "pat", "patient" or "ID", ideally both: "patientID" or "patID")
</p>
</li>
<li> <p><strong>Don't be too creative with your names!</strong>
</p>
</li>
</ul>
<h3>Names examples</h3>

<p><strong>Good names</strong>:
</p>
<p>-<code>c("patid", "surgery_right", "iop_r_preop", "va_r_preop", "iop_r", "iop_l")</code>
</p>
<p><strong>OK names</strong>
</p>
<p>-<code>c("Id", "Eye", "BaselineAge", "VA_ETDRS_Letters", "InjectionNumber")</code>:
Names are long and there are two unnecessary underscore in the VA column.
Better just "VA"
-<code>c("id", "r",  "l")</code>: All names are commonly used (good!),
but which dimension of "r"/"l" are we exactly looking at?
</p>
<p><strong>Bad names</strong> (<code>eye</code> will fail)
</p>

<ul>
<li> <p><code>c("id", "iopr", "iopl", "VAr", "VAl")</code>:
<code>eye</code> won't be able to recognize IOP and VA columns
</p>
</li>
<li> <p><code>c("id", "iop_r", "iop_l", "stable_iop_r", "stable_iop_l")</code>:
<code>eye</code> <em>may</em> wrongly identify the (probably logical) columns "stable_iop"
as columns containing IOP data. Better maybe: "stableIOP_l"
</p>
</li>
<li> <p><code>c("person", "goldmann", "vision")</code>: <code>eye</code> will not recognize that at all
</p>
</li>
</ul>
<h3>tidy data</h3>

<p><strong>blink and myop work more reliably with clean data</strong>
(any package will, really!).
<a href="https://tidyr.tidyverse.org/articles/tidy-data.html">clean data.</a>
</p>


<h3>column removal</h3>

<p>Done with remCols: Removes columns that only
contain values defined in <em>fct_levels</em> or logicals from selected columns
(currently for both automatically and manually selected columns).
fct_levels are removed because they are likely categorical codes.
</p>


<h3>See Also</h3>

<p><a href="https://tidyselect.r-lib.org/reference/language.html">About tidyselection</a>.
</p>
<p>How to rename your columns (two threads on stackoverflow.com):
</p>

<ul>
<li> <p><a href="https://stackoverflow.com/questions/7531868/how-to-rename-a-single-column-in-a-data-frame">Rename columns 1</a>
</p>
</li>
<li> <p><a href="https://stackoverflow.com/questions/20987295/rename-multiple-columns-by-names/59567220#59567220">Rename columns 2</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">library(eyedata)
blink(amd2)

messy_df &lt;- data.frame( id = letters[1:3],
iop_r_preop = sample(21:23), iop_r_postop = sample(11:13),
iop_l_postop = sample(11:13), iop_l_preop = sample(31:33),
va_r_preop = sample(41:43),  va_l_preop = sample(41:43),
va_r_postop = sample(51:53), va_l_postop = sample(45:47)
)
blink(messy_df)
</code></pre>


</div>