<div class="container">

<table style="width: 100%;"><tr>
<td>cross_cases</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross tabulation with support of labels, weights and multiple response variables.</h2>

<h3>Description</h3>


<ul>
<li>
<p><code>cross_cases</code> build a contingency table of the counts.
</p>
</li>
<li>
<p><code>cross_cpct</code>, <code>cross_cpct_responses</code> build a contingency table 
of the column percent. These functions give different results only for 
multiple response variables. For <code>cross_cpct</code> base of percent is number 
of valid cases. Case is considered as valid if it has at least one non-NA 
value. So for multiple response variables sum of percent may be greater than
100. For <code>cross_cpct_responses</code> base of percent is number of valid 
responses. Multiple response variables can have several responses for single 
case. Sum of percent of <code>cross_cpct_responses</code> always equals to 100%.
</p>
</li>
<li>
<p><code>cross_rpct</code> build a contingency table of the row percent. Base
for percent is number of valid cases.
</p>
</li>
<li>
<p><code>cross_tpct</code> build a contingency table of the table percent. Base
for percent is number of valid cases.
</p>
</li>
<li>
<p><code>cross_*</code> functions evaluate their arguments
in the context of the first argument <code>data</code>.
</p>
</li>
<li>
<p><code>cro_*</code> functions use standard evaluation, e. g 'cro(mtcars$am, mtcars$vs)'.
</p>
</li>
<li>
<p><code>total</code> auxiliary function - creates variables with 1 for valid
case of its argument <code>x</code> and NA in opposite case.
</p>
</li>
</ul>
<p>You can combine tables with add_rows and merge.etable. For
sorting table see tab_sort_asc. 
To provide multiple-response variables as arguments use mrset for 
multiples with category encoding and mdset for multiples with 
dichotomy (dummy) encoding. To compute statistics with nested 
variables/banners use nest. For more sophisticated interface with
modern piping via <code>magrittr</code> see tables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cross_cases(
  data,
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cross_cpct(
  data,
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cross_rpct(
  data,
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cross_tpct(
  data,
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cross_cpct_responses(
  data,
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_responses",
  total_row_position = c("below", "above", "none")
)

cro(
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cro_cases(
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cro_cpct(
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cro_rpct(
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cro_tpct(
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_cases",
  total_row_position = c("below", "above", "none")
)

cro_cpct_responses(
  cell_vars,
  col_vars = total(),
  row_vars = NULL,
  weight = NULL,
  subgroup = NULL,
  total_label = NULL,
  total_statistic = "u_responses",
  total_row_position = c("below", "above", "none")
)

total(x = 1, label = "#Total")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame in which context all other arguments will be evaluated
(for <code>cross_*</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cell_vars</code></td>
<td>
<p>vector/data.frame/list. Variables on which percentage/cases
will be computed. Use mrset/mdset for multiple-response
variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_vars</code></td>
<td>
<p>vector/data.frame/list. Variables which breaks table by
columns. Use mrset/mdset for multiple-response variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_vars</code></td>
<td>
<p>vector/data.frame/list. Variables which breaks table by rows.
Use mrset/mdset for multiple-response variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>numeric vector. Optional cases weights. Cases with NA's,
negative and zero weights are removed before calculations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subgroup</code></td>
<td>
<p>logical vector. You can specify subgroup on which table will be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_label</code></td>
<td>
<p>By default "#Total". You can provide several names - each name for
each total statistics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_statistic</code></td>
<td>
<p>By default it is "u_cases" (unweighted cases). 
Possible values are "u_cases", "u_responses", "u_cpct", "u_rpct", "u_tpct",
"w_cases", "w_responses", "w_cpct", "w_rpct", "w_tpct". "u_" means
unweighted statistics and "w_" means weighted statistics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_row_position</code></td>
<td>
<p>Position of total row in the resulting table. Can
be one of "below", "above", "none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>vector/data.frame of class 'category'/'dichotomy'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>character. Label for total variable.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>object of class 'etable'. Basically it's a data.frame but class
is needed for custom methods.
</p>


<h3>See Also</h3>

<p>tables, fre, cro_fun.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(mtcars)
mtcars = apply_labels(mtcars,
                      mpg = "Miles/(US) gallon",
                      cyl = "Number of cylinders",
                      disp = "Displacement (cu.in.)",
                      hp = "Gross horsepower",
                      drat = "Rear axle ratio",
                      wt = "Weight (1000 lbs)",
                      qsec = "1/4 mile time",
                      vs = "Engine",
                      vs = c("V-engine" = 0,
                             "Straight engine" = 1),
                      am = "Transmission",
                      am = c("Automatic" = 0,
                             "Manual"=1),
                      gear = "Number of forward gears",
                      carb = "Number of carburetors"
)

cross_cases(mtcars, am, vs) 
cro(mtcars$am, mtcars$vs) # the same result

# column percent with multiple banners
cross_cpct(mtcars, cyl, list(total(), vs, am)) 

# nested banner
cross_cpct(mtcars, cyl, list(total(), vs %nest% am))

# stacked variables
cross_cases(mtcars, list(cyl, carb), list(total(), vs %nest% am))

# nested variables
cross_cpct(mtcars, am %nest% cyl, list(total(), vs))

# row variables
cross_cpct(mtcars, cyl, list(total(), vs), row_vars = am)

# several totals above table
cross_cpct(mtcars, cyl, 
              list(total(), vs), 
              row_vars = am,
              total_row_position = "above",
              total_label = c("number of cases", "row %"),
              total_statistic = c("u_cases", "u_rpct")
              )

# multiple-choice variable
# brands - multiple response question
# Which brands do you use during last three months? 
set.seed(123)
brands = data.table(t(replicate(20,sample(c(1:5,NA),4,replace = FALSE)))) %&gt;% 
    setNames(paste0("brand_", 1:4))
# score - evaluation of tested product
brands = brands %&gt;% 
    let(
        score = sample(-1:1,.N,replace = TRUE)
    ) %&gt;% 
    apply_labels(
        brand_1 = "Used brands",
        brand_1 = num_lab("
                              1 Brand A
                              2 Brand B
                              3 Brand C
                              4 Brand D
                              5 Brand E
                              "),

        score = "Evaluation of tested brand",
        score = num_lab("
                             -1 Dislike it
                             0 So-so
                             1 Like it    
                             ")
)
cross_cpct(brands, mrset(brand_1 %to% brand_4), list(total(), score))
# responses
cross_cpct_responses(brands, mrset(brand_1 %to% brand_4), list(total(), score))

## End(Not run)
</code></pre>


</div>