<div class="container">

<table style="width: 100%;"><tr>
<td>subset.egor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Filter and Subset Ego-centered Datasets</h2>

<h3>Description</h3>

<p>Functions to index and take subsets of <code>egor()</code> objects: manipulate
egos, alters, or alter-alter ties.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'egor'
subset(x, subset, ..., unit = attr(x, "active"))

## S3 method for class 'egor'
x[i, j, unit = attr(x, "active"), ...]
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an <code>egor()</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>either an expression evaluated on each of the rows of
the selected unit (as in the eponymous argument of <code>subset()</code>) or
a function whose first argument is a row, specifying which egos,
alters, or alter-alter ties to keep. The expressions can access
variables in the calling environment; columns of the active unit,
columns of other units with which the active unit shares an ego
via <code style="white-space: pre;">⁠ego$⁠</code>, <code style="white-space: pre;">⁠alter$⁠</code>, and <code style="white-space: pre;">⁠aatie$⁠</code> as well as the following
"virtual" columns to simplify indexing: </p>

<dl>
<dt>Ego index <code>.egoRow</code>
</dt>
<dd>
<p> contains the index (counting from 1) of the row being
evaluated. (This can be used to access vector variables in the
calling environment.)</p>
</dd>
<dt>Alter index <code>.altRow</code>
</dt>
<dd>
<p> contains the index (counting from 1) of the row number in the alter table.</p>
</dd>
<dt>Alter–alter indices <code>.srcRow</code> and <code>.tgtRow</code>
</dt>
<dd>
<p> contain the
index (counting from 1) of the row of the alter being referenced by
<code>.srcID</code> and <code>.tgtID</code>. (This can be used to quickly access the
attributes of the alters in question.)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments to <code>subset</code> if <code>subset</code> is a function; otherwise unused.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>a selector of the unit of analysis being affected: the
egos, the alters or the (alter-alter) ties. Note that only one
type of unit can be affected at a time. Defaults to the current
active unit selected by <code>activate.egor()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>numeric or logical vector indexing the appropriate unit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>
<p>either an integer vector specifying which columns of the
filtered structure (ego, alters, or ties) to select, or a logical
vector specifying which columns to keep. Note that the special
columns .egoID, .altID, .srcID, .tgtID are not indexed by <code>j</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Removing or duplicating an ego will also remove or duplicate their
alters and ties.
</p>


<h3>Value</h3>

<p>An <code>egor()</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Generate a small sample dataset
(e &lt;- make_egor(5,4))

# First three egos in the dataset
e[1:3,]

# Using an external vector
# (though normally, we would use e[.keep,] here)
.keep &lt;- rep(c(TRUE, FALSE), length.out=nrow(e$ego))
subset(e, .keep)

    # Filter egos
subset(x = egor32, subset = egor32$ego$variables$sex == "m", unit="ego")
subset(x = egor32, sex == "m")

# Filter alters
subset(x = egor32, sex == "m", unit = "alter")

# Filter aaties
subset(x = egor32, weight != 0, unit = "aatie")

# Filter egos by alter variables (keep only egos that have more than 13 alters)
subset(x = egor32, nrow(alter) &gt; 13, unit = "alter")

# Filter alters by ego variables (keep only alters that have egos from Poland)
subset(x = egor32, ego$country == "Poland", unit = "ego")

# Filter edges by alter variables (keep only edges between alters where `sex == "m"`)
subset(x = egor32, all(alter$sex == "m"), unit = "aatie")
</code></pre>


</div>