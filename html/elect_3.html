<div class="container">

<table style="width: 100%;"><tr>
<td>elect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
State-specific and marginal life expectancies
</h2>

<h3>Description</h3>

<p>Estimation of state-specific and marginal life expectancies given
a multi-state survival model fitted using the <code>msm</code>-package
</p>


<h3>Usage</h3>

<pre><code class="language-R">elect(x, b.covariates, statedistdata, time.scale.msm = "years",
        h, age.max, S = 0, setseed = NULL, RestrAndConst = NULL,
        statedist.covariates = "age", method = "step")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> Fitted <code>msm</code> model </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b.covariates</code></td>
<td>
<p> List with specified covariates values (ignore intercept) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statedistdata</code></td>
<td>
<p> Data used to estimate prevalence distribution of living states </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.scale.msm</code></td>
<td>
<p> Time scale in multi-state model: <code>"years"</code>,
<code>"months"</code>,<code>"weeks"</code>, or a  value  in (0,1]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p> Grid parameter for integration where scale is <code>time.scale.msm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age.max</code></td>
<td>
<p>Assumed maximum age in same time 	scale as in fitted model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p> Number of replications for estimation of uncertainty (<code>S</code>=0 for no estimation)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setseed</code></td>
<td>
<p>Seed for the random number generation in the simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RestrAndConst</code></td>
<td>
<p>Vector which indexes the independent model parameters. Only
needed when <code>constraint</code> is used in <code>msm</code> call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statedist.covariates</code></td>
<td>
<p>Names of covariates for model for prevalence distribution of living states</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Approximation of integral: <code>"step"</code> for simple step function,   <code>"MiddleRiemann"</code> or <code>"Simpson"</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>elect</code>-package is an add-on to the <code>msm</code>-package for models with one death state. In the <code>msm</code> call for fitting the model use <code>center=FALSE</code>, and names <code>state</code> and <code>age</code>.  Do not use variables encoded as factor by <code>R</code>. Covariate <code>age</code> should be the first entry in <code> b.covariates</code>. The other covariates in <code>b.covariates</code> should follow the order
in the <code>msm</code> call. The life expectancies are computed by approximating the
integral numerically with a grid defined by <code>h</code>. The specification of <code>statedist.covariates</code> should
be a subset of  <code>b.covariates</code>.</p>


<h3>Value</h3>

<p>A list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>pnt </code></td>
<td>
<p>Life expectancies derived from MLE of model parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sim </code></td>
<td>
<p>Simulated life expectancies using the MLE of model parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>As specified in <code>elect</code> call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covars</code></td>
<td>
<p> Covariates as specified in <code>elect</code> call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
 <p><code>S</code> as specified in <code>elect</code> call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd.model</code></td>
<td>
<p>Fitted model for the prevalence distribution of living states</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ardo van den Hout and Mei Sum Chan
</p>


<h3>References</h3>

<p>Jackson, C.H. (2011). Multi-State Models for Panel Data: The msm Package
for R., Journal of Statistical Software, 38(8), 1-29.
</p>
<p>Van den Hout, A. (2017). Multi-State Survival Models for Interval-Censored Data. Boca Raton: CRC/Chapman &amp; Hall.
</p>


<h3>See Also</h3>

<p><code>summary.elect</code>, <code>plot.elect</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Fit msm model:
Q     &lt;- rbind(c(0,0.01,0.01), c(0,0,0.01), c(0,0,0))
model &lt;- msm(state~age, subject = id, data = electData,
             center = FALSE, qmatrix = Q, deathexact = TRUE,
             covariates = ~age+x)

# Estimate life expectancies:
sddata &lt;- electData[electData$bsline == 1,]
LEs    &lt;- elect(x = model, b.covariates = list(age = 0, x = 0),
                statedistdata = sddata, h = 0.5, age.max = 50, S = 25)
summary(LEs)
plot(LEs)     # For smoother graphs, increase S
</code></pre>


</div>