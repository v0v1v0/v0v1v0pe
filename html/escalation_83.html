<div class="container">

<table style="width: 100%;"><tr>
<td>select_mtpi_mtd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select dose by mTPI's MTD-choosing algorithm.</h2>

<h3>Description</h3>

<p>This method selects dose by the algorithm for identifying the maximum
tolerable dose (MTD) described in Ji et al. (2010). This class is intended
to be used when a mTPI trial has reached its maximum sample size. Thus, it
intends to make the final dose recommendation after the regular mTPI dose
selection algorithm, as implemented by <code>get_mtpi</code>, including any
additional behaviours that govern stopping (etc), has gracefully concluded a
dose-finding trial. However, the class can be used in any scenario where
there is a target toxicity rate. See Examples. Note - this class will not
override the parent dose selector when the parent is advocating no dose. Thus
this class will not reinstate a dangerous dose.
</p>


<h3>Usage</h3>

<pre><code class="language-R">select_mtpi_mtd(
  parent_selector_factory,
  when = c("finally", "always"),
  target = NULL,
  exclusion_certainty,
  alpha = 1,
  beta = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>parent_selector_factory</code></td>
<td>
<p>Object of type <code>selector_factory</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>when</code></td>
<td>
<p>Either of: 'finally' to select dose only when the parent
dose-selector has finished, by returning continue() == FALSE; or 'always'
to use this dose-selection algorithm for every dose decision. As per the
authors' original intentions, the default is 'finally'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>We seek a dose with this probability of toxicity. If not
provided, the value will be sought from the parent dose-selector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclusion_certainty</code></td>
<td>
<p>Numeric, threshold posterior certainty required to
exclude a dose for being excessively toxic. The authors discuss values in the
range 0.7 - 0.95. Set to a value &gt; 1 to suppress the dose exclusion
mechanism. The authors use the Greek letter xi for this parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>First shape parameter of the beta prior distribution on the
probability of toxicity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>Second shape parameter of the beta prior distribution on the
probability of toxicity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra args are passed onwards.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an object of type <code>selector_factory</code>.
</p>


<h3>References</h3>

<p>Ji, Y., Liu, P., Li, Y., &amp; Bekele, B. N. (2010).
A modified toxicity probability interval method for dose-finding trials.
Clinical Trials, 7(6), 653-663. https://doi.org/10.1177/1740774510382799
</p>
<p>Ji, Y., &amp; Yang, S. (2017).
On the Interval-Based Dose-Finding Designs, 1-26.
Retrieved from https://arxiv.org/abs/1706.03277
</p>


<h3>Examples</h3>

<pre><code class="language-R"># This class is intended to make the final dose selection in a mTPI trial:
target &lt;- 0.25
model &lt;- get_mtpi(num_doses = 5, target = target,
                  epsilon1 = 0.05, epsilon2 = 0.05,
                  exclusion_certainty = 0.95) %&gt;%
  stop_at_n(n = 12) %&gt;%
  select_mtpi_mtd(exclusion_certainty = 0.95)

outcomes &lt;- '1NNN 2NTN 2NNN 3NTT'
model %&gt;% fit(outcomes) %&gt;% recommended_dose()

# However, since behaviour is modular in this package, we can use this method
# to select dose at every dose decision if we wanted:
model2 &lt;- get_mtpi(num_doses = 5, target = target,
                   epsilon1 = 0.05, epsilon2 = 0.05,
                   exclusion_certainty = 0.95) %&gt;%
  select_mtpi_mtd(when = 'always', exclusion_certainty = 0.95)
model2 %&gt;% fit('1NNT') %&gt;% recommended_dose()
model2 %&gt;% fit('1NNN 2NNT') %&gt;% recommended_dose()

# and with any underlying model:
skeleton &lt;- c(0.05, 0.1, 0.25, 0.4, 0.6)
model3 &lt;- get_dfcrm(skeleton = skeleton, target = target) %&gt;%
  select_mtpi_mtd(when = 'always', exclusion_certainty = 0.95)
model3 %&gt;% fit('1NNT') %&gt;% recommended_dose()
model3 %&gt;% fit('1NNN 2NNT') %&gt;% recommended_dose()

</code></pre>


</div>