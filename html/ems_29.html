<div class="container">

<table style="width: 100%;"><tr>
<td>survPerformance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Survival models performance analysis</h2>

<h3>Description</h3>

<p>Colection of functions for survival models performance analysis.
</p>
<p><code>R2sh</code> estimates a distance-based estimator of survival predictive accuracy proposed by Schemper and Henderson. It was inspirated in survAUC::schemper function, but receives the predicted values directly. Besides that, <code>R2sh</code> does bootstrap resampling and returns its confidence interval estimate.
</p>
<p><code>R2pm</code> calculates a estimator of survival predictive accuracy proposed by Kent &amp; O'Quigley and its bootstrap confidence interval.
</p>
<p><code>cal.Slope</code> returns the calibration slope of a survival model and its bootstrap confidence interval.
</p>


<h3>Usage</h3>

<pre><code class="language-R">R2sh(time, status, lin.pred, data, R)

R2pm(lin.pred, R)

cal.Slope(time, status, lin.pred, R)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>A vector of event times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>A indicator vector of event occurrence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lin.pred</code></td>
<td>
<p>A vector of linear predictors of a survival model for each observation. (prognostic index)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame where to find column vectors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>The number of bootstrap replicates. Usually this will be a single positive integer. For importance resampling, some resamples may use one set of weights and others use a different set of weights. In this case R would be a vector of integers where each component gives the number of resamples from each of the rows of weights. To be passed to <code>boot</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>R2sh</code> returns a list with the following components:
</p>

<ul>
<li> <p><code>D</code>: The estimator of predictive accuracy obtained from the covariate-free null model.
</p>
</li>
<li> <p><code>Dx</code>: The estimator of predictive accuracy obtained from the Cox model.
</p>
</li>
<li> <p><code>V</code>: The estimator of relative gains in predictive accuracy.
</p>
</li>
<li> <p><code>Mhat</code>: The absolute distance estimator obtained from the   Cox model (evaluated at the event times of the test data).
</p>
</li>
<li> <p><code>Mhat.0</code>: The absolute distance estimator obtained from the covariate-free null model (evaluated at the event times of the test data).
</p>
</li>
<li> <p><code>timep</code>: The event times of the test data.
</p>
</li>
<li> <p><code>lower</code>: V lower confidence limit.
</p>
</li>
<li> <p><code>upper</code>: V upper confidence limit.
</p>
</li>
<li> <p><code>boot</code>: An object of class "<code>boot</code>".
</p>
</li>
<li> <p><code>bootCI</code>: Boot confidence intervals resampling.
</p>
</li>
</ul>
<p><code>R2pm</code> returns a list with the following components:
</p>

<ul>
<li> <p><code>r2</code>: The estimator of predictive accuracy obtained from the Cox model.
</p>
</li>
<li> <p><code>lower</code>: r2 lower confidence limit.
</p>
</li>
<li> <p><code>upper</code>: r2 upper confidence limit.
</p>
</li>
<li> <p><code>boot</code>: An object of class "<code>boot</code>".
</p>
</li>
<li> <p><code>bootCI</code>: Boot confidence intervals resampling.
</p>
</li>
</ul>
<p><code>cal.Slope</code> returns a list with the following components:
</p>

<ul>
<li> <p><code>slope</code>: The calibration slope measure of a survival model.
</p>
</li>
<li> <p><code>lower</code>: slope lower confidence limit.
</p>
</li>
<li> <p><code>upper</code>: slope upper confidence limit.
</p>
</li>
<li> <p><code>boot</code>: An object of class "<code>boot</code>".
</p>
</li>
<li> <p><code>bootCI</code>: Boot confidence intervals resampling.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Lunna Borges &lt;lunna.borges@epimedsolutions.com&gt;
</p>


<h3>References</h3>

<p>Schemper, M. and R. Henderson (2000).
Predictive accuracy and explained variation in Cox regression.
Biometrics 56, 249-255.
</p>
<p>Davison, A.C. and Hinkley, D.V. (1997) Bootstrap Methods and Their Application, Chapter 5. Cambridge University Press.
</p>
<p>DiCiccio, T.J. and Efron B. (1996) Bootstrap confidence intervals (with Discussion). Statistical Science, 11, 189-228.
</p>
<p>Efron, B. (1987) Better bootstrap confidence intervals (with Discussion). Journal of the American Statistical Association, 82, 171-200.
</p>
<p>Kent, John T., and J. O. H. N. O'QUIGLEY. "Measures of dependence for censored survival data." Biometrika 75.3 (1988): 525-534.
</p>
<p>van Houwelingen, Hans C. "Validation, calibration, revision and combination of prognostic survival models." Statistics in medicine 19.24 (2000): 3401-3415.
</p>
<p>Rahman, M. Shafiqur, et al. "Review and evaluation of performance measures for survival prediction models in external validation settings." BMC medical research methodology 17.1 (2017): 60.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#### Survival model ####

data(breastCancer)
class(breastCancer$gradd1) &lt;- "character"
class(breastCancer$gradd2) &lt;- "character"

traindata &lt;- breastCancer[sample(nrow(breastCancer), nrow(breastCancer)*2/3),]
newdata &lt;- breastCancer[-sample(nrow(breastCancer), nrow(breastCancer)*2/3),]
model &lt;- rms::cph(survival::Surv(rectime, censrec) ~ rms::rcs(age,6) +
 rms::rcs(nodes,3) + rms::rcs(pgr,3) + gradd1 + gradd2 +
 hormon, data = traindata)

lp &lt;- predict(model, newdata = newdata)

#### R2sh  example ####

R2sh(newdata$rectime, newdata$censrec, lp, data = newdata, R = 50)

#### R2pm example ####

R2pm(lp, R = 50)

#### cal.slope example ####

cal.Slope(newdata$rectime, newdata$censrec, lp, R = 50)

</code></pre>


</div>