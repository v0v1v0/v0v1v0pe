<div class="container">

<table style="width: 100%;"><tr>
<td>exCon</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Explore Contour Data Interactively</h2>

<h3>Description</h3>

<p>These functions compute contour lines from matrix data and display them
in an interactive web page using the d3 javascript library. <code>exCon</code>
displays slices along the x and y directions.  <code>exCon2</code> does not
display the slices and is faster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">exCon(M = NULL, x = seq(0, 1, length.out = nrow(M)), y = seq(0, 1,
  length.out = ncol(M)), nlevels = 5, levels = pretty(range(M, na.rm =
  TRUE), nlevels), browser = NULL, minify = TRUE)

exCon2(M = NULL, x = seq(0, 1, length.out = nrow(M)), y = seq(0, 1,
  length.out = ncol(M)), nlevels = 5, levels = pretty(range(M, na.rm =
  TRUE), nlevels), browser = NULL, minify = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>A matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A vector of numeric values giving the locations of the grid defining
the matrix.  Must have length <code>nrow(M)</code>.  These values become the scale
along the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of numeric values giving the locations of the grid defining
the matrix.  Must have length <code>ncol(M)</code>. These values become the scale
along the y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nlevels</code></td>
<td>
<p>Integer.  The number of contour levels desired.  Ignored if <code>levels</code>
is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>Numeric.  A vector of values (altitudes if you will) at which to
compute the contours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>browser</code></td>
<td>
<p>Character.  Something that will make sense to your OS.  Only
necessary if you want to overide your system specified browser as understood by
<code>R</code>.  See below for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minify</code></td>
<td>
<p>Logical.  Shall the JavaScript be minified?  This improves
performance.  However, it requires package <code>js</code> which in turn requires
package <code>V8</code>.  The latter is not available on all platforms.  Details
may be available at <a href="https://github.com/jeroenooms/v8">https://github.com/jeroenooms/v8</a></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The path to the temporary directory containing the web page files.
is returned invisibly.
The side effect is an interactive web page.  The temporary directory
is deleted when you quit R, but you can use the return value to
save the files to a different location.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exCon</code>: Interactive contour display with slices
</p>
</li>
<li> <p><code>exCon2</code>: Interactive contour display without slices
</p>
</li>
</ul>
<h3>Details</h3>

<p>The computation of the contour lines is handled by
<code>contourLines</code>.  The result here, however, is transposed so that the
output has the same orientation as the original matrix. This is necessary because
<code>contour</code> tranposes its output: "Notice that
<code>contour</code> interprets the <code>z</code> matrix as a table of 
<code>f(x[i], y[j])</code> values, so that the x axis corresponds to row number
and the y axis to column number, with column 1 at the bottom, i.e. a 90 degree
counter-clockwise rotation of the conventional textual layout."
</p>


<h3>Interpretation</h3>

<p>The contour lines are an interpolation of the data
in the matrix.  In <code>exCon</code>, the slices are the actual values in the matrix
row or column
connected point-to-point.  Thus a maximum in a slice may not correspond to 
a peak in the contour plot.
</p>


<h3>Browser Choice</h3>

<p>The browser is called by
<code>browseURL</code>, which
in turn uses <code>options("browser")</code>.  Exactly how this is handled
is OS dependent.
</p>


<h3>Firefox Browser</h3>

<p>the slices chosen and the values displayed are correct.
</p>


<h3>RStudio Viewer</h3>

<p>If browser is <code>NULL</code>, you are using RStudio,
and a viewer is specified, this will be called.  You can stop this by with
<code>options(viewer = NULL)</code>.
</p>


<h3>Browser Choice (Mac)</h3>

<p>On a Mac, the default browser is called
by <code>/bin/sh/open</code>
which in turn looks at which browser you have set in the system settings.  You can
override your default with
<code>browser = "/usr/bin/open -a 'Google Chrome'"</code> for example.
</p>


<h3>Browser Choice &amp; Performance</h3>

<p>You can check the performance of
your browser at peacekeeper.futuremark.com  The most relevant score for
exCon is the rendering category.
</p>


<h3>Performance Limits (YMMV)</h3>

<p>On a early 2015 MacBook Pro, with 16 Gb
RAM and an 2.9 GHz Intel Core i5 chip, a
1500 x 1500 matrix with 1 contour level 
requires about 15 seconds for R to render the web page using Chrome, Safari
or Firefox. A 2K x 2K matrix appears to be too large to handle.  R seems
to hang during the handoff to the browser.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
require(jsonlite)

# minify is FALSE in the examples as not all platforms support the required pkgs (see above)

exCon(M = volcano, minify = FALSE)

exCon2(M = volcano, minify = FALSE) # no slices

# This next example will label the axes with the actual values, relative to the
# lower left corner (original data collected on 10 meter grid).  Giving
# x and y affects only the scale, and the native values displayed at the top.

 exCon(M = volcano, minify = FALSE,
 x = seq(from = 0, by = 10, length.out = nrow(volcano)),
 y = seq(from = 0, by = 10, length.out = ncol(volcano)))
}

</code></pre>


</div>