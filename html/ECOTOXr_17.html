<div class="container">

<table style="width: 100%;"><tr>
<td>download_ecotox_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download and extract ECOTOX database files and compose database</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a> In order for this package to fully function, a local copy of the ECOTOX database
needs to be build. This function will download the required data and build the database.
</p>


<h3>Usage</h3>

<pre><code class="language-R">download_ecotox_data(
  target = get_ecotox_path(),
  write_log = TRUE,
  ask = TRUE,
  verify_ssl = getOption("ECOTOXr_verify_ssl"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>Target directory where the files will be downloaded and the database compiled. Default is
<code>get_ecotox_path()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_log</code></td>
<td>
<p>A <code>logical</code> value indicating whether a log file should be written to the target path
<code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p>There are several steps in which files are (potentially) overwritten or deleted. In those cases
the user is asked on the command line what to do in those cases. Set this parameter to <code>FALSE</code> in order
to continue without warning and asking.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verify_ssl</code></td>
<td>
<p>When set to <code>FALSE</code> the SSL certificate of the host (EPA)
is not verified. Can also be set as option:
<code>options(ECOTOXr_verify_ssl = TRUE)</code>. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed on to <code>httr2::req_options()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function will attempt to find the latest download url for the ECOTOX database from the
<a href="https://cfpub.epa.gov/ecotox/index.cfm">EPA website</a> (see <code>get_ecotox_url()</code>).
When found it will attempt to download the zipped archive containing all required data. This data is then
extracted and a local copy of the database is build.
</p>
<p>Use '<code>suppressMessages()</code>' to suppress the progress report.
</p>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly.
</p>


<h3>Known issues</h3>

<p>On some machines this function fails to connect to the database download URL from the
<a href="https://cfpub.epa.gov/ecotox/index.cfm">EPA website</a> due to missing
SSL certificates. Unfortunately, there is no easy fix for this in this package. A work around is to download and
unzip the file manually using a different machine or browser that is less strict with SSL certificates. You can
then call <code>build_ecotox_sqlite()</code> and point the <code>source</code> location to the manually extracted zip
archive. For this purpose <code>get_ecotox_url()</code> can be used. Alternatively, one could try to call <code>download_ecotox_data()</code>
by setting <code>verify_ssl = FALSE</code>; but only do so when you trust the download URL from get_ecotox_URL().
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## This will download and build the database in your temp dir:
download_ecotox_data(tempdir())

## End(Not run)
</code></pre>


</div>