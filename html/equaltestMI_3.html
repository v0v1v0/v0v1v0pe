<div class="container">

<table style="width: 100%;"><tr>
<td>eqMI.main</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The main function to test measurement invariance</h2>

<h3>Description</h3>

<p>Test measurement invariance with equivalence testing, projection methods, and adjusted RMSEA cutoffs for two groups.
</p>


<h3>Usage</h3>

<pre><code class="language-R">eqMI.main(
  ...,
  output = "both",
  equivalence.test = TRUE,
  adjRMSEA = TRUE,
  projection = FALSE,
  bootstrap = FALSE,
  quiet = TRUE,
  B = 100,
  seed = 111
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The same arguments as for any lavaan model. See <code>lavaan::sem</code> for more information.
</p>
<p>Users must explicitly specify the name of the input elements for this function to catch. For example, specify 'data = HolzingerSwineford' instead just 'HolzingerSwineford'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>If the function prints out results of covariance structure, mean structure, or both. The value of <code>output</code> must be <code>mean</code>, <code>covariance</code>, or <code>both</code>. When the tests involve mean structure (<code>output = 'mean' or 'both'</code>), both the strong and the strict tests of measurement invariance will be conducted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>equivalence.test</code></td>
<td>
<p>If <code>equivalence.test=TRUE</code>, equivalence testing is used for examining all statistics. RMSEA together with conventional or adjusted cutoff values will be used to gauge the goodness of fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjRMSEA</code></td>
<td>
<p>If <code>adjRMSEA=TRUE</code>, adjusted RMSEA cutoff values are used for equivalence testing. See details in Yuan &amp; Chan (2016).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projection</code></td>
<td>
<p>If <code>projection=TRUE</code>, projection method is used to test the equality of latent factor means. The advantage of the projection method over conventional multiple-group SEM approach is that the test of latent factor means can be conducted even when the equality of intercepts do not hold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap</code></td>
<td>
<p>If <code>bootstrap=TRUE</code>, bootstrap is used to obtain empirical p-values for testing the equality of cross-group latent factor means.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>If <code>quiet=FALSE</code>, a summary is printed out containing an overview of the different models that are fitted, together with some model comparison tests and fit measures. The results of equivalence testing will also be printed if equivalence testing is used. If <code>quiet=TRUE</code> (default), no summary is printed but results will be stored in 'AnnotatedOutput'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>The number of boostrap samples used in bootstrap approach.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>The initial seed to generate bootstrap samples. Default at 111.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An all-in-one function with several added options to conduct a sequence of tests needed to evaluate MI. The chi-square statistics, except the one for testing the equality of covariance structure, are obtained based on <code>lavaan::sem</code> function. The test statistic of the covariance structure equality is obtained via the method of Lagrangian multiplier. Equivalence testing is enabled by setting <code>equivalence.test=TRUE</code> and this function will calculate T-size, RMSEA, and adjusted RMSEA cutoff values, and provide the goodness-of-fit.
</p>


<h3>Value</h3>

<p>A list is returned with:
</p>

<dl>
<dt><code>AnnotatedOutput</code></dt>
<dd>
<p>Annotated outout that will be printed to the console if quiet==FALSE.</p>
</dd>
<dt><code>eqMI.stat</code></dt>
<dd>
<p>Test statistics, degrees of freedom, p-values, ncp, T-sizes, RMSEAs, their cutoff values, and the goodness-of-fit under equivalence testing. A formated version of <code>eqMI.stat</code> will be printed if <code>quiet=FALSE</code>.</p>
</dd>
<dt><code>convention.sem</code></dt>
<dd>
<p>Results of conventional multiple-group SEM using Lavaan. Returned object of <code>eqMI.semtest</code>.</p>
</dd>
<dt><code>projection.res</code></dt>
<dd>
<p>Results of projection methods on tests of latent means. Returned object of <code>eqMI.projection</code> and <code>eqMI.bootstrap</code>.</p>
</dd>
</dl>
<h3>References</h3>

<p>Deng, L., &amp; Yuan, K. H. (2016). Comparing Latent Means Without Mean Structure Models: A Projection-Based Approach. Psychometrika, 81(3), 802-829. https://doi.org/10.1007/s11336-015-9491-8
</p>
<p>Jiang, G., Mai, Y., &amp; Yuan, K. H. (2017). Advances in Measurement Invariance and Mean Comparison of Latent Variables: Equivalence Testing and A Projection-Based Approach. Frontiers in Psychology, 8, 1823.
</p>
<p>Yuan, K. H., &amp; Chan, W. (2016). Measurement invariance via multigroup SEM: Issues and solutions with chi-square-difference tests. Psychological methods, 21(3), 405-426. https://doi.org/10.1037/met0000080
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(HolzingerSwineford)
semmodel&lt;-'
L1 =~ V1 + V2 + V3
L2 =~ V4 + V5 + V6
L3 =~ V7 + V8
L4 =~ V9 + V10 + V11
'
# If raw data are available;

test &lt;- eqMI.main(model = semmodel, data = HolzingerSwineford,
        group = "school", meanstructure = TRUE,
        output = 'both', quiet = FALSE,
        equivalence.test = TRUE, adjRMSEA = TRUE,
        projection = TRUE, bootstrap = FALSE)

# when only sample statistics are available;
# sample.cov need to be provided for tests of covariance structure;
# sample.mean need to be provided for tests of mean structure;

school1 &lt;- subset(HolzingerSwineford, school==1)[,-12]
school2 &lt;- subset(HolzingerSwineford, school==2)[,-12]
test &lt;- eqMI.main(model = semmodel,
        sample.nobs = c(nrow(school1), nrow(school2)),
        sample.cov = list(cov(school1), cov(school2)),
        sample.mean = list(colMeans(school1), colMeans(school2)),
        meanstructure = TRUE, output = 'both', quiet = FALSE,
        equivalence.test = TRUE, adjRMSEA = TRUE,
        projection = TRUE, bootstrap = FALSE)

</code></pre>


</div>