<div class="container">

<table style="width: 100%;"><tr>
<td>write_labelled_csv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write labelled data to file or export file to SPSS syntax.</h2>

<h3>Description</h3>


<ul>
<li>
<p><code>write_labelled_csv</code> and <code>read_labelled_csv</code> writes csv
file with labels. By default labels are stored in the commented lines at the
beginning of the file before the data part. <code>*_csv2</code> write and read data
with a semicolon separator and comma as decimal delimiter. <code>*_tab/*_tab2</code>
write and read data with 'tab' separator and "."/"," as decimal delimiter. 
</p>
</li>
<li>
<p><code>write_labelled_xlsx</code> and <code>read_labelled_xlsx</code> write and
read labelled 'xlsx' format. It is a simple Excel file with data and labels on
separate sheets. It can help you with labelled data exchange in the
corporate environment.
</p>
</li>
<li>
<p><code>write_labelled_fst</code> and <code>read_labelled_fst</code> write and read
labelled data in the 'fst' format. See <a href="https://www.fstpackage.org/">Fst Package</a>.
Data and labels are stored in the separate files. With 'fst' format you can
read and write a huge amount of data very quickly.
</p>
</li>
<li>
<p>write_labelled_spss write 'csv' file with SPSS syntax for reading it.
You can use it for the data exchange with SPSS.
</p>
</li>
<li>
<p><code>create_dictionary</code> and <code>apply_dictionary</code> make data.frame
with dictionary, e. g. variable and value labels for each variable. See
format description in the 'Details' section.
</p>
</li>
<li>
<p><code>write_labels</code> and <code>write_labels_spss</code> Write R code and
SPSS syntax for labelling data. It allows to extract labels from *.sav files
that come without accompanying syntax. 
</p>
</li>
<li>
<p><code>old_write_labelled_csv</code> and <code>old_read_labelled_csv</code> Read
and write labelled 'csv' in format of the 'expss' version before 0.9.0.

</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">write_labelled_csv(
  x,
  filename,
  remove_new_lines = TRUE,
  single_file = TRUE,
  ...
)

write_labelled_csv2(
  x,
  filename,
  remove_new_lines = TRUE,
  single_file = TRUE,
  ...
)

write_labelled_tab(
  x,
  filename,
  remove_new_lines = TRUE,
  single_file = TRUE,
  ...
)

write_labelled_tab2(
  x,
  filename,
  remove_new_lines = TRUE,
  single_file = TRUE,
  ...
)

write_labelled_xlsx(
  x,
  filename,
  data_sheet = "data",
  dict_sheet = "dictionary",
  remove_repeated = FALSE,
  use_references = TRUE
)

write_labelled_fst(x, filename, ...)

read_labelled_csv(filename, undouble_quotes = TRUE, ...)

read_labelled_csv2(filename, undouble_quotes = TRUE, ...)

read_labelled_tab(filename, undouble_quotes = TRUE, ...)

read_labelled_tab2(filename, undouble_quotes = TRUE, ...)

read_labelled_xlsx(filename, data_sheet = 1, dict_sheet = "dictionary")

read_labelled_fst(filename, ...)

write_labelled_spss(
  x,
  filename,
  fileEncoding = "",
  remove_new_lines = TRUE,
  ...
)

write_labels_spss(x, filename)

write_labels(x, filename, fileEncoding = "")

create_dictionary(x, remove_repeated = FALSE, use_references = TRUE)

apply_dictionary(x, dict)

old_write_labelled_csv(
  x,
  filename,
  fileEncoding = "",
  remove_new_lines = TRUE,
  ...
)

old_read_labelled_csv(filename, fileEncoding = "", undouble_quotes = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame to be written/data.frame whose labels to be written</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>the name of the file which the data are to be read from/write to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_new_lines</code></td>
<td>
<p>A logical indicating should we replace new lines with spaces in
the character variables. TRUE by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_file</code></td>
<td>
<p>logical. TRUE by default. Should we write labels into the
same file as data? If it is FALSE dictionary will be written in the
separate file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments for
fwrite/fread, e. g. column separator,
decimal separator, encoding and etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_sheet</code></td>
<td>
<p>character "data" by default. Where data will be placed in the '*.xlsx' file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dict_sheet</code></td>
<td>
<p>character "dictionary" by default. Where dictionary will be placed in the '*.xlsx' file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_repeated</code></td>
<td>
<p>logical. FALSE by default. If TRUE then we remove
repeated variable names. It makes a dictionary to look nicer for humans but
less convenient for usage.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_references</code></td>
<td>
<p>logical. When TRUE (default) then if the variable has
the same value labels as the previous variable, we use reference to this
variable. It makes dictionary significantly more compact for datasets
with many variables with the same value labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>undouble_quotes</code></td>
<td>
<p>A logical indicating should we undouble quotes which
were escaped by doubling. TRUE by default. Argument
will be removed when data.table issue #1109 will be fixed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileEncoding</code></td>
<td>
<p>character string: if non-empty declares the encoding to 
be used on a file (not a connection) so the character data can be 
re-encoded as they are written. Used for writing dictionary. See
file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dict</code></td>
<td>
<p>data.frame with labels - a result of <code>create_dictionary</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Dictionary is a data.frame with the following columns:
</p>

<ul>
<li>
<p>variable variable name in the data set. It can be omitted
(<code>NA</code>). In this case name from the previous row will be taken.
</p>
</li>
<li>
<p>value code for label in the column <code>'label'</code>.
</p>
</li>
<li>
<p>label in most cases it is value label but its meaning can be changed
by the column <code>'meta'</code>.
</p>
</li>
<li>
<p>meta if it is NA then we have value label in the <code>'label'</code>
column. If it is <code>'varlab'</code>, then there is a variable label in the
<code>'label'</code> column and column <code>'value'</code> is ignored. If it is
<code>'reference'</code>, then there is a variable name in the <code>'label'</code>
column and we use value labels from this variable, column <code>'value'</code> is
ignored.
</p>
</li>
</ul>
<h3>Value</h3>

<p>Functions for writing invisibly return NULL. Functions for reading
return labelled data.frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(mtcars)
mtcars = mtcars %&gt;% 
    apply_labels(
        mpg = "Miles/(US) gallon",
        cyl = "Number of cylinders",
        disp = "Displacement (cu.in.)",
        hp = "Gross horsepower",
        drat = "Rear axle ratio",
        wt = "Weight (lb/1000)",
        qsec = "1/4 mile time",
        vs = "Engine",
        vs = c("V-engine" = 0, 
                "Straight engine" = 1),
        am = "Transmission",
        am = c(automatic = 0, 
                manual=1),
        gear = "Number of forward gears",
        carb = "Number of carburetors"
    )

write_labelled_csv(mtcars, "mtcars.csv")
new_mtcars = read_labelled_csv("mtcars.csv")
str(new_mtcars)

# identically, for xlsx
write_labelled_xlsx(mtcars, "mtcars.xlsx")
new_mtcars = read_labelled_xlsx("mtcars.xlsx")
str(new_mtcars)

# to SPSS syntax
write_labelled_spss(mtcars, "mtcars.csv")


## End(Not run)
</code></pre>


</div>