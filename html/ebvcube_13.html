<div class="container">

<table style="width: 100%;"><tr>
<td>ebv_read_bb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read subset (bounding box) of one datacube of an EBV netCDF</h2>

<h3>Description</h3>

<p>Read a subset of one or more layers from one datacube of the
NetCDF file. Subset definition by a bounding box.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ebv_read_bb(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  bb,
  outputpath = NULL,
  epsg = 4326,
  scenario = NULL,
  metric = NULL,
  overwrite = FALSE,
  ignore_RAM = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code>ebv_datacubepaths()</code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timestep</code></td>
<td>
<p>Integer or character. Select one or several timestep(s).
Either provide an integer value or list of values that refer(s) to the
index of the timestep(s) (minimum value: 1) or provide a date or list of
dates in ISO format, such as '2015-01-01'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bb</code></td>
<td>
<p>Integer Vector. Definition of subset by bounding box: c(xmin,
xmax, ymin, ymax).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputpath</code></td>
<td>
<p>Character. Default: NULL, returns the data as a SpatRaster
object in memory. Optional: set path to write subset as GeoTiff on disk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsg</code></td>
<td>
<p>Integer. Default: 4326 (WGS84). Change accordingly if your
bounding box coordinates are based on a different coordinate reference
system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code>ebv_datacubepaths()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code>ebv_datacubepaths()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the
outputfile defined by 'outputpath'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a SpatRaster object if no outputpath is given. Otherwise the
subset is written onto the disk and the outputpath is returned.
</p>


<h3>Note</h3>

<p>In case the epsg of the Bounding Box and the netCDF differ, the data is
returned based on the epsg of the netCDF Dataset.
</p>


<h3>See Also</h3>

<p><code>ebv_read_shp()</code> for subsetting via shapefile.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

#set outputpath
out &lt;- file.path(system.file(package='ebvcube'),"extdata","subset_bb.tif")
#define two different bounding boxes based on different EPSG codes
bb_wgs84 &lt;- c(-26, 64, 30, 38)
bb_utm32 &lt;- c(-2383703, 5532302, 3643854, 4564646)


## Not run: 
#read bb (based on EPSG 4326) - return SpatRaster
cSAR_subset &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                             entity = 1, timestep = 1:3, bb = bb_wgs84)

#read bb (based on EPSG 4326) - write to GeoTiff
path &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                    entity = 1, timestep = 1, bb = bb_wgs84,
                    outputpath = out, overwrite = TRUE)

#read bb (based on ESRI 54009) - write to GeoTiff
path  &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                     entity = 1, timestep = 1:2, bb = bb_utm32,
                     epsg = 32632, outputpath = out, overwrite = TRUE)

## End(Not run)
</code></pre>


</div>