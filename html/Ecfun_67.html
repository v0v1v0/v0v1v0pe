<div class="container">

<table style="width: 100%;"><tr>
<td>read.transpose</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Read a data table in transpose form
</h2>

<h3>Description</h3>

<p>Read a text (e.g., csv) file, find rows 
with more than 3 <code>sep</code> characters.  
Parse the initial contiguous block of 
those into a <code>matrix</code>.  Add 
<code>attributes</code> <code>headers</code>, 
<code>footers</code>, and a <code>summary</code>.
</p>
<p>The initial application for this function 
is to read "Table 6.16.  Income and 
employment by industry" in the National 
Income and Product Account (NIPA) tables 
published by the Bureau of Economic Analysis 
(BEA) of the United States Department of 
Commerce.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read.transpose(file, header=TRUE, sep=',',
               na.strings='---', ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>

<p>the name of a file from which the data 
are to be read.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>

<p>Logical:  Is the second column of the 
identified data matrix to be 
interpreted as variable names?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>

<p>The field space separator character.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.strings</code></td>
<td>

<p>character string(s) that translate into NA
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>optional arguments for <code>strsplit</code>
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>1.  <code>txt &lt;- readLines(file)</code>
</p>
<p>2.  Split into fields.
</p>
<p>3.  Identify headers, Data, footers.
</p>
<p>4.  Recombine the second component of each 
Data row if necessary so all have the same 
number of fields.
</p>
<p>5.  Extract variable names
</p>
<p>6.  Numbers?
</p>
<p>7. return the transpose
</p>


<h3>Value</h3>

<p>A matrix of the transpose of the rows with the 
max number of fields with attributes 
<code>headers</code>, <code>footers</code>, 
<code>other</code>, and <code>summary</code>.  If this
matrix can be coerced to numeric with no 
<code>NAs</code>, it will be.  Otherwise, it will be
left as character.
</p>


<h3>Author(s)</h3>

<p>Spencer Graves</p>


<h3>References</h3>

<p><a href="https://www.bea.gov">
Table 6.16.  Income and employment by industry 
in the National Income and Product Account 
(NIPA) tables published by the Bureau of Economic
Analysis (BEA) of the United States Department 
of Commerce.</a>  As of February 2013, there were 
4 such tables available:  Table 6.16A, 6.16B, 
6.16C and 6.16D.  Each of the last three are
available in annual and quarterly summaries. 
The <code>USFinanceIndustry</code> data combined the
first 4 rows of the 4 annual summary tables.
</p>
<p>NOTE:  The structure of the BEA web site 
seems to have changes between 2013 and 2022.  
As of 2022-07-01 it does not seem easy to 
find these tables at the BEA website.  
</p>
<p>Line 5 in the sample tables saved in 2013 
contained "a non-breaking space in Latin-1", 
which was not a valid code in UTF-8 and 
was rejected by a development version of R.
Since it wasn't easy to update those tables, 
the "non-breaking spaces" were replaced 
with " ".  
</p>


<h3>See Also</h3>

<p><code>read.table</code>
<code>readLines</code>
<code>strsplit</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#  Find demoFiles/*.csv
demoDir &lt;- system.file('demoFiles', package='Ecdat')
(demoCsv &lt;- dir(demoDir, pattern='csv$', full.names=TRUE))

# Use the fourth example
# to ensure the code will handle commas in a name
# and NAs
nipa6.16D &lt;- read.transpose(demoCsv[4])
str(nipa6.16D)
</code></pre>


</div>