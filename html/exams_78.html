<div class="container">

<table style="width: 100%;"><tr>
<td>stresstest_exercise</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Stress Testing Exercises
</h2>

<h3>Description</h3>

<p>In order to check the correct behavior of an exercise it is compiled several times.
In each iteration the objects created by the exercise are collected and its values
can be inspected.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## Stresstest function.
stresstest_exercise(file, n = 100, verbose = TRUE, seeds = NULL,
  stop_on_error = length(as.character(unlist(file))) &lt; 2, ...)

## Plotting stresstest results.
## S3 method for class 'stress'
plot(x, type = c("overview", "solution", "rank", "runtime"),
  threshold = NULL, variables = NULL,
  spar = TRUE, ask = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>character. A specification of an exercise file. If multiple files
should be tested, argument <code>file</code> can also be a vector, matrix or list of
files. The latter case sets argument <code>plot = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer. The number of replications.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical. Should the seeds used for compiling the exercise
be prompted on the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seeds</code></td>
<td>
<p>The seeds that should be used when compiling the exercise. The
default is <code>seeds = 1:n</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop_on_error</code></td>
<td>
<p>logical. Should the function stop on error or return
the the seed, the file name and the error message. Useful when testing
a number of exercises.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object returned from function <code>stresstest_exercise</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character. <code>type == "overview"</code> plots the basic overview, i.e, the runtimes,
numeric solutions, position/number/rank of correct solution(s), if available.
If <code>type == "solution"</code>, the numeric solutions
are plotted against all input parameters stored in the <code>objects</code> element of <code>x</code>.
<code>type == "rank"</code> draws <code>spineplot</code>s of ranks
vs. input parameters stored in <code>objects</code>. <code>type == "runtime"</code> plots the compiling
runtimes vs. <code>objects</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>numeric. Can be used to set a threshold, e.g., for numeric solutions a factor
is created, <code>factor(solution &lt;= threshold)</code>, that is used on the y-axis of a
<code>spineplot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>character. The variables that should be used from the <code>objects</code> for
plotting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spar</code></td>
<td>
<p>logical. Should graphical parameters be set or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p>logical. For multiple plots, should the user be asked to hit the return key to see the
next plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>xexams</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In order to check the correct behavior of an exercise function <code>stresstest_exercise</code> runs
<code>xexams</code> <code>n</code> times using different seeds. If an error occurs when compiling,
the error can be reproduced by setting the seed that is prompted at the console and create
the exercise again, e.g., with <code>exams2html</code>. This way errors can be detected
systematically.
</p>
<p>All objects with length 1, which are created by the exercise, are collected in a data frame.
These objects are assumed to be input parameters that control the output of the exercise. This
can be used to detect certain input values that, e.g., lead to very long run times, or
drive the number of correct answers in multiple choice exercises, etc.
</p>
<p>For single and multiple choice type question the position(s) of the correct solution(s) is
returned. For single choice questions that are created from a numeric version, e.g., using
function <code>num_to_schoice</code> the answers are again converted to numeric and the rank
of the correct solution is reported. The rank is sometimes heavily driven by some input
parameters, e.g., the correct solution is always the largest or the smallest.
For non-numeric choice questions, the rank is based on the lexicographical order of
the answerlist.
</p>


<h3>Value</h3>

<p>Function <code>stresstest_exercise</code> returns an object of class <code>"stress"</code> (a named list) with
the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>seeds</code></td>
<td>
<p>The seeds that where used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runtime</code></td>
<td>
<p>Compiling times for each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>objects</code></td>
<td>
<p>A data frame of length 1 objects that are created by the exercise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solution</code></td>
<td>
<p>The numeric solution, availability is depending on the type of exercise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>position</code></td>
<td>
<p>A matrix indicating the position of correct solutions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank</code></td>
<td>
<p>The rank of the correct solution, only available for choice exercises.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ntrue</code></td>
<td>
<p>The number of correct answers in multiple choice type questions.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>xexams</code>, <code>num_to_schoice</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: ## Stress testing.
t1 &lt;- stresstest_exercise("tstat.Rmd", n = 100)
t2 &lt;- stresstest_exercise("tstat2.Rmd", n = 100)

## Plotting.
plot(t1, type = "overview")
plot(t1, type = "solution")
plot(t1, type = "solution", threshold = 30)
plot(t2, type = "rank")
plot(t2, type = "runtime")

## For custom inspection, object can be
## transformed to a data.frame.
head(as.data.frame(t2))

## Multiple testing.
files &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  "scatterplot.Rmd",
  "relfreq.Rmd"
)
t3 &lt;- stresstest_exercise(files, n = 100)
plot(t3)

## End(Not run)
</code></pre>


</div>