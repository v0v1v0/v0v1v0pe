<div class="container">

<table style="width: 100%;"><tr>
<td>predIntNparConfLevel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Confidence Level for Nonparametric Prediction Interval for Continuous Distribution
</h2>

<h3>Description</h3>

<p>Compute the confidence level associated with a nonparametric prediction interval 
that should contain at least <code class="reqn">k</code> out of the next <code class="reqn">m</code> future observations 
for a continuous distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  predIntNparConfLevel(n, k = m, m = 1, lpl.rank = ifelse(pi.type == "upper", 0, 1), 
    n.plus.one.minus.upl.rank = ifelse(pi.type == "lower", 0, 1), 
    pi.type = "two.sided")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>

<p>vector of positive integers specifying the sample sizes.  
Missing (<code>NA</code>), undefined (<code>NaN</code>), and infinite (<code>Inf</code>, <code>-Inf</code>) 
values are not allowed.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>

<p>vector of positive integers specifying the minimum number of future 
observations out of <code>m</code> that should be contained in the prediction interval.  
The default value is <code>k=m</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>

<p>vector of positive integers specifying the number of future observations.  
The default value is <code>m=1</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpl.rank</code></td>
<td>

<p>vector of positive integers indicating the rank of the order statistic to use for 
the lower bound of the prediction interval.  If <code>pi.type="two-sided"</code> or <br><code>pi.type="lower"</code>, the default value is <code>lpl.rank=1</code> (implying the 
minimum value is used as the lower bound of the prediction interval).  
If <code>pi.type="upper"</code>, this argument is set equal to <code>0</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.plus.one.minus.upl.rank</code></td>
<td>

<p>vector of positive integers related to the rank of the order statistic to use for 
the upper bound of the prediction interval.  A value of 
<code>n.plus.one.minus.upl.rank=1</code> (the default) means use the 
first largest value, and in general a value of <br><code>n.plus.one.minus.upl.rank=</code><code class="reqn">i</code> means use the <code class="reqn">i</code>'th largest value.  
If <br><code>pi.type="lower"</code>, this argument is set equal to <code>0</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi.type</code></td>
<td>

<p>character string indicating what kind of prediction interval to compute.  
The possible values are <code>"two.sided"</code> (the default), <code>"lower"</code>, and 
<code>"upper"</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the arguments <code>n</code>, <code>k</code>, <code>m</code>, <code>lpl.rank</code>, and 
<code>n.plus.one.minus.upl.rank</code> are not all the same length, they are replicated 
to be the same length as the length of the longest argument.
</p>
<p>The help file for <code>predIntNpar</code> explains how nonparametric prediction  
intervals are constructed and how the confidence level 
associated with the prediction interval is computed based on specified values 
for the sample size and the ranks of the order statistics used for 
the bounds of the prediction interval. 
</p>


<h3>Value</h3>

<p>vector of values between 0 and 1 indicating the confidence level associated with 
the specified nonparametric prediction interval.
</p>


<h3>Note</h3>

<p>See the help file for <code>predIntNpar</code>.
</p>


<h3>Author(s)</h3>

<p>Steven P. Millard (<a href="mailto:EnvStats@ProbStatInfo.com">EnvStats@ProbStatInfo.com</a>)
</p>


<h3>References</h3>

<p>See the help file for <code>predIntNpar</code>.
</p>


<h3>See Also</h3>

<p><code>predIntNpar</code>, <code>predIntNparN</code>, 
<code>plotPredIntNparDesign</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  # Look at how the confidence level of a nonparametric prediction interval 
  # increases with increasing sample size:

  seq(5, 25, by = 5) 
  #[1] 5 10 15 20 25 

  round(predIntNparConfLevel(n = seq(5, 25, by = 5)), 2) 
  #[1] 0.67 0.82 0.87 0.90 0.92

  #---------

  # Look at how the confidence level of a nonparametric prediction interval 
  # decreases as the number of future observations increases:

  round(predIntNparConfLevel(n = 10, m = 1:5), 2) 
  #[1] 0.82 0.68 0.58 0.49 0.43

  #----------

  # Look at how the confidence level of a nonparametric prediction interval 
  # decreases with minimum number of observations that must be contained within 
  # the interval (k):

  round(predIntNparConfLevel(n = 10, k = 1:5, m = 5), 2) 
  #[1] 1.00 0.98 0.92 0.76 0.43

  #----------

  # Look at how the confidence level of a nonparametric prediction interval 
  # decreases with the rank of the lower prediction limit:

  round(predIntNparConfLevel(n = 10, lpl.rank = 1:5), 2) 
  #[1] 0.82 0.73 0.64 0.55 0.45

  #==========

  # Example 18-3 of USEPA (2009, p.18-19) shows how to construct 
  # a one-sided upper nonparametric prediction interval for the next 
  # 4 future observations of trichloroethylene (TCE) at a downgradient well.  
  # The data for this example are stored in EPA.09.Ex.18.3.TCE.df.  
  # There are 6 monthly observations of TCE (ppb) at 3 background wells, 
  # and 4 monthly observations of TCE at a compliance well.

  # Look at the data
  #-----------------

  EPA.09.Ex.18.3.TCE.df

  #   Month Well  Well.type TCE.ppb.orig TCE.ppb Censored
  #1      1 BW-1 Background           &lt;5     5.0     TRUE
  #2      2 BW-1 Background           &lt;5     5.0     TRUE
  #3      3 BW-1 Background            8     8.0    FALSE
  #...
  #22     4 CW-4 Compliance           &lt;5     5.0     TRUE
  #23     5 CW-4 Compliance            8     8.0    FALSE
  #24     6 CW-4 Compliance           14    14.0    FALSE


  longToWide(EPA.09.Ex.18.3.TCE.df, "TCE.ppb.orig", "Month", "Well", 
    paste.row.name = TRUE)

  #        BW-1 BW-2 BW-3 CW-4
  #Month.1   &lt;5    7   &lt;5     
  #Month.2   &lt;5  6.5   &lt;5     
  #Month.3    8   &lt;5 10.5  7.5
  #Month.4   &lt;5    6   &lt;5   &lt;5
  #Month.5    9   12   &lt;5    8
  #Month.6   10   &lt;5    9   14


  # If we construct the prediction limit based on the background well
  # data using the maximum value as the upper prediction limit, 
  # the associated confidence level is only 82%.  
  #-----------------------------------------------------------------

  predIntNparConfLevel(n = 18, m = 4, pi.type = "upper")
  #[1] 0.8181818

  # We would have to collect an additional 18 observations to achieve a 
  # confidence level of at least 90%:

  predIntNparN(m = 4, pi.type = "upper", conf.level = 0.9)
  #[1] 36

  predIntNparConfLevel(n = 36, m = 4, pi.type = "upper")
  #[1] 0.9
</code></pre>


</div>