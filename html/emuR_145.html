<div class="container">

<table style="width: 100%;"><tr>
<td>get_trackdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get trackdata from loaded emuDB</h2>

<h3>Description</h3>

<p>Extract trackdata information from a loaded emuDB that 
corresponds to the entries in a segment list.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_trackdata(
  emuDBhandle,
  seglist = NULL,
  ssffTrackName = NULL,
  cut = NULL,
  npoints = NULL,
  onTheFlyFunctionName = NULL,
  onTheFlyParams = NULL,
  onTheFlyOptLogFilePath = NULL,
  onTheFlyFunction = NULL,
  resultType = "tibble",
  consistentOutputType = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>emuDBhandle</code></td>
<td>
<p>emuDB handle as returned by <code>load_emuDB</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seglist</code></td>
<td>
<p><code>tibble</code>, <code>emuRsegs</code> or <code>emusegs</code> 
object obtained by <code>query</code>ing a loaded emuDB</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssffTrackName</code></td>
<td>
<p>The name of track that one wishes to extract (see 
<code>list_ssffTrackDefinitions</code> for the defined ssffTracks of the 
emuDB). If the parameter <code>onTheFlyFunctionName</code> is set, then 
this corresponds to the column name af the AsspDataObj (see
<code>wrassp::wrasspOutputInfos[[onTheFlyFunctionName]]$tracks</code> and 
<code>wrasspOutputInfos</code> - NOTE: <code>library(wrassp)</code> might be 
necessary to access the <code>wrasspOutputInfos</code> object without the <code>wrassp::</code> prefix). 
If the parameter <code>onTheFlyFunctionName</code> is set and this one isn't, then per default
the first track listed in the <code>wrassp::wrasspOutputInfos</code> is chosen 
(<code>wrassp::wrasspOutputInfos[[onTheFlyFunctionName]]$tracks[1]</code>).
</p>
<p><code>get_trackdata</code> has so called constant track names that are always available 
for every emuDB. The constant track names are:
</p>

<ul><li>
<p>"MEDIAFILE_SAMPLES": refers to the audio sample values specified 
by the "mediafileExtension" entry of the DBconfig.json
</p>
</li></ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cut</code></td>
<td>
<p>An optional cut time for segment data, ranges between 
0 and 1, a value of 0.5 will extract data only at the segment midpoint.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npoints</code></td>
<td>
<p>An optional number of points to retrieve for each segment or event. 
For segments this requires the <code>cut</code> parameter to be set; if this is the 
case, then data is extracted around the resulting cut time. 
For events data is extracted around the event time. If npoints is an odd number, the 
samples are centered around the cut-time-sample; if not, they are skewed to the
right by one sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onTheFlyFunctionName</code></td>
<td>
<p>Name of wrassp function that will perform the on-the-fly 
calculation (see <code>?wrassp</code> for a list of all the signal processing functions wrassp provides)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onTheFlyParams</code></td>
<td>
<p>A <code>pairlist</code> of parameters that will be given to the function 
passed in by the <code>onTheFlyFunctionName</code> parameter. This list can easily be 
generated by applying the <code>formals</code> function to the on-the-fly function name and then setting the according 
parameter one wishes to change.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onTheFlyOptLogFilePath</code></td>
<td>
<p>Path to optional log file for on-the-fly function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onTheFlyFunction</code></td>
<td>
<p>pass in a function pointer. This function will be called with the path to the
current media file. It is required that the function returns a tibble/data.frame like object that contains
a column called <code>frame_time</code> that specifies the time point of each row. <code>get_trackdata</code> will then
extract the rows belonging to the current segment. This allows users to code their own function to be used with
<code>get_trackdata</code> and allows for most data formats to be used within an emuDB.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resultType</code></td>
<td>
<p>Specify class of returned object. Either <code>"emuRtrackdata"</code>, 
<code>"trackdata"</code> or <code>"tibble"</code> == the default  (see <code>trackdata</code>, <code>emuRtrackdata</code> 
and <code>tibble</code> for details about these objects).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>consistentOutputType</code></td>
<td>
<p>Prevent converting the output object to a <code>data.frame</code> 
depending on the <code>npoint</code> and <code>cut</code> arguments (only applies to output 
type "trackdata"). Set to <code>FALSE</code> if the following legacy <code>emu.track</code> output 
conversion behaviour is desired: If the <code>cut</code> parameter is not set (the default) an 
object of type <code>trackdata</code> is returned. If <code>cut</code> is set and <code>npoints</code> 
is not, or the seglist is of type event and npoints is not set, a <code>data.frame</code> is 
returned (see the <code>consistentOutputType</code> to change this behaviour).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Show progress bars and further information</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function utilizes the wrassp package for signal processing and 
SSFF/audio file handling. It reads time relevant data from a given 
segment list (<code>emuRsegs</code> or <code>emusegs</code>), extracts the 
specified trackdata and places it into a 
trackdata object (analogous to the deprecated <code>emu.track</code>). This function
replaces the deprecated <code>emu.track</code> function. Note that an warning is issued
if the bundles in the <code>emuRsegs</code> or <code>emusegs</code> object 
have in-homogeneous sampling rates as this could lead to inconsistent/erroneous
<code>trackdata</code>, <code>emuRtrackdata</code> or <code>tibble</code> result objects. For 
more information on the structural elements of an emuDB 
see the signal data extraction chapter of the EMU-SDMS manual 
(<a href="https://ips-lmu.github.io/The-EMU-SDMS-Manual/chap-sigDataExtr.html">https://ips-lmu.github.io/The-EMU-SDMS-Manual/chap-sigDataExtr.html</a>).
</p>


<h3>Value</h3>

<p>object of type specified with <code>resultType</code>
</p>


<h3>See Also</h3>

<p><code>formals</code>, <code>wrasspOutputInfos</code>, 
<code>trackdata</code>, <code>emuRtrackdata</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

##################################
# prerequisite: loaded ae emuDB 
# (see ?load_emuDB for more information)

# query loaded "ae" emuDB for all "i:" segments of the "Phonetic" level
sl = query(emuDBhandle = ae, 
           query = "Phonetic == i:")

# get the corresponding formant trackdata
td = get_trackdata(emuDBhandle = ae, 
                   seglist = sl, 
                   ssffTrackName = "fm")

# get the corresponding F0 trackdata
# as there is no F0 ssffTrack defined in the "ae" emuDB we will 
# calculate the necessary values on-the-fly
td = get_trackdata(emuDBhandle = ae, 
                   seglist = sl, 
                   onTheFlyFunctionName = "ksvF0")
                   

## End(Not run)

</code></pre>


</div>