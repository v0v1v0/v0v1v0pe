<div class="container">

<table style="width: 100%;"><tr>
<td>wf_archetype</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates an archetype function</h2>

<h3>Description</h3>

<p>Creates a universal MARS / CDS formatting function, in ways
similar to <code>wf_modify_request()</code> but the added advantage
that you could code for the use of dynamic changes in the
parameters provided to the resulting custom function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">wf_archetype(request, dynamic_fields)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>request</code></td>
<td>
<p>a MARS or CDS request as an R list object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dynamic_fields</code></td>
<td>
<p>character vector of fields that could be changed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Contrary to a simple replacement as in <code>wf_modify_request()</code> the
generated functions are considered custom user written. Given the potential
for complex formulations and formatting commands NO SUPPORT for the
resulting functions can be provided. Only the generation of a valid function
will be guaranteed and tested for.
</p>


<h3>Value</h3>

<p>a function that takes 'dynamic_fields' as arguments and returns a
request as an R list object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

ERA &lt;- wf_archetype(
  request = list(
    dataset_short_name = "reanalysis-era5-pressure-levels",
    product_type = "reanalysis",
    variable = "geopotential",
    year = "2024",
    month = "03",
    day = "01",
    time = "13:00",
    pressure_level = "1000",
    data_format = "grib",
    target = "download.grib"
  ),
    dynamic_fields = c("year", "day", "target")
  )
# print output of the function with below (new) parameters
str(ERA(2021, 3, "new_download.grip"))


## End(Not run)
</code></pre>


</div>