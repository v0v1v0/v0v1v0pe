<div class="container">

<table style="width: 100%;"><tr>
<td>evalThreshold</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Weighted thresholds for predictions</h2>

<h3>Description</h3>

<p>This function is similar to the <code>threshold</code> function in the <span class="pkg">predicts</span> package, which calculates thresholds to create binary predictions from continuous values. However, unlike that function, it allows the user to specify weights for presences and absence/background predictions. The output will thus be the threshold that best matches the specified criterion taking into account the relative weights of the input values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">evalThreshold(
  pres,
  contrast,
  presWeight = rep(1, length(pres)),
  contrastWeight = rep(1, length(contrast)),
  at = c("msss", "mdss", "minPres", "prevalence", "sensitivity"),
  sensitivity = 0.9,
  thresholds = seq(0, 1, by = 0.001),
  na.rm = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pres</code></td>
<td>
<p>Numeric vector. Predicted values at test presences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrast</code></td>
<td>
<p>Numeric vector. Predicted values at background/absence sites.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>presWeight</code></td>
<td>
<p>Numeric vector same length as <code>pres</code>. Relative weights of presence sites. The default is to assign each presence a weight of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrastWeight</code></td>
<td>
<p>Numeric vector same length as <code>contrast</code>. Relative weights of background sites. The default is to assign each presence a weight of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at</code></td>
<td>
<p>Character or character vector, name(s) of threshold(s) to calculate. The default is to calculate them all.
</p>

<ul>
<li> <p><code>'msss'</code>: Threshold that the maximizes the sum of sensitivity and specificity.
</p>
</li>
<li> <p><code>'mdss'</code>: Threshold that minimizes the difference between sensitivity and specificity.
</p>
</li>
<li> <p><code>'minPres'</code>: Minimum prediction across presences. This threshold is not weighted.
</p>
</li>
<li> <p><code>'prevalence'</code>: Prevalence of presences (sum(presence weights) / sum(presence weights + background weights))'
</p>
</li>
<li> <p><code>'sensitivity'</code>: Threshold that most closely returns the sensitivity specified by <code>sensitivity</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensitivity</code></td>
<td>
<p>Value of specificity to match (used only if <code>at</code> contains <code>'sensitivity'</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresholds</code></td>
<td>
<p>Numeric vector. Thresholds at which to calculate the sum of sensitivity and specificity. The default evaluates all values from 0 to 1 in steps of 0.01.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Logical. If <code>TRUE</code> then remove any presences and associated weights and background predictions and associated weights with <code>NA</code>s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments (unused).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Named numeric vector.
Fielding, A.H. and J.F. Bell. 1997. A review of methods for the assessment of prediction errors in conservation presence/absence models. <em>Environmental Conservation</em> 24:38-49. <a href="https://doi.org/10.1017/S0376892997000088">doi:10.1017/S0376892997000088</a>
</p>


<h3>See Also</h3>

<p><code>threshold</code>, <code>pa_evaluate</code>, <code>evalAUC</code>, <code>evalMultiAUC</code>, <code>evalContBoyce</code>, <code>evalThresholdStats</code>, <code>evalTjursR2</code>, <code>evalTSS</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)

# set of bad and good predictions at presences
bad &lt;- runif(100)^2
good &lt;- runif(100)^0.1
hist(good, breaks=seq(0, 1, by=0.1), border='green', main='Presences')
hist(bad, breaks=seq(0, 1, by=0.1), border='red', add=TRUE)
pres &lt;- c(bad, good)
contrast &lt;- runif(1000)
evalThreshold(pres, contrast)

# upweight bad predictions
presWeight &lt;- c(rep(1, 100), rep(0.1, 100))
evalThreshold(pres, contrast, presWeight=presWeight)

# upweight good predictions
presWeight &lt;- c(rep(0.1, 100), rep(1, 100))
evalThreshold(pres, contrast, presWeight=presWeight)
</code></pre>


</div>