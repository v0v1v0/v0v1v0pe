<div class="container">

<table style="width: 100%;"><tr>
<td>recode_missings</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Recode pre-defined missing values as NA</h2>

<h3>Description</h3>

<p>This function is not needed any more, please see the details section.
</p>


<h3>Usage</h3>

<pre><code class="language-R">recode_missings(ess_data, missing_codes)

recode_numeric_missing(x, missing_codes)

recode_strings_missing(y, missing_codes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ess_data</code></td>
<td>
<p>data frame or <code>tibble</code> with data from the
European Social Survey. This data frame should come either
from <code>import_rounds</code>, <code>import_country</code> or read with
<code>read_dta</code> or <code>read_spss</code>. This is the case because it
identifies missing values using <code>labelled</code> classes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_codes</code></td>
<td>
<p>a character vector with values 'Not applicable',
'Refusal', 'Don't Know', 'No answer' or 'Not available'. By default
all values are chosen. Note that the wording is case sensitive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>labelled</code> numeric</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a character vector</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Data from the European Social Survey is always accompanied by a script
that recodes the categories 'Not applicable', 'Refusal', 'Don't Know',
'No answer' and 'Not available' to missing. This function recodes
these categories to NA
</p>
<p>The European Social Survey now provides these values recoded automatically
in Stata data files. These missing categories are now read as missing values
by <code>read_dta</code>, reading the missing categories correctly from Stata.For an example on how these values are coded, see <a href="https://github.com/ropensci/essurvey/issues/35">here</a>.
</p>
<p>Old details:
</p>
<p>When downloading data directly from the European Social Survey's website,
the downloaded .zip file contains a script that recodes some categories
as missings in Stata and SPSS formats. 
</p>
<p>For recoding numeric variables <code>recode_numeric_missings</code>
uses the labels provided by the <code>labelled</code>
class to delete the labels matched in <code>missing_codes</code>. For the
character variables matching is done with the underlying number assigned to
each category, namely 6, 7, 8, 9 and 9 for 'Not applicable', Refusal',
'Don't Know', No answer' and 'Not available'.
</p>
<p>The functions are a direct translation of the Stata script that comes
along when downloading one of the rounds. The Stata script is the same
for all rounds and all countries, meaning that these functions work
for all rounds.
</p>


<h3>Value</h3>

<p>The same data frame or <code>tibble</code> but with values 'Not applicable',
'Refusal', 'Don't Know', 'No answer' and 'Not available' recoded
as NA.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
seven &lt;- import_rounds(7, your_email)

attr(seven$tvtot, "labels")
mean(seven$tvtot, na.rm = TRUE)

names(table(seven$lnghom1))
# First three are actually missing values

seven_recoded &lt;- recode_missings(seven)

attr(seven_recoded$tvtot, "labels")
# All missings have been removed
mean(seven_recoded$tvtot, na.rm = TRUE)

names(table(seven_recoded$lnghom1))
# All missings have been removed

# If you want to operate on specific variables
# you can use other recode_*_missing 

seven$tvtot &lt;- recode_numeric_missing(seven$tvtot)

# Recode only 'Don't know' and 'No answer' to missing
seven$tvpol &lt;- recode_numeric_missing(seven$tvpol, c("Don't know", "No answer"))


# The same can be done with recode_strings_missing

## End(Not run)

</code></pre>


</div>