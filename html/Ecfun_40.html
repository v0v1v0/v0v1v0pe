<div class="container">

<table style="width: 100%;"><tr>
<td>logVarCor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Log-diagonal representation of a variance matrix 
</h2>

<h3>Description</h3>

<p>Translate a square symmetric matrix with positive 
diagonal elements into a vector of the logarithms 
of the diagonal elements with the correlations as 
an attribute, and vice versa.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">logVarCor(x, corr, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>If a matrix, translate into a vector with a 
"corr" attribute.  
</p>
<p>If a vector, translate into a matrix.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corr</code></td>
<td>

<p>optional vector of correlations for the 
<code>lower.tri</code> portion of a covariance 
matrix whose diagonal is <code>exp(x)</code>.  
</p>
<p>Use a "corr" attribute of <code>x</code> only if 
this argument is <code>missing</code>.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>(not currently used)
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>if(length(dim(x))==2) return <code>log(diag(x))</code> 
with an attribute "corr" equal to the 
<code>lower.tri</code> of <code>cov2cor(x)</code>.  
</p>
<p>Otherwise, return a covariance matrix from 
<code>x</code> as described above.  
</p>


<h3>Author(s)</h3>

<p>Spencer Graves
</p>


<h3>See Also</h3>

<p><code>log</code>
<code>diag</code>
<code>cov2cor</code>
<code>lower.tri</code>
<code>pdLogChol</code> converts a k-dimensional 
covariance matrix into a vector of length 
<code>choose(k+1, 2)</code>.  By contrast, <code>logVarCor</code> 
returns a vector of length <code>k</code> with a "corr" 
attribute of length <code>choose(k, 2)</code>.  
</p>


<h3>Examples</h3>

<pre><code class="language-R">##
## 1.  Trivial 1 x 1 matrix
##
# 1.1.  convert vector to "matrix"
mat1 &lt;- logVarCor(1)
# check

all.equal(mat1, matrix(exp(1), 1))
          

# 1.2.  Convert 1 x 1 matrix to vector 
lVCd1 &lt;- logVarCor(diag(1))
# check 
lVCd1. &lt;- 0
attr(lVCd1., 'corr') &lt;- numeric(0)

all.equal(lVCd1, lVCd1.)


##
## 2.  simple 2 x 2 matrix 
##
# 2.1.  convert 1:2 into a matrix 
lVC2 &lt;- logVarCor(1:2)
# check 
lVC2. &lt;- diag(exp(1:2))

all.equal(lVC2, lVC2.)


# 2.2.  Convert a matrix into a vector 
lVC2d &lt;- logVarCor(diag(1:2))
# check 
lVC2d. &lt;- log(1:2)
attr(lVC2d., 'corr') &lt;- 0 

all.equal(lVC2d, lVC2d.)


##
## 3.  3-d covariance matrix with nonzero correlations 
##
# 3.1.  Create matrix 
(ex3 &lt;- tcrossprod(matrix(c(rep(1,3), 0:2), 3)))
dimnames(ex3) &lt;- list(letters[1:3], letters[1:3])

# 3.2.  Convert to vector 
(Ex3 &lt;- logVarCor(ex3))

# check 
Ex3. &lt;- log(c(1, 2, 5))
names(Ex3.) &lt;- letters[1:3]
attr(Ex3., 'corr') &lt;- c(1/sqrt(2), 1/sqrt(5), 3/sqrt(10))

all.equal(Ex3, Ex3.)


# 3.3.  Convert back to a matrix 
Ex3.2 &lt;- logVarCor(Ex3)
# check 

all.equal(ex3, Ex3.2)

</code></pre>


</div>