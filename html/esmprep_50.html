<div class="container">

<table style="width: 100%;"><tr>
<td>suggestShift</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>suggestShift</h2>

<h3>Description</h3>

<p>suggestShift registers all ESM prompts that are eligible to be modified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">suggestShift(esDf, timeLagMinutes = NULL, RELEVANTINFO_ES = NULL,
  RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLagMinutes</code></td>
<td>
<p>a numeric value. Specify the time difference in <strong>minutes</strong> for questionnaires that might be shifted to a neighboring prompt. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code>setES</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code>setES</code> and it is extended once either by function <code>genDateTime</code> or by function <code>splitDateTime</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If at least one questionnaire is registered as having been filled out repeatedly at a specific prompt it might be 'reasonable' to shift such questionnaires to a neighboring prompt index. The word 'reasonable' refers to the rule of how questionnaires get assigned to a specific prompt: For each participant the minimum time difference between the actual start time of a questionnaire and all of the participant's scheduled times (prompts) determines which prompt gets assigned to the actual start time. Say between 2 neighboring prompts 4 hours pass, then a questionnaire that was started 3 minutes after the prompt gets assigned to the same prompt as a questionnaire that was started 1 hour and 59 minutes after the prompt. Had it been started say exactly 2 hours after the prompt it would have been assigned to the subsequent prompt. It might be reasonable to assign such a questionnaire to this subsequent (neighboring) prompt.
</p>


<h3>Value</h3>

<p>a list. If at least one prompt is suggested for shifting,  a list containing the following 3 data.frames is returned:
</p>

<ol>
<li>
<p> the first data.frame (called 'esDf') is the raw ESM dataset in its current state (with new colums SHIFT, SHIFTKEY, and LAG_MINUTES),
</p>
</li>
<li>
<p> the second data.frame (called 'suggestShiftDf') includes all relevant information to act according to the decision as to which questionnaires shall be shifted. See <strong>Examples</strong> in function <code>makeShift</code> to get a clear idea of how to use 'suggestShiftDf',
</p>
</li>
<li>
<p> the third data.frame (called 'printShiftDf') contains the relevant information to print all questionnaires registered by <code>suggestShift</code> to the console, before as well as after having made the shifting. This printing to the console is done by applying the function <code>printSuggestedShift</code>.
</p>
</li>
</ol>
<p>If no prompt is suggested for shifting, the list elements 'suggestShiftDf' and 'printShiftDf' both are character strings which confirm that no shift is suggested.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code>esmprep</code> (function 20 of 29).
</p>


<h3>Examples</h3>

<pre><code class="language-R"># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute suggestShift. Start -------------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
# Prerequisites in order to execute suggestShift. End ---------------
# -------------------------------------------------------
# Run function 20 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# identDf is the result of function 'esIdentical'.
# 100 represents the number of minutes that at least must have passed
# between the scheduled start of an ESM questionnaire at its actual start
# in order for the questionnaire to be eligible for shifting (see function
# makeShift).
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Display output element 'suggestShiftDf':
sugShift$suggestShiftDf
# Display output element 'printShiftDf':
sugShift$printShiftDf
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>


</div>