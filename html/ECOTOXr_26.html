<div class="container">

<table style="width: 100%;"><tr>
<td>websearch_ecotox</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search and retrieve toxicity records from the on-line database</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a> Functions to search and retrieve records from the on-line database at
<a href="https://cfpub.epa.gov/ecotox/search.cfm">https://cfpub.epa.gov/ecotox/search.cfm</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">websearch_ecotox(
  fields = list_ecotox_web_fields(),
  habitat = c("aquire", "terrestrial"),
  verify_ssl = getOption("ECOTOXr_verify_ssl"),
  ...
)

list_ecotox_web_fields(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>
<p>A named <code>list</code> of <code>character</code>s, used to build a search for for the on-line search query of
<a href="https://cfpub.epa.gov/ecotox/search.cfm">https://cfpub.epa.gov/ecotox/search.cfm</a>.
Use <code>list_ecotox_web_fields()</code> to construct a valid list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>habitat</code></td>
<td>
<p>Use <code>aquire</code> (default) to retrieve aquatic data, <code>terrestrial</code> for, you've guessed it, terrestrial data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verify_ssl</code></td>
<td>
<p>When set to <code>FALSE</code> the SSL certificate of the host (EPA)
is not verified. Can also be set as option:
<code>options(ECOTOXr_verify_ssl = TRUE)</code>. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>In case of <code>list_ecotox_web_fields()</code> the dots can be used as search field values used to update the returned list of fields.
</p>
<p>In case of <code>websearch_ecotox()</code> the dots can be used to pass custom options to the underlying <code>httr2::req_options()</code> call. For available
field names, use <code>names(list_ecotox_web_fields())</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The functions described here to search and retrieve records from the on-line database are experimental. This is because this feature is
not formally supported by the EPA, and it may break in future iterations of the on-line database. The functions form an interface between
R and the ECOTOX website and is therefore limited by its restrictions as described in the package documentation: ECOTOXr. The
functions should therefore be used with caution.
</p>


<h3>Value</h3>

<p>Returns named <code>list</code> of dplyr::tibbles with search results. Results are unpolished and ‘as is’ returned by EPA's web service.
</p>
<p><code>list_ecotox_web_fields()</code> returns a named list with fields that can be used in a web search of EPA's ECOTOX database, using
<code>websearch_ecotox()</code>.
</p>


<h3>Note</h3>

<p><strong>IMPORTANT:</strong> when you plan to perform multiple adjacent searches (for instance in a loop), please insert a call to <code>Sys.sleep()</code>.
This to avoid overloading the server and getting your IP address banned from the server.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>See Also</h3>

<p>Other search-functions: 
<code>search_ecotox()</code>,
<code>websearch_comptox()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
search_fields &lt;-
  list_ecotox_web_fields(
    txAdvancedSpecEntries     = "daphnia magna",
    RBSPECSEARCHTYPE          = "EXACT",
    txAdvancedChemicalEntries = "benzene",
    RBCHEMSEARCHTYPE          = "EXACT")
search_results &lt;- websearch_ecotox(search_fields)

## End(Not run)
</code></pre>


</div>