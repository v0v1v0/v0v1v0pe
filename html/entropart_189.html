<div class="container">

<table style="width: 100%;"><tr>
<td>rCommunity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Random Communities
</h2>

<h3>Description</h3>

<p>Draws random communities according to a probability distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rCommunity(n, size = sum(NorP), NorP = 1, BootstrapMethod = "Chao2015", S = 300, 
    Distribution = "lnorm",  sd = 1, prob = 0.1, alpha = 40,
    CheckArguments = TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>

<p>The number of communities to draw.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>

<p>The number of individuals to draw in each community.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BootstrapMethod</code></td>
<td>

<p>The method used to obtain the probabilities to generate bootstrapped communities from observed abundances. If <code>"Marcon"</code>, the probabilities are simply the abundances divided by the total number of individuals (Marcon <em>et al.</em>, 2012). If <code>"Chao2013"</code> or <code>"Chao2015"</code> (by default), a more sophisticated approach is used (see <code>as.ProbaVector</code>) following Chao <em>et al.</em> (2013) or Chao <em>et al.</em> (2015).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NorP</code></td>
<td>

<p>A numeric vector. Contains either abundances or probabilities.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>

<p>The number of species.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Distribution</code></td>
<td>

<p>The distribution of species frequencies. May be <code>"lnorm"</code> (log-normal), <code>"lseries"</code> (log-series), <code>"geom"</code> (geometric) or <code>"bstick"</code> (broken stick).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd</code></td>
<td>

<p>The simulated distribution standard deviation. For the log-normal distribution, this is the standard deviation on the log scale.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>

<p>The proportion of ressources taken by successive species.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>Fisher's alpha.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CheckArguments</code></td>
<td>

<p>Logical; if <code>TRUE</code>, the function arguments are verified. Should be set to <code>FALSE</code> to save time when the arguments have been checked elsewhere.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Communities of fixed <code>size</code> are drawn in a multinomial distribution according to the distribution of probabilities provided by <code>NorP</code>.
</p>
<p>An abundance vector may be used instead of probabilities, then <code>size</code> is by default the total number of individuals in the vector. Random communities are built by drawing in a multinomial law following Marcon <em>et al.</em> (2012), or trying to estimate the distribution of the actual community with <code>as.ProbaVector</code>. If <code>BootstrapMethod =  "Chao2013"</code>, the distribution is estimated by a single parameter model and unobserved species are given equal probabilities. If <code>BootstrapMethod =  "Chao2015"</code>, a two-parameter model is used and unobserved species follow a geometric distribution.
</p>
<p>Alternatively, the probabilities may be drawn following a classical distribution: either a lognormal (<code>"lnorm"</code>) one (Preston, 1948) with given standard deviation (<code>sd</code>; note that the mean is actually a normalizing constant. Its values is set equal to 0 for the simulation of the normal distribution of unnormalized log-abundances), a log-series (<code>"lseries"</code>) one (Fisher <em>et al.</em>, 1943) with parameter <code>alpha</code>, a geometric (<code>"geom"</code>) one (Motomura, 1932) with parameter <code>prob</code>, or a broken stick (<code>"bstick"</code>) one (MacArthur, 1957). The number of simulated species is fixed by <code>S</code>, except for <code>"lseries"</code> where it is obtained from <code>alpha</code> and <code>size</code>: <code class="reqn">S=\alpha \ln(1 + \frac{size}{\alpha})</code>.
</p>
<p>Log-normal, log-series and broken-stick distributions are stochastic. The geometric distribution is completely determined by its parameters.
</p>


<h3>Value</h3>

<p>A vector of species abundances (<code>AbdVector</code>) if a single community has been drawn, or a <code>MetaCommunity</code> containing simulated communities.
</p>


<h3>References</h3>

<p>Chao, A., Wang, Y. T. and Jost, L. (2013). Entropy and the species accumulation curve: a novel entropy estimator via discovery rates of new species. <em>Methods in Ecology and Evolution</em> 4(11): 1091-1100.
</p>
<p>Chao, A., Hsieh, T. C., Chazdon, R. L., Colwell, R. K., Gotelli, N. J. (2015) Unveiling the Species-Rank Abundance Distribution by Generalizing Good-Turing Sample Coverage Theory. <em>Ecology</em> 96(5): 1189-1201.
</p>
<p>Fisher R.A., Corbet A.S., Williams C.B. (1943) The Relation Between the Number of Species and the Number of Individuals in a Random Sample of an Animal Population. <em>Journal of Animal Ecology</em> 12: 42-58.
</p>
<p>MacArthur R.H. (1957) On the Relative Abundance of Bird Species. <em>PNAS</em> 43(3): 293-295.
</p>
<p>Marcon, E., Herault, B., Baraloto, C. and Lang, G. (2012). The Decomposition of Shannon's Entropy and a Confidence Interval for Beta Diversity. <em>Oikos</em> 121(4): 516-522.
</p>
<p>Motomura I. (1932) On the statistical treatment of communities. <em>Zoological Magazine</em> 44: 379-383.
</p>
<p>Preston, F.W. (1948). The commonness, and rarity, of species. <em>Ecology</em> 29(3): 254-283.
</p>
<p>Reese G. C., Wilson K. R., Flather C. H. (2013) Program SimAssem: Software for simulating species assemblages and estimating species richness. <em>Methods in Ecology and  Evolution</em> 4: 891-896.
</p>


<h3>See Also</h3>

<p><code>SpeciesDistribution</code> and the program <code>SimAssem</code> (Reese <em>et al.</em>, 2013; not an R package) for more distributions.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Generate communities made of 100000 individuals among 300 species and fit them
par(mfrow = c(2,2))
for (d in c("lnorm", "lseries", "geom", "bstick")) {  
rCommunity(n = 1, size = 1E5, S = 300, Distribution = d) -&gt; AbdVec
plot(AbdVec, Distribution = d, main = d)
}
</code></pre>


</div>