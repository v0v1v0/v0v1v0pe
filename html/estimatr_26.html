<div class="container">

<table style="width: 100%;"><tr>
<td>permutations_to_condition_pr_mat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Builds condition probability matrices for Horvitz-Thompson estimation from
permutation matrix</h2>

<h3>Description</h3>

<p>Builds condition probability matrices for Horvitz-Thompson estimation from
permutation matrix
</p>


<h3>Usage</h3>

<pre><code class="language-R">permutations_to_condition_pr_mat(permutations)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>permutations</code></td>
<td>
<p>A matrix where the rows are units and the columns are
different treatment permutations; treated units must be represented with a
1 and control units with a 0</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function takes a matrix of permutations, for example from
the <code>obtain_permutation_matrix</code> function in
<span class="pkg">randomizr</span> or through simulation and returns a 2n*2n matrix that can
be used to fully specify the design for <code>horvitz_thompson</code>
estimation. You can read more about these matrices in the documentation for
the <code>declaration_to_condition_pr_mat</code> function.
</p>
<p>This is done by passing this matrix to the <code>condition_pr_mat</code> argument
of
</p>


<h3>Value</h3>

<p>a numeric 2n*2n matrix of marginal and joint condition treatment
probabilities to be passed to the <code>condition_pr_mat</code> argument of
<code>horvitz_thompson</code>.
</p>


<h3>See Also</h3>

<p><code>declare_ra</code>,
<code>declaration_to_condition_pr_mat</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Complete randomization
perms &lt;- replicate(1000, sample(rep(0:1, each = 50)))
comp_pr_mat &lt;- permutations_to_condition_pr_mat(perms)

# Arbitrary randomization
possible_treats &lt;- cbind(
  c(1, 1, 0, 1, 0, 0, 0, 1, 1, 0),
  c(0, 1, 1, 0, 1, 1, 0, 1, 0, 1),
  c(1, 0, 1, 1, 1, 1, 1, 0, 0, 0)
)
arb_pr_mat &lt;- permutations_to_condition_pr_mat(possible_treats)
# Simulating a column to be realized treatment
z &lt;- possible_treats[, sample(ncol(possible_treats), size = 1)]
y &lt;- rnorm(nrow(possible_treats))
horvitz_thompson(y ~ z, condition_pr_mat = arb_pr_mat)

</code></pre>


</div>