<div class="container">

<table style="width: 100%;"><tr>
<td>N_FACTORS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Various Factor Retention Criteria</h2>

<h3>Description</h3>

<p>Among the most important decisions for an exploratory factor analysis (EFA) is
the choice of the number of factors to retain. Several factor retention
criteria have been developed for this. With this function, various factor
retention criteria can be performed simultaneously. Additionally, the data
can be checked for their suitability for factor analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">N_FACTORS(
  x,
  criteria = c("CD", "EKC", "HULL", "KGC", "PARALLEL", "SCREE", "SMT"),
  suitability = TRUE,
  N = NA,
  use = c("pairwise.complete.obs", "all.obs", "complete.obs", "everything",
    "na.or.complete"),
  cor_method = c("pearson", "spearman", "kendall"),
  n_factors_max = NA,
  N_pop = 10000,
  N_samples = 500,
  alpha = 0.3,
  max_iter_CD = 50,
  n_fac_theor = NA,
  method = c("PAF", "ULS", "ML"),
  gof = c("CAF", "CFI", "RMSEA"),
  eigen_type_HULL = c("SMC", "PCA", "EFA"),
  eigen_type_other = c("PCA", "SMC", "EFA"),
  n_factors = 1,
  n_datasets = 1000,
  percent = 95,
  decision_rule = c("means", "percentile", "crawford"),
  show_progress = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame or matrix. Dataframe or matrix of raw data or matrix with
correlations. If <code>"CD"</code> is included as a criterion, x must be raw
data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criteria</code></td>
<td>
<p>character. A vector with the factor retention methods to
perform. Possible inputs are: <code>"CD"</code>, <code>"EKC"</code>, <code>"HULL"</code>,
<code>"KGC"</code>, <code>"PARALLEL"</code>, <code>"SCREE"</code>, and <code>"SMT"</code>
(see details). By default, all factor retention methods are performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suitability</code></td>
<td>
<p>logical. Whether the data should be checked for suitability
for factor analysis using the Bartlett's test of sphericity and the
Kaiser-Guttmann criterion (see details). Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>numeric. The number of observations. Only needed if x is a
correlation matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>character. Passed to <code>stats::cor</code> if raw
data is given as input. Default is <code>"pairwise.complete.obs"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor_method</code></td>
<td>
<p>character. Passed to <code>stats::cor</code>
Default is  <code>"pearson"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_factors_max</code></td>
<td>
<p>numeric. Passed to <code>CD</code>.The maximum number
of factors to test against.
Larger numbers will increase the duration the procedure takes, but test more
possible solutions. Maximum possible is number of variables / 2. Default is
NA. If not specified, number of variables / 2 is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_pop</code></td>
<td>
<p>numeric. Passed to <code>CD</code>. Size of finite populations
of comparison data. Default is 10000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_samples</code></td>
<td>
<p>numeric. Passed to <code>CD</code>. Number of samples drawn
from each population. Default is 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric. Passed to <code>CD</code>. The alpha level used to test
the significance of the improvement added by an additional factor.
Default is .30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter_CD</code></td>
<td>
<p>numeric. Passed to <code>CD</code>. The maximum number of
iterations to perform after which the iterative PAF procedure is halted.
Default is 50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_fac_theor</code></td>
<td>
<p>numeric. Passed to <code>HULL</code>. Theoretical number
of factors to retain. The maximum of this number and the number of factors
suggested by PARALLEL plus one will be used in the Hull method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character. Passed to <code>EFA</code> in <code>HULL</code>,
<code>KGC</code>, <code>SCREE</code>, and <code>PARALLEL</code>. The
estimation method to use. One of  <code>"PAF"</code>, <code>"ULS"</code>, or  <code>"ML"</code>,
for principal axis factoring, unweighted least squares, and maximum
likelihood, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gof</code></td>
<td>
<p>character. Passed to <code>HULL</code>. The goodness of fit index
to use. Either <code>"CAF"</code>, <code>"CFI"</code>, or <code>"RMSEA"</code>, or any
combination of them. If <code>method = "PAF"</code> is used, only
the CAF can be used as goodness of fit index. For details on the CAF, see
Lorenzo-Seva, Timmerman, and Kiers (2011).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eigen_type_HULL</code></td>
<td>
<p>character. Passed to  <code>PARALLEL</code> in
<code>HULL</code>. On what the
eigenvalues should be found in the parallel analysis. Can be one of
<code>"SMC"</code>, <code>"PCA"</code>, or <code>"EFA"</code>. If using  <code>"SMC"</code> (default),
the diagonal of the correlation matrices is
replaced by the squared multiple correlations (SMCs) of the indicators. If
using  <code>"PCA"</code>, the diagonal values of the correlation
matrices are left to be 1. If using  <code>"EFA"</code>, eigenvalues are found on the
correlation  matrices with the final communalities of an EFA solution as
diagonal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eigen_type_other</code></td>
<td>
<p>character. Passed to <code>KGC</code>,
<code>SCREE</code>, and <code>PARALLEL</code>. The same as eigen_type_HULL,
but multiple inputs
are possible here. Default is to use all inputs, that is, <code>c("PCA",
"SMC", "EFA"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_factors</code></td>
<td>
<p>numeric. Passed to <code>PARALLEL</code> (also within
<code>HULL</code>), <code>KGC</code>, and <code>SCREE</code>. Number of
factors to extract if <code>"EFA"</code> is included in <code>eigen_type_HULL</code> or
<code>eigen_type_other</code>. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_datasets</code></td>
<td>
<p>numeric. Passed to <code>PARALLEL</code> (also within
<code>HULL</code>). The number of datasets to simulate. Default is 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percent</code></td>
<td>
<p>numeric. Passed to <code>PARALLEL</code> (also within
<code>HULL</code>). A vector of percentiles to take the simulated eigenvalues
from. Default is 95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decision_rule</code></td>
<td>
<p>character. Passed to <code>PARALLEL</code> (also within
<code>HULL</code>). Which rule to use to determine the number of
factors to retain. Default is <code>"means"</code>, which will use the average
simulated eigenvalues. <code>"percentile"</code>, uses the percentiles specified
in percent. <code>"crawford"</code> uses the 95th percentile for the first factor
and the mean afterwards (based on Crawford et al, 2010).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_progress</code></td>
<td>
<p>logical. Whether a progress bar should be shown in the
console. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>EFA</code> in
<code>PARALLEL</code> (also within <code>HULL</code>) and <code>KGC</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default, the entered data are checked for suitability for factor analysis
using the following methods (see respective documentations for details):
</p>

<ul>
<li>
<p>Bartlett's test of sphericity (see <code>BARTLETT</code>)
</p>
</li>
<li>
<p>Kaiser-Meyer-Olkin criterion (see <code>KMO</code>)</p>
</li>
</ul>
<p>The available factor retention criteria are the following (see respective
documentations for details):
</p>

<ul>
<li>
<p>Comparison data (see <code>CD</code>)
</p>
</li>
<li>
<p>Empirical Kaiser criterion (see <code>EKC</code>)
</p>
</li>
<li>
<p>Hull method (see <code>HULL</code>)
</p>
</li>
<li>
<p>Kaiser-Guttman criterion (see <code>KGC</code>)
</p>
</li>
<li>
<p>Parallel analysis (see <code>PARALLEL</code>)
</p>
</li>
<li>
<p>Scree plot (see <code>SCREE</code>)
</p>
</li>
<li>
<p>Sequential chi-square model tests, RMSEA lower bound, and AIC
(see <code>SMT</code>)
</p>
</li>
</ul>
<h3>Value</h3>

<p>A list of class N_FACTORS containing
</p>
<table>
<tr style="vertical-align: top;">
<td><code>outputs</code></td>
<td>
<p>A list with the outputs from <code>BARTLETT</code> and
<code>KMO</code> and the factor retention criteria.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_factors</code></td>
<td>
<p>A named vector containing the suggested number of factors
from each factor retention criterion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>settings</code></td>
<td>
<p>A list of the settings used.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
# All criteria, with correlation matrix and fit method "ML" (where needed)
# This will throw a warning for CD, as no raw data were specified
nfac_all &lt;- N_FACTORS(test_models$baseline$cormat, N = 500, method = "ML")

# The same as above, but without "CD"
nfac_wo_CD &lt;- N_FACTORS(test_models$baseline$cormat, criteria = c("EKC",
                        "HULL", "KGC", "PARALLEL", "SCREE", "SMT"), N = 500,
                        method = "ML")

# Use PAF instead of ML (this will take a lot longer). For this, gof has
# to be set to "CAF" for the Hull method.
nfac_PAF &lt;- N_FACTORS(test_models$baseline$cormat, criteria = c("EKC",
                      "HULL", "KGC", "PARALLEL", "SCREE", "SMT"), N = 500,
                      gof = "CAF")

# Do KGC and PARALLEL with only "PCA" type of eigenvalues
nfac_PCA &lt;- N_FACTORS(test_models$baseline$cormat, criteria = c("EKC",
                      "HULL", "KGC", "PARALLEL", "SCREE", "SMT"), N = 500,
                      method = "ML", eigen_type_other = "PCA")

# Use raw data, such that CD can also be performed
nfac_raw &lt;- N_FACTORS(GRiPS_raw, method = "ML")

</code></pre>


</div>