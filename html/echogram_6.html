<div class="container">

<table style="width: 100%;"><tr>
<td>mask.echogram</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Mask an echogram
</h2>

<h3>Description</h3>

<p>This function creates, and optionally applies, a mask by “blanking” portions of the Sv data matrix of an echogram. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">mask.echogram(echogram, surf.off = NULL, bott.off = NULL, mask = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>echogram</code></td>
<td>
<p> an object of <code>class</code> “echogram” as returned by <code>read.echogram</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surf.off</code></td>
<td>
<p> surface offset in m defining the upper layer (refered to the surface) to be masked. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bott.off</code></td>
<td>
<p> bottom offset in m defining the bottom layer (refered to the bottom) to be masked. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p> logical. If <code>FALSE</code>, the function returns a masking matrix. If <code>TRUE</code> (the default), the function returns a masked echogram (see details).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The masking process consists in producing a matrix of the same dimensions as the original Sv data matrix with <code>NA</code>'s in the masked portion and 1's otherwise. The product of both matrices gives the masked echogram.
</p>


<h3>Value</h3>

<p>When <code>mask = FALSE</code>, a masking matrix is returned. When <code>mask = TRUE</code> (the default), an object of <code>class</code> “echogram” with the mask applied.
</p>


<h3>Author(s)</h3>

<p>Héctor Villalobos
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# import 38 kHz data from HAC file
hacfile &lt;- system.file("hac", "D20150510-T202500.hac", package = "echogram")
echo2.038 &lt;- read.echogram(hacfile, channel = 1)

# make a copy of the original echogram
tmp &lt;- echo2.038

# Create a mask, which is a matrix with 1's and NA's 
mask &lt;- mask.echogram(tmp, surf.off = 1, bott.off = -1, mask = FALSE)
image(t(mask[nrow(mask):1, ])) 

# Apply mask to echogram
tmp$Sv &lt;- tmp$Sv * mask 
echogram(tmp)

# By default, the function returns the masked echogram
echo2.038mask &lt;- mask.echogram(echo2.038, surf.off = 2, bott.off = 0.2)
echogram(echo2.038mask)
</code></pre>


</div>