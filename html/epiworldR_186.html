<div class="container">

<table style="width: 100%;"><tr>
<td>tool</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tools in epiworld</h2>

<h3>Description</h3>

<p>Tools are functions that affect how agents react to the virus. They can be
used to simulate the effects of vaccination, isolation, and social
distancing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tool(
  name,
  prevalence,
  as_proportion,
  susceptibility_reduction,
  transmission_reduction,
  recovery_enhancer,
  death_reduction
)

set_name_tool(tool, name)

get_name_tool(tool)

add_tool(model, tool, proportion)

rm_tool(model, tool_pos)

tool_fun_logit(vars, coefs, model)

set_susceptibility_reduction(tool, prob)

set_susceptibility_reduction_ptr(tool, model, param)

set_susceptibility_reduction_fun(tool, model, tfun)

set_transmission_reduction(tool, prob)

set_transmission_reduction_ptr(tool, model, param)

set_transmission_reduction_fun(tool, model, tfun)

set_recovery_enhancer(tool, prob)

set_recovery_enhancer_ptr(tool, model, param)

set_recovery_enhancer_fun(tool, model, tfun)

set_death_reduction(tool, prob)

set_death_reduction_ptr(tool, model, param)

set_death_reduction_fun(tool, model, tfun)

## S3 method for class 'epiworld_agents_tools'
print(x, max_print = 10, ...)

set_distribution_tool(tool, distfun)

distribute_tool_randomly(prevalence, as_proportion)

distribute_tool_to_set(agents_ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Name of the tool</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prevalence</code></td>
<td>
<p>Numeric scalar. Prevalence of the tool.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_proportion</code></td>
<td>
<p>Logical scalar. If <code>TRUE</code>, <code>prevalence</code> is interpreted
as a proportion of the total number of agents in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>susceptibility_reduction</code></td>
<td>
<p>Numeric. Proportion it reduces susceptibility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transmission_reduction</code></td>
<td>
<p>Numeric. Proportion it reduces transmission.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recovery_enhancer</code></td>
<td>
<p>Numeric. Proportion it improves recovery.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>death_reduction</code></td>
<td>
<p>Numeric. Proportion it reduces probability of death.e</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tool</code></td>
<td>
<p>An object of class <code>epiworld_tool</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>Model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportion</code></td>
<td>
<p>Deprecated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tool_pos</code></td>
<td>
<p>Positive integer. Index of the tool's position in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>Integer vector. Indices (starting from 0) of the positions of the
variables used to compute the logit probability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coefs</code></td>
<td>
<p>Numeric vector. Of the same length of <code>vars</code>, is a vector of
coefficients associated to the logit probability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>Numeric scalar. A probability (between zero and one).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>Character scalar. Name of the parameter featured in <code>model</code> that
will be added to the tool (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tfun</code></td>
<td>
<p>An object of class <code>epiworld_tool_fun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>epiworld_agents_tools</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_print</code></td>
<td>
<p>Numeric scalar. Maximum number of tools to print.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distfun</code></td>
<td>
<p>An object of class <code>epiworld_tool_distfun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agents_ids</code></td>
<td>
<p>Integer vector. Indices of the agents to which the tool
will be assigned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The name of the <code>epiworld_tool</code> object can be manipulated with the functions
<code>set_name_tool()</code> and <code>get_name_tool()</code>.
</p>
<p>The <code>add_tool</code> function adds the specified tool to the model of class
epiworld_model with specified proportion.
</p>
<p>In the case of <code>set_susceptibility_reduction_ptr</code>, <code>set_transmission_reduction_ptr</code>,
<code>set_recovery_enhancer</code>, and
<code>set_death_reduction_ptr</code>, the corresponding parameters are passed as a pointer to
the tool. The implication of using pointers is that the values will be
read directly from the <code>model</code> object, so changes will be reflected.
</p>
<p>The <code>set_distribution_tool</code> function assigns a distribution function to the
specified tool of class epiworld_tool. The distribution function can be
created using the functions <code>distribute_tool_randomly()</code> and
<code>distribute_tool_to_set()</code>.
</p>
<p>The <code>distribute_tool_randomly</code> function creates a distribution function that
randomly assigns the tool to a proportion of the population.
</p>
<p>The <code>distribute_tool_to_set</code> function creates a distribution function that
assigns the tool to a set of agents.
</p>


<h3>Value</h3>


<ul><li>
<p> The <code>tool</code> function creates a tool of class epiworld_tool.
</p>
</li></ul>
<ul><li>
<p> The <code>set_name_tool</code> function assigns a name to the tool of class
epiworld_tool and returns the tool.
</p>
</li></ul>
<ul><li>
<p> The <code>get_name_tool</code> function returns the name of the tool of class
epiworld_tool.
</p>
</li></ul>
<ul><li>
<p> The <code>rm_tool</code> function removes the specified tool from a model.
</p>
</li></ul>
<ul><li>
<p> The <code>set_susceptibility_reduction</code> function assigns a probability reduction
to the specified tool of class epiworld_tool.
</p>
</li></ul>
<ul><li>
<p> The <code>set_transmission_reduction</code> function assigns a probability reduction
to the specified tool of class epiworld_tool.
</p>
</li></ul>
<ul><li>
<p> The <code>set_recovery_enhancer</code> function assigns a probability increase
to the specified tool of class epiworld_tool.
</p>
</li></ul>
<ul><li>
<p> The <code>set_death_reduction</code> function assigns a probability decrease
to the specified tool of class epiworld_tool.
</p>
</li></ul>
<ul><li>
<p> The <code>distribute_tool_randomly</code> function returns a distribution function of
class <code>epiworld_tool_distfun</code>.
</p>
</li></ul>
<ul><li>
<p> The <code>distribute_tool_to_set</code> function returns a distribution function of
class <code>epiworld_tool_distfun</code>.
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R"># Simple model
model_sirconn &lt;- ModelSIRCONN(
  name                = "COVID-19",
  n                   = 10000,
  prevalence          = 0.01,
  contact_rate        = 5,
  transmission_rate   = 0.4,
  recovery_rate       = 0.95
)

# Running and printing
run(model_sirconn, ndays = 100, seed = 1912)
plot(model_sirconn)

epitool &lt;- tool(
  name = "Vaccine",
  prevalence = 0.5,
  as_proportion = TRUE,
  susceptibility_reduction = .9,
  transmission_reduction = .5,
  recovery_enhancer = .5, 
  death_reduction = .9
)

epitool

set_name_tool(epitool, 'Pfizer') # Assigning name to the tool
get_name_tool(epitool) # Returning the name of the tool
add_tool(model_sirconn, epitool)
run(model_sirconn, ndays = 100, seed = 1912)
model_sirconn
plot(model_sirconn)

# To declare a certain number of individuals with the tool
rm_tool(model_sirconn, 0) # Removing epitool from the model
# Setting prevalence to 0.1
set_distribution_tool(epitool, distribute_tool_randomly(0.1, TRUE))
add_tool(model_sirconn, epitool)
run(model_sirconn, ndays = 100, seed = 1912)

# Adjusting probabilities due to tool
set_susceptibility_reduction(epitool, 0.1) # Susceptibility reduction 
set_transmission_reduction(epitool, 0.2) # Transmission reduction
set_recovery_enhancer(epitool, 0.15) # Probability increase of recovery
set_death_reduction(epitool, 0.05) # Probability reduction of death

rm_tool(model_sirconn, 0) 
add_tool(model_sirconn, epitool)
run(model_sirconn, ndays = 100, seed = 1912) # Run model to view changes


# Using the logit function --------------
sir &lt;- ModelSIR(
  name = "COVID-19", prevalence = 0.01, 
  transmission_rate = 0.9, recovery_rate = 0.1
  )

# Adding a small world population
agents_smallworld(
  sir,
  n = 10000,
  k = 5,
  d = FALSE,
  p = .01
)

# Creating a tool
mask_wearing &lt;- tool(
  name = "Mask",
  prevalence               = 0.5,
  as_proportion            = TRUE,
  susceptibility_reduction = 0.0,
  transmission_reduction   = 0.3, # Only transmission
  recovery_enhancer        = 0.0,
  death_reduction          = 0.0
)

add_tool(sir, mask_wearing)

run(sir, ndays = 50, seed = 11)
hist_0 &lt;- get_hist_total(sir)

# And adding features
dat &lt;- cbind(
  female = sample.int(2, 10000, replace = TRUE) - 1,
  x      = rnorm(10000)
)

set_agents_data(sir, dat)

# Creating the logit function
tfun &lt;- tool_fun_logit(
  vars  = c(0L, 1L),
  coefs = c(-1, 1),
  model = sir
)

# The infection prob is lower
hist(plogis(dat %*% rbind(.5,1)))

tfun # printing


set_susceptibility_reduction_fun(
  tool  = get_tool(sir, 0),
  model = sir,
  tfun  = tfun
  )
  
run(sir, ndays = 50, seed = 11)
hist_1 &lt;- get_hist_total(sir)

op &lt;- par(mfrow = c(1, 2))
plot(hist_0); abline(v = 30)
plot(hist_1); abline(v = 30)
par(op)


</code></pre>


</div>