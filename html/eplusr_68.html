<div class="container">

<table style="width: 100%;"><tr>
<td>IdfGeometry</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Modify and Visualize an EnergyPlus Model Geometry</h2>

<h3>Description</h3>

<p><code>IdfGeometry</code> is an abstraction of a collection of geometry in an Idf. It
provides more detail methods to query geometry properties, update geometry
vertices and visualize geometry in 3D using the
<a href="https://cran.r-project.org/package=rgl">rgl</a> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">idf_geometry(parent, object = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>parent</code></td>
<td>
<p>A path to an IDF file or an Idf object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A character vector of valid names or an integer
vector of valid IDs of objects to extract. If <code>NULL</code>, all
objects in geometry classes will be extracted.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>IdfGeometry</code> object.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-IdfGeometry-new"><code>IdfGeometry$new()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-parent"><code>IdfGeometry$parent()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-rules"><code>IdfGeometry$rules()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-convert"><code>IdfGeometry$convert()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-coord_system"><code>IdfGeometry$coord_system()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-round_digits"><code>IdfGeometry$round_digits()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-area"><code>IdfGeometry$area()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-azimuth"><code>IdfGeometry$azimuth()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-tilt"><code>IdfGeometry$tilt()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-view"><code>IdfGeometry$view()</code></a>
</p>
</li>
<li> <p><a href="#method-IdfGeometry-print"><code>IdfGeometry$print()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-IdfGeometry-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create an <code>IdfGeometry</code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$new(parent, object = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>parent</code></dt>
<dd>
<p>A path to an IDF file or an Idf object.</p>
</dd>
<dt><code>object</code></dt>
<dd>
<p>A character vector of valid names or an integer
vector of valid IDs of objects to extract. If <code>NULL</code>, all
objects in geometry classes will be extracted.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>An <code>IdfGeometry</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
# example model shipped with eplusr from EnergyPlus v8.8
path_idf &lt;- system.file("extdata/1ZoneUncontrolled.idf", package = "eplusr") # v8.8

# create from an Idf object
idf &lt;- read_idf(path_idf, use_idd(8.8, "auto"))
geom &lt;- idf$geometry()
geom &lt;- IdfGeometry$new(idf)

# create from an IDF file
geom &lt;- idf_geometry(path_idf)
geom &lt;- IdfGeometry$new(path_idf)
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-parent"></a>



<h4>Method <code>parent()</code>
</h4>

<p>Get parent Idf object
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$parent()</pre></div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$parent()⁠</code> returns the parent Idf object of current <code>IdfGeometry</code>
object.
</p>



<h5>Returns</h5>

<p>An Idf object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$parent()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-rules"></a>



<h4>Method <code>rules()</code>
</h4>

<p>Get global geometry rules
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$rules()</pre></div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$rules()⁠</code> returns global geometry rules.
</p>



<h5>Returns</h5>

<p>An Idf object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$rules()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-convert"></a>



<h4>Method <code>convert()</code>
</h4>

<p>Convert simple geometry objects
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$convert(type = c("surface", "subsurface", "shading"))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>type</code></dt>
<dd>
<p>A character vector giving what types of simplified
geometries should be converted. Should be a subset of
<code>"surface"</code>, <code>"subsurface"</code> and <code>"shading"</code>. Default is set to
all of them.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>EnergyPlus provides several classes that allow for simplified entry
of geometries, such as <code>Wall:Exterior</code>, <code>Window</code> and etc.
<code style="white-space: pre;">⁠$convert()⁠</code> will generate detailed vertices from simplified geometry
specifications and replace the original object with its corresponding
detailed class, including:
</p>

<ul>
<li> <p><code>BuildingSurface:Detailed</code>
</p>
</li>
<li> <p><code>FenestrationSurface:Detailed</code>
</p>
</li>
<li> <p><code>Shading:Site:Detailed</code>
</p>
</li>
<li> <p><code>Shading:Building:Detailed</code>
</p>
</li>
<li> <p><code>Shading:Zone:Detailed</code>
</p>
</li>
</ul>
<h5>Returns</h5>

<p>The modified Idf object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$convert()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-coord_system"></a>



<h4>Method <code>coord_system()</code>
</h4>

<p>Convert vertices to specified coordinate systems
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$coord_system(detailed = NULL, simple = NULL, daylighting = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>detailed, simple, daylighting</code></dt>
<dd>
<p>A string specifying the coordinate
system for detailed geometries, simple (rectangular surface)
geometries, and daylighting reference points. Should be one of
<code>"relative"</code>, <code>"world"</code> and <code>"absolute"</code>. <code>"absolute"</code> is the
same as <code>"world"</code> and converted to it.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$coord_system()⁠</code> converts all vertices of geometries into specified
coordinate systems, e.g. from world to relative, and vice versa.
Besides, it also updates the <code>GlobalGeometryRules</code> in parent Idf
accordingly.
</p>



<h5>Returns</h5>

<p>The modified Idf object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$coord_system("world", "world", "world")
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-round_digits"></a>



<h4>Method <code>round_digits()</code>
</h4>

<p>Round digits on geometry vertices
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$round_digits(digits = 4L)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>digits</code></dt>
<dd>
<p>An integer giving the number of decimal places to be
used. Default: <code>4</code>.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$round_digits()⁠</code> performs number rounding on vertices of detailed
geometry object vertices, e.g. <code>BuildingSurface:Detailed</code>,
<code>FenestrationSurface:Detailed</code> and etc.
</p>
<p><code style="white-space: pre;">⁠$round_digits()⁠</code> may be useful for clean up IDF files generated
using OpenStudio which often gives vertices with long trailing
digits.
</p>



<h5>Returns</h5>

<p>The modified Idf object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$round_digits()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-area"></a>



<h4>Method <code>area()</code>
</h4>

<p>Get area
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$area(class = NULL, object = NULL, net = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>class</code></dt>
<dd>
<p>A character vector of valid geometry class names.
Default: <code>NULL</code>.</p>
</dd>
<dt><code>object</code></dt>
<dd>
<p>A character vector of valid names or an integer
vector of valid IDs of targeting objects.
Default: <code>NULL</code>.</p>
</dd>
<dt><code>net</code></dt>
<dd>
<p>If <code>TRUE</code>, the gross area is returned. If <code>FALSE</code>, the net
area is returned. Default: <code>FALSE</code>.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$area()⁠</code> returns the area of surfaces in square meters.
</p>



<h5>Returns</h5>

<p>A <code>data.table::data.table()</code> of 6 columns:
</p>

<ul>
<li> <p><code>id</code>: Integer type. Object IDs.
</p>
</li>
<li> <p><code>name</code>: Character type. Object names.
</p>
</li>
<li> <p><code>class</code>: Character type. Class names.
</p>
</li>
<li> <p><code>zone</code>: Character type. Zone names that specified objects belong to.
</p>
</li>
<li> <p><code>space</code>: Character type. Space names that specified objects belong to.
</p>
</li>
<li> <p><code>type</code>: Character type. Surface types.
</p>
</li>
<li> <p><code>area</code>: Numeric type. Surface Area in m2.
</p>
</li>
</ul>
<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$area()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-azimuth"></a>



<h4>Method <code>azimuth()</code>
</h4>

<p>Get azimuth
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$azimuth(class = NULL, object = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>class</code></dt>
<dd>
<p>A character vector of valid geometry class names.
Default: <code>NULL</code>.</p>
</dd>
<dt><code>object</code></dt>
<dd>
<p>A character vector of valid names or an integer
vector of valid IDs of targeting objects.
Default: <code>NULL</code>.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$azimuth()⁠</code> returns the azimuth of surfaces in degree.
</p>



<h5>Returns</h5>

<p>A <code>data.table::data.table()</code> of 6 columns:
</p>

<ul>
<li> <p><code>id</code>: Integer type. Object IDs.
</p>
</li>
<li> <p><code>name</code>: Character type. Object names.
</p>
</li>
<li> <p><code>class</code>: Character type. Class names.
</p>
</li>
<li> <p><code>zone</code>: Character type. Zone names that specified objects belong to.
</p>
</li>
<li> <p><code>space</code>: Character type. Space names that specified objects belong to.
</p>
</li>
<li> <p><code>type</code>: Character type. Surface types.
</p>
</li>
<li> <p><code>azimuth</code>: Numeric type. Azimuth in degree.
</p>
</li>
</ul>
<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$azimuth()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-tilt"></a>



<h4>Method <code>tilt()</code>
</h4>

<p>Get tilt
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$tilt(class = NULL, object = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>class</code></dt>
<dd>
<p>A character vector of valid geometry class names.
Default: <code>NULL</code>.</p>
</dd>
<dt><code>object</code></dt>
<dd>
<p>A character vector of valid names or an integer
vector of valid IDs of targeting objects.
Default: <code>NULL</code>.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$tilt()⁠</code> returns the tilt of surfaces in degree.
</p>



<h5>Returns</h5>

<p>A <code>data.table::data.table()</code> of 6 columns:
</p>

<ul>
<li> <p><code>id</code>: Integer type. Object IDs.
</p>
</li>
<li> <p><code>name</code>: Character type. Object names.
</p>
</li>
<li> <p><code>class</code>: Character type. Class names.
</p>
</li>
<li> <p><code>zone</code>: Character type. Zone names that specified objects belong to.
</p>
</li>
<li> <p><code>space</code>: Character type. Space names that specified objects belong to.
</p>
</li>
<li> <p><code>type</code>: Character type. Surface types.
</p>
</li>
<li> <p><code>tilt</code>: Numeric type. Azimuth in degree.
</p>
</li>
</ul>
<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$tilt()
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-view"></a>



<h4>Method <code>view()</code>
</h4>

<p>View 3D geometry
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$view(
  new = FALSE,
  render_by = "surface_type",
  wireframe = TRUE,
  x_ray = FALSE,
  axis = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>new</code></dt>
<dd>
<p>If <code>TRUE</code>, a new rgl window will be open using
<code>rgl::open3d()</code>. If <code>FALSE</code>, existing rgl window will be
reused if possible. Default: <code>FALSE</code>.</p>
</dd>
<dt><code>render_by</code></dt>
<dd>
<p>A single string specifying the way of rendering the
geometry. Possible values are:
</p>

<ul>
<li> <p><code>"surface_type"</code>: Default. Render the model by surface type model.
Walls, roofs, windows, doors, floors, and shading surfaces will
have unique colors.
</p>
</li>
<li> <p><code>"boundary"</code>: Render the model by outside boundary condition. Only
surfaces that have boundary conditions will be rendered with a
color. All other surfaces will be white.
</p>
</li>
<li> <p><code>"construction"</code>: Render the model by surface constructions.
</p>
</li>
<li> <p><code>"zone"</code>: Render the model by zones assigned.
</p>
</li>
<li> <p><code>"space"</code>: Render the model by spaces assigned.
</p>
</li>
<li> <p><code>"normal"</code>: Render the model by surface normal. The outside face of
a heat transfer face will be rendered as white and the inside face
will be rendered as red.
</p>
</li>
</ul>
</dd>
<dt><code>wireframe</code></dt>
<dd>
<p>If <code>TRUE</code>, the wireframe of each surface will be
shown. Default: <code>TRUE</code>.</p>
</dd>
<dt><code>x_ray</code></dt>
<dd>
<p>If <code>TRUE</code>, all surfaces wll be rendered translucently.
Default: <code>FALSE</code>.</p>
</dd>
<dt><code>axis</code></dt>
<dd>
<p>If <code>TRUE</code>, the X, Y and Z axes will be drawn at the
global origin. Default: <code>TRUE</code>.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p><code style="white-space: pre;">⁠$view()⁠</code> uses the <a href="https://cran.r-project.org/package=rgl">rgl</a>
package to visualize the IDF geometry in 3D in a similar way as
<a href="https://openstudio.net/">OpenStudio</a>.
</p>
<p><code style="white-space: pre;">⁠$view()⁠</code> returns an IdfViewer object which can be used to further
tweak the viewer scene.
</p>
<p>In the rgl window, you can control the view using your mouse:
</p>

<ul>
<li>
<p> Left button: Trackball
</p>
</li>
<li>
<p> Right button: Pan
projection.
</p>
</li>
<li>
<p> Wheel: Zoom
</p>
</li>
</ul>
<p>For more detailed control on the scene, see IdfViewer.
</p>



<h5>Returns</h5>

<p>An IdfViewer object
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
idf$view()
idf$view(render_by = "zone")
idf$view(new = TRUE, render_by = "construction")
}
</pre>
</div>


<hr>
<a id="method-IdfGeometry-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Print an <code>IdfGeometry</code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>IdfGeometry$print()</pre></div>



<h5>Returns</h5>

<p>The <code>IdfGeometry</code> itself, invisibly.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
geom$print()
}
</pre>
</div>




<h3>Author(s)</h3>

<p>Hongyuan Jia
</p>


<h3>See Also</h3>

<p>Idf class
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## ------------------------------------------------
## Method `IdfGeometry$new`
## ------------------------------------------------

## Not run: 
# example model shipped with eplusr from EnergyPlus v8.8
path_idf &lt;- system.file("extdata/1ZoneUncontrolled.idf", package = "eplusr") # v8.8

# create from an Idf object
idf &lt;- read_idf(path_idf, use_idd(8.8, "auto"))
geom &lt;- idf$geometry()
geom &lt;- IdfGeometry$new(idf)

# create from an IDF file
geom &lt;- idf_geometry(path_idf)
geom &lt;- IdfGeometry$new(path_idf)

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$parent`
## ------------------------------------------------

## Not run: 
geom$parent()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$rules`
## ------------------------------------------------

## Not run: 
geom$rules()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$convert`
## ------------------------------------------------

## Not run: 
geom$convert()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$coord_system`
## ------------------------------------------------

## Not run: 
geom$coord_system("world", "world", "world")

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$round_digits`
## ------------------------------------------------

## Not run: 
geom$round_digits()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$area`
## ------------------------------------------------

## Not run: 
geom$area()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$azimuth`
## ------------------------------------------------

## Not run: 
geom$azimuth()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$tilt`
## ------------------------------------------------

## Not run: 
geom$tilt()

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$view`
## ------------------------------------------------

## Not run: 
idf$view()
idf$view(render_by = "zone")
idf$view(new = TRUE, render_by = "construction")

## End(Not run)

## ------------------------------------------------
## Method `IdfGeometry$print`
## ------------------------------------------------

## Not run: 
geom$print()

## End(Not run)
</code></pre>


</div>