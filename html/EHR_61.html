<div class="container">

<table style="width: 100%;"><tr>
<td>makeDose</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make Dose Data</h2>

<h3>Description</h3>

<p>Takes parsed and paired medication data, calculates dose intake and daily dose, and 
removes redundant information at the note and date level.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makeDose(x, noteMetaData, naFreq = "most")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame containing the output of <code>buildDose</code>, or the output
of <code>addLastDose</code> if last dose information is being incorporated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noteMetaData</code></td>
<td>
<p>data.frame containing identifying meta data for each
note, including patient ID, date of the note, and note ID. Column names
should be set to ‘filename’, ‘pid’, ‘date’,
‘note’. Date should have format YYYY-MM-DD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naFreq</code></td>
<td>
<p>Replacing missing frequencies with this value, or by default the most common value across
the entire set in <code>x</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function standardizes frequency, route, and duration entities. Dose amount, strength,
and frequency entities are converted to numeric. Rows with only drug name and/or route are
removed. If there are drug name changes in adjacent rows (e.g., from a generic to brand name),
these rows are collapsed into one row if there are no conflicts. Missing strengths, dose
amounts, frequencies, and routes are borrowed or imputed using various rules (see McNeer et al.,
2020 for details). Dose given intake and daily dose are calculated. Redundancies are removed at
the date and note level. If time of last dose is being used and it is unique within the level of
collapsing, it is borrowed across all rows.
</p>


<h3>Value</h3>

<p>A list containing two dataframes, one with the note level and one with the date level
collapsed data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(lam_mxr_parsed)
data(lam_metadata)

lam_build_out &lt;- buildDose(lam_mxr_parsed)

lam_collapsed &lt;- makeDose(lam_build_out, lam_metadata)
lam_collapsed[[1]] # Note level collapsing
lam_collapsed[[2]] # Date level collapsing
</code></pre>


</div>