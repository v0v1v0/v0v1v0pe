<div class="container">

<table style="width: 100%;"><tr>
<td>get_features</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes event-features</h2>

<h3>Description</h3>

<p>This function computes event features of 2D events.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_features(
  dat.xyz,
  res.cluster,
  normal.stats.splines,
  win_size = 200,
  tt = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat.xyz</code></td>
<td>
<p>The data in a cluster friendly format. The first two columns have <code>y</code> and <code>x</code> positions with the third column having the pixel value of that position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res.cluster</code></td>
<td>
<p>Cluster details from <code>dbscan</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normal.stats.splines</code></td>
<td>
<p>The background statistics, output from <code>spline_stats</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>win_size</code></td>
<td>
<p>The window length of the moving window model, default is set to <code>200</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tt</code></td>
<td>
<p>Related to event ages. For example if <code>tt=10</code> then the event ages are <code>10, 20, 30</code> and <code>40</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>Nx22x4</code> array  is returned for 2D data streams and an <code>Nx13x4</code> array for 3D data streams. Here <code>N</code> is the total number of  events extracted from all windows. The second dimension has <code>m</code> features and the class label for the <code>supervised</code> setting.  The third dimension has <code>4</code> different event ages : <code>tt, 2tt, 3tt, 4tt</code>.
For example, the element at <code>[10,6,3]</code> has the 6th feature, of the 10th extracted event when the age of the event is <code>3tt</code>. The features for 2D streams are listed below. For 3D streams the features <code>cluster_id, pixels, length, width, height, total_value, l2w_ratio, centroid_x, centroid_y, centroid_z, mean, std_dev</code> and <code>sd_from_global_mean</code> are computed.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>cluster_id</code></td>
<td>
<p>An identification number for each event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pixels</code></td>
<td>
<p>The number of pixels of each event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>length</code></td>
<td>
<p>The length of the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>The width of the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_value</code></td>
<td>
<p>The total value of the pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l2w_ratio</code></td>
<td>
<p>Length to width ratio of event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centroid_x</code></td>
<td>
<p>x coordinate of event centroid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centroid_y</code></td>
<td>
<p>y coordinate of event centroid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>Mean value of event pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std_dev</code></td>
<td>
<p>Standard deviation of event pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avg_slope</code></td>
<td>
<p>The slope of an <code>lm</code> object fitted to the event pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quad_1</code></td>
<td>
<p>The linear coefficient of  a second order polynomial fitted to event pixels using <code>lm</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quad_2</code></td>
<td>
<p>The quadratic coefficient of a second order polynomial fitted to event pixels using <code>lm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>2sd_from_mean</code></td>
<td>
<p>The proportion of event pixels/cells that has values greater than 2 global standard deviations from the global mean of the window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>3sd_from_mean</code></td>
<td>
<p>The proportion of event pixels/cells that has values greater than 3 global standard deviations from the global mean of the window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>4sd_from_mean</code></td>
<td>
<p>The proportion of event pixels/cells that has values greater than 4 global standard deviations from the global mean of the window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>5iqr_from_median</code></td>
<td>
<p>A small portion of each window and its column medians and column IQRs are used to construct two smoothing splines: a median spline and an IQR spline. The value of the median smoothing spline at each event centroid is used as the local median for that event. Similarly, the value of the IQR smoothing spline at each event centroid is used as the local IQR for that event. This feature gives the proportion of event pixels/cells  that has values greater than 5 local IQRs from the local median.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>6iqr_from_median</code></td>
<td>
<p>The proportion of event pixels/cells that has values greater than 6 local IQRs from the local median computed using splines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>7iqr_from_median</code></td>
<td>
<p>The proportion of event pixels/cells that has values greater than 7 local IQRs from the local median computed using splines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>8iqr_from_median</code></td>
<td>
<p>The proportion of event pixels/cells that has values greater than 8 local IQRs from the local median computed using splines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iqr_from_median</code></td>
<td>
<p>Let us denote the 75th percentile of the event pixels value by <code>x</code>. How many local IQRs is <code>x</code> is away from the local median? Both local IQR and local median are computed using splines. That value is given by this feature. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_from_mean</code></td>
<td>
<p>Let us denote the 80th percentile of the event pixels value by <code>x</code>. How many global standard deviations is <code>x</code> is away from the global mean? Here both global values are computed from window data. </p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">out &lt;- gen_stream(1, sd=15)
zz &lt;- as.matrix(out$data)
clst &lt;- get_clusters(zz, vis=TRUE)
sstats &lt;- spline_stats(zz[1:100,])
ftrs &lt;- get_features(clst$data, clst$clusters$cluster, sstats)
</code></pre>


</div>