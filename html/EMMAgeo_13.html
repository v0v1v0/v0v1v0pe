<div class="container">

<table style="width: 100%;"><tr>
<td>get.q</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a parameter matrix with q.min and q.max values for robust EMMA.</h2>

<h3>Description</h3>

<p>This function uses the input data matrix <code>X</code> and a vector of weight
transformation limits to generate a matrix of minimum and maximum likely 
numbers of end-members to be used to model and extract robust end-members.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get.q(
  X,
  l = 0,
  q.min = 2,
  q.max = 10,
  criteria.min = 0.5,
  criteria.max = "local_max",
  correct.output = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p><code>Numeric</code> matrix, input data set with m samples (rows) 
and n variables (columns).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l</code></td>
<td>
<p><code>Numeric</code> vector, weight transformation limits, default 
is zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q.min</code></td>
<td>
<p><code>Numeric</code> scalar, minimum number of end-members to use, 
default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q.max</code></td>
<td>
<p><code>Numeric</code> scalar, maximum number of end-members to use, 
default is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criteria.min</code></td>
<td>
<p><code>Numeric</code> scalar, minimum value of explained 
variance reached to be a valid model realisation, default is 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criteria.max</code></td>
<td>
<p><code>Character</code> or numeric scalar, either keyword 
<code>"local_max"</code> to use first local maximum or any numeric value of 
explained variance, default is <code>"local_max"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correct.output</code></td>
<td>
<p><code>Logical</code> scalar, option to correct the output 
for twisted values and remove combinations with NA-values. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments, passed to the function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The parameter <code>q.min</code> should be at least 2 because otherwise the 
entire dataset would consist of one end-member and there would be no
variability at all. The parameter <code>q.max</code> is set to 10 by default,
based on practical issues. In natural systems, there are only rarely 
occasions when such a high number of sediment transport regimes may be
preserved in and can be resolved from sedimentary deposits. The parameter
<code>l</code> should be a vector between the minimum possible (zero) and maximum
possible value (by definition the median, 0.5, but usually a lower value).
Whensubmitting only a scalar, the variability can be only due to the range
of possible endmembers (between <code>q.min</code> and <code>q.max</code>). If the 
parameter <code>correct.output</code> is enabled, this can decrease the number of 
valid values for <code>l</code>, i.e. the number of rows of the output matrix 
may no longer be the same as the length of the input vector of <code>l</code>. In 
such a case the vector <code>l</code> must be replaced by the rownames of the 
output matrix (<code>l &lt;- as.numeric(rownames(get.q()))</code>).
</p>


<h3>Value</h3>

<p><code>Numeric</code> matrix of class <code>"EMMAgeo_q"</code>, minimum and 
maximum numbers of end-members as well as corresponding weight 
transformation values as rownames.
</p>


<h3>Author(s)</h3>

<p>Michael Dietze, Elisabeth Dietze
</p>


<h3>References</h3>

<p>Dietze E, Hartmann K, Diekmann B, IJmker J, Lehmkuhl F, Opitz S,
Stauch G, Wuennemann B, Borchers A. 2012. An end-member algorithm for
deciphering modern detrital processes from lake sediments of Lake Donggi
Cona, NE Tibetan Plateau, China. Sedimentary Geology 243-244: 169-180.
</p>


<h3>See Also</h3>

<p><code>EMMA</code>, <code>test.parameters</code>, 
<code>test.robustness</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## load example data set
data("example_X")

## create parameter matrix
get.q(X = X, l = c(0, 0.05, 0.10, 0.15))

</code></pre>


</div>