<div class="container">

<table style="width: 100%;"><tr>
<td>ROC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to compute and draw ROC-curves.</h2>

<h3>Description</h3>

<p>Computes sensitivity, specificity and positive and negative predictive
values for a test based on dichotomizing along the variable
<code>test</code>, for prediction of <code>stat</code>. Plots curves of these and a ROC-curve.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ROC( test = NULL,
     stat = NULL,
     form = NULL,
     plot = c("sp", "ROC"),
       PS = is.null(test),
       PV = TRUE,
       MX = TRUE,
       MI = TRUE,
      AUC = TRUE,
     grid = seq(0,100,10),
 col.grid = gray( 0.9 ),
     cuts = NULL,
      lwd = 2,
     data = parent.frame(),
      ... )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p> Numerical variable used for prediction. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p> Logical variable of true status. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form</code></td>
<td>
<p> Formula used in a logistic regression. If this is given,
<code>test</code> and <code>stat</code> are ignored. If not given then
both <code>test</code> and <code>stat</code> must be supplied. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p> Character variable. If "sp", the a plot of sensitivity,
specificity and predictive values against test is produced, if "ROC" a
ROC-curve is plotted. Both may be given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PS</code></td>
<td>
<p>logical, if TRUE the x-axis in the
plot "ps"-plot is the the predicted probability for
<code>stat</code>==TRUE, otherwise it is the scale of <code>test</code> if this
is given otherwise the scale of the linear predictor from the
logistic regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PV</code></td>
<td>
<p>Should sensitivity, specificity and
predictive values at the optimal cutpoint be given on the ROC plot? </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MX</code></td>
<td>
<p>Should the “optimal cutpoint” (i.e. where sens+spec is
maximal) be indicated on the ROC curve?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MI</code></td>
<td>
<p>Should model summary from the logistic
regression model be printed in the plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AUC</code></td>
<td>
<p>Should the area under the curve (AUC) be printed in the ROC
plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>Numeric or logical. If FALSE no background grid is
drawn. Otherwise a grid is drawn on both axes at <code>grid</code> percent.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.grid</code></td>
<td>
<p>Colour of the grid lines drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cuts</code></td>
<td>
<p>Points on the test-scale to be annotated on the
ROC-curve. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>Thickness of the curves</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame in which to interpret the variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments for the plotting of the
ROC-curve. Passed on to <code>plot</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>As an alternative to a <code>test</code> and a <code>status</code> variable, a
model formula may given, in which case the the linear predictor is the
test variable and the response is taken as the true status variable.
The test used to derive  sensitivity, specificity, PV+ and PV- as a
function of <code class="reqn">x</code> is <code>test</code><code class="reqn">\geq x</code> as a predictor of
<code>stat</code>=TRUE.
</p>


<h3>Value</h3>

<p>A list with two components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>dataframe with variables <code>sens</code>, <code>spec</code>,
<code>pvp</code>, <code>pvn</code> and name of the test variable. The latter is
the unique values of test or linear predictor from the logistic
regression in ascending order with -Inf prepended. Since the
sensitivity is defined as <code class="reqn">P(test&gt;x)|status=TRUE</code>, the first row
has <code>sens</code> equal to 1 and <code>spec</code> equal to 0, corresponding
to drawing the ROC curve from the upper right to the lower left corner.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lr</code></td>
<td>
<p>glm object with the logistic regression result used for
construction of the ROC curve</p>
</td>
</tr>
</table>
<p>0, 1 or 2 plots are produced according to the setting of <code>plot</code>.
</p>


<h3>Author(s)</h3>

<p>Bendix Carstensen, Steno Diabetes Center Copenhagen,
<a href="http://bendixcarstensen.com">http://bendixcarstensen.com</a> </p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- rnorm( 100 )
z &lt;- rnorm( 100 )
w &lt;- rnorm( 100 )
tigol &lt;- function( x ) 1 - ( 1 + exp( x ) )^(-1)
y &lt;- rbinom( 100, 1, tigol( 0.3 + 3*x + 5*z + 7*w ) )
ROC( form = y ~ x + z, plot="ROC" )
</code></pre>


</div>