<div class="container">

<table style="width: 100%;"><tr>
<td>estimate_risk_spread</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Travel-related disease cases spreaded to other locations from an infectious
location</h2>

<h3>Description</h3>

<p>Calculates the mean and 95% confidence interval of the estimated number of
disease cases that could potentially seed a disease outbreak in the locations
they are travelling to, comprising exportations (infected residents of the infectious
location travelling abroad during the incubation or infectious period), and
importations (international tourists infected by the disease during
their stay in the infectious location and returning to their home location).
The mean and 95% confidence intervals are obtained by numerically sampling
<code>n_sim</code> times from the incubation and infectious period distributions.
If parameter <code>return_all_simulations</code> is set to <code>TRUE</code>, the function returns all simulations
for each location.
</p>


<h3>Usage</h3>

<pre><code class="language-R">estimate_risk_spread(...)

## Default S3 method:
estimate_risk_spread(
  location_code = character(0),
  location_population = numeric(0),
  num_cases_time_window = numeric(0),
  first_date_cases = character(0),
  last_date_cases = character(0),
  num_travellers_to_other_locations = numeric(0),
  num_travellers_from_other_locations = numeric(0),
  avg_length_stay_days = numeric(0),
  r_incubation = function(n) {
 },
  r_infectious = function(n) {
 },
  n_sim = 1000,
  return_all_simulations = FALSE,
  ...
)

## S3 method for class 'epiflows'
estimate_risk_spread(
  x,
  location_code = character(0),
  r_incubation = function(n) {
 },
  r_infectious = function(n) {
 },
  n_sim = 1000,
  return_all_simulations = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed onto the default method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location_code</code></td>
<td>
<p>a character string denoting the infectious location code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location_population</code></td>
<td>
<p>population of the infectious location</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_cases_time_window</code></td>
<td>
<p>cumulative number of cases in infectious
location in time window</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first_date_cases</code></td>
<td>
<p>string with the date of the first disease case in
infectious location ("YYYY-MM-DD")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last_date_cases</code></td>
<td>
<p>string with the date of the last disease case in
infectious location ("YYYY-MM-DD")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_travellers_to_other_locations</code></td>
<td>
<p>number of travellers from the
infectious location visiting other locations (T_D)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_travellers_from_other_locations</code></td>
<td>
<p>number of travellers from other
locations visiting the infectious location (T_O)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avg_length_stay_days</code></td>
<td>
<p>average length of stay in days of travellers from
other locations visiting the infectious location. This can be a common
number for all locations or a vector with different numbers for each
location</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r_incubation</code></td>
<td>
<p>a function with a single argument <code>n</code>
generating 'n' random incubation periods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r_infectious</code></td>
<td>
<p>a function with a single argument <code>n</code>
generating 'n' random durations of infectious period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sim</code></td>
<td>
<p>number of simulations from the incubation and
infectious distributions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_all_simulations</code></td>
<td>
<p>logical value indicating whether the returned object is a data frame with all simulations
(<code>return_all_simulations = TRUE</code>) or a data frame with the mean and lower and upper limits of a 95% confidence interval of
the number of cases spread to each location (<code>return_all_simulations = FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an epiflows object</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>if <code>return_all_simulations</code> is <code>TRUE</code>, data frame with all simulations. If <code>return_all_simulations</code> is <code>FALSE</code>,
data frame with the mean and lower and upper limits of a 95% confidence interval of the number
of cases spread to each location
</p>


<h3>Author(s)</h3>

<p>Paula Moraga, Zhian Kamvar (epiflows class implementation)
</p>


<h3>References</h3>

<p>Dorigatti I, Hamlet A, Aguas R, Cattarino L, Cori A, Donnelly CA,
Garske T, Imai N, Ferguson NM. International risk of yellow fever spread from
the ongoing outbreak in Brazil, December 2016 to May 2017. Euro Surveill.
2017;22(28):pii=30572. DOI: <a href="https://doi.org/10.2807/1560-7917.ES.2017.22.28.30572">doi:10.2807/1560-7917.ES.2017.22.28.30572</a>
</p>


<h3>See Also</h3>

<p>Construction of epiflows object: <code>make_epiflows()</code><br>
Default variables used in the epiflows implementation: <code>global_vars()</code><br>
Access metadata from the epiflows object: <code>get_vars()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Using an epiflows object --------------------------------

data("YF_flows")
data("YF_locations")
ef &lt;- make_epiflows(flows         = YF_flows, 
                    locations     = YF_locations, 
                    pop_size      = "location_population",
                    duration_stay = "length_of_stay",
                    num_cases     = "num_cases_time_window",
                    first_date    = "first_date_cases",
                    last_date     = "last_date_cases"
)
## functions generating incubation and infectious periods
incubation &lt;- function(n) {
  rlnorm(n, 1.46, 0.35)
}

infectious &lt;- function(n) {
  rnorm(n, 4.5, 1.5/1.96)
}

res &lt;- estimate_risk_spread(ef, 
                            location_code          = "Espirito Santo",
                            r_incubation           = incubation,
                            r_infectious           = infectious,
                            n_sim                  = 1e5,
                            return_all_simulations = TRUE)
boxplot(res, las = 3)

## Using other data --------------------------------------------------
data(YF_Brazil)
indstate &lt;- 1 # "Espirito Santo" (indstate = 1), 
              # "Minas Gerais" (indstate = 2), 
              # "Southeast Brazil" (indstate = 5)

res &lt;- estimate_risk_spread(
  location_code = YF_Brazil$states$location_code[indstate], 
  location_population = YF_Brazil$states$location_population[indstate], 
  num_cases_time_window = YF_Brazil$states$num_cases_time_window[indstate], 
  first_date_cases = YF_Brazil$states$first_date_cases[indstate], 
  last_date_cases = YF_Brazil$states$last_date_cases[indstate],
  num_travellers_to_other_locations = YF_Brazil$T_D[indstate,],
  num_travellers_from_other_locations = YF_Brazil$T_O[indstate,],
  avg_length_stay_days = YF_Brazil$length_of_stay,
  r_incubation = incubation,
  r_infectious = infectious,
  n_sim = 100000,
  return_all_simulations = FALSE
)
head(res)

</code></pre>


</div>