<div class="container">

<table style="width: 100%;"><tr>
<td>get_tpi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get an object to fit the TPI dose-finding model.</h2>

<h3>Description</h3>

<p>The toxicity probability interval (TPI)is a dose-escalation design
by Ji et al.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_tpi(
  num_doses,
  target,
  k1,
  k2,
  exclusion_certainty,
  alpha = 0.005,
  beta = 0.005,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>num_doses</code></td>
<td>
<p>Number of doses under investigation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>We seek a dose with this probability of toxicity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k1</code></td>
<td>
<p>The K1 parameter in TPI determines the upper bound of the
equivalence interval. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k2</code></td>
<td>
<p>The K2 parameter in TPI determines the lower bound of the
equivalence interval. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclusion_certainty</code></td>
<td>
<p>Numeric, threshold posterior certainty required to
exclude a dose for being excessively toxic. The authors discuss values in the
range 0.7 - 0.95. Set to a value &gt; 1 to suppress the dose exclusion
mechanism. The authors use the Greek letter xi for this parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>First shape parameter of the beta prior distribution on the
probability of toxicity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>Second shape parameter of the beta prior distribution on the
probability of toxicity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra args are passed onwards.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an object of type <code>selector_factory</code> that can fit the
TPI model to outcomes.
</p>


<h3>Details</h3>

<p>The design seeks a dose with probability of toxicity <code class="reqn">p_{i}</code>
close to a target probability <code class="reqn">p_{T}</code> by iteratively calculating the
interval </p>
<p style="text-align: center;"><code class="reqn">p_{T} - K_{2} \sigma_{i} &lt; p_{i} &lt; p_{T} + K_{1} \sigma_{i}</code>
</p>

<p>In this model, <code class="reqn">K_{1}</code> and <code class="reqn">K_{2}</code> are specified constants and
<code class="reqn">\sigma_{i}</code> is the standard deviation of <code class="reqn">p_{i}</code> arising from a
Bayesian beta-binomial conjugate model
</p>
<p style="text-align: center;"><code class="reqn">p_{i} | data \sim Beta(\alpha + x_{i}, \beta + n_{i} - x_{i}),</code>
</p>

<p>where <code class="reqn">x_{i}</code> is the number of toxicities observed and <code class="reqn">n_{i}</code> is the
number of patients treated at dose <code class="reqn">i</code>, and <code class="reqn">\alpha</code> and <code class="reqn">\beta</code>
are hyperparameters for the beta prior on <code class="reqn">p_{i}</code>.
A dose is excluded as inadmissible if
</p>
<p style="text-align: center;"><code class="reqn">P(p_{i} &gt; p_{T} | data) &gt; \xi</code>
</p>

<p>The trial commences at a starting dose, possibly dose 1. If dose <code class="reqn">i</code>
has just been evaluated in patient(s), dose selection decisions proceed by
calculating the posterior probability that the true toxicity rate at dose
<code class="reqn">i</code> belongs to the three partition regions
<code class="reqn">p_{i} &lt; p_{T} - K_{2} \sigma_{i}</code>,
<code class="reqn">p_{T} - K_{2} \sigma_{i} &lt; p_{i} &lt; p_{T} + K_{1} \sigma_{i}</code>, and
<code class="reqn">p_{i} &gt; p_{T} + K_{2} \sigma_{i}</code>, corresponding to decisions escalate,
stay, and de-escalate dose, respectively. Further to this are rules that
prevent escalation to an inadmissible dose.
In their paper, the authors demonstrate acceptable operating performance
using <code class="reqn">\alpha = \beta = 0.005</code>, <code class="reqn">K_{1} = 1</code>, <code class="reqn">K_{2} = 1.5</code> and
<code class="reqn">\xi = 0.95</code>.
See the publications for full details.
</p>


<h3>References</h3>

<p>Ji, Y., Li, Y., &amp; Bekele, B. N. (2007).
Dose-finding in phase I clinical trials based on toxicity probability
intervals.
Clinical Trials, 4(3), 235–244. https://doi.org/10.1177/1740774507079442
</p>
<p>Ji, Y., &amp; Yang, S. (2017).
On the Interval-Based Dose-Finding Designs, 1–26.
Retrieved from https://arxiv.org/abs/1706.03277
</p>


<h3>Examples</h3>

<pre><code class="language-R">target &lt;- 0.25
model1 &lt;- get_tpi(num_doses = 5, target = target, k1 = 1, k2 = 1.5,
  exclusion_certainty = 0.95)

outcomes &lt;- '1NNN 2NTN'
model1 %&gt;% fit(outcomes) %&gt;% recommended_dose()

</code></pre>


</div>