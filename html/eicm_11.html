<div class="container">

<table style="width: 100%;"><tr>
<td>generateEICM</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate EICM model following a Beta frequency distribution</h2>

<h3>Description</h3>

<p>Generates a randomly parameterized EICM model (predictors, environmental coefficients and species interactions),
ensuring that communities simulated with this model have a frequency distribution that matches the given Beta
distribution of frequencies as much as possible.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generateEICM(
  nspecies,
  nsamples,
  nenv,
  ninteractions,
  shape1,
  shape2,
  nbins = 10,
  nrepetitions = 5,
  shrinkage = 2,
  bounds = 10,
  swarm.size = floor((ninteractions + nspecies * (nenv + 1)) * 0.5),
  maxit.stagnate = 150
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nspecies</code></td>
<td>
<p>the number of species to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsamples</code></td>
<td>
<p>the number of samples to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nenv</code></td>
<td>
<p>the number of environmental predictors to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ninteractions</code></td>
<td>
<p>the number of species interactions to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape1</code></td>
<td>
<p>the shape1 parameter of the Beta distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape2</code></td>
<td>
<p>the shape2 parameter of the Beta distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbins</code></td>
<td>
<p>the number of histogram bins for comparing distributions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrepetitions</code></td>
<td>
<p>the number of times to realize a model candidate to average their distributions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shrinkage</code></td>
<td>
<p>the shrinkage factor for generated coefficients, when computing fitness criterion.
Ensures that the generated coefficients remain at plausible values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>the allowed range for the coefficients <code>c(-bounds, +bounds)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>swarm.size</code></td>
<td>
<p>the swarm size of the particle swarm optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxit.stagnate</code></td>
<td>
<p>the number of iterations without improvement until the optimization stops.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is useful for generating a realistic random model for simulation, i.e. a model that, when simulated, will
yield species communities with a distribution of frequencies akin of real communities: with most species being rare.
The generated coefficients are not assumed to follow any distribution, but are optionally shrinked so that
their values will remain "decent". The values of the environmental predictors are drawn from a gaussian distribution.
</p>


<h3>Value</h3>

<p>A EICM model of class <code>eicm</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Generate model with 32 species, 30 species interactions and 2 environmental predictors
# for 500 samples with a frequency distribution following a Beta(1.5, 3)
model &lt;- generateEICM(nspecies=32, nsamples=500, nenv=2, ninteractions=30,
  shape1=1.5, shape2=3)

# make one realization
data &lt;- predict(model, nrepetitions=1)

# plot frequency histogram: should follow a Beta distribution.
hist(apply(data, 2, sum) / nrow(data), breaks=seq(0, 1, by=0.1), xlim=c(0, 1),
  main="Frequency distribution of one realization", xlab="Frequency in samples",
  ylab="Number of species")

</code></pre>


</div>