<div class="container">

<table style="width: 100%;"><tr>
<td>msfit_generic</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute subject-specific transition hazards.</h2>

<h3>Description</h3>

<p>This function computes subject-specific or overall cumulative transition
hazards for each of the possible transitions in the multi-state model.
This help page is an adaptation of the <code>mstate::msfit</code> help page.
</p>


<h3>Usage</h3>

<pre><code class="language-R">msfit_generic(object, ...)

## Default S3 method:
msfit_generic(
  object,
  newdata,
  variance = TRUE,
  vartype = c("aalen", "greenwood"),
  trans,
  ...
)

## S3 method for class 'coxrfx'
msfit_generic(object, newdata, trans, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object describing the fit of
a multi-state Cox model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>A data frame in ‘long format’. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variance</code></td>
<td>
<p>A logical value indicating whether the
(co-)variances of the subject-specific transition hazards should be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vartype</code></td>
<td>
<p>A character string specifying the type of
variances to be computed (so only needed if variance=TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trans</code></td>
<td>
<p>Transition matrix describing the states and transitions in 
the multi-state model. See <code>trans</code> in <code>mstate::msprep</code>
for more detailed information.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The purpose of <code>msfit_generic</code> is to be able to use 
<code>mstate::msfit</code> on model fit objects of class <code>coxrfx</code> 
(i.e. objects generated by <code>CoxRFX</code>). This can now be done
with <code>msfit_generic.coxrfx</code>, which introduces minor modifications
to <code>mstate::msfit</code>. In particular, it precludes <code>msfit</code> from 
computing the (co-)variances of transition hazard estimators, as this
computation relies on asymptotic results for the fixed effects Cox model
(see de Wreede et al, 2010, section 2.3.2). The method <code>msfit_generic.default</code>
corresponds to the original <code>mstate::msfit</code> function. 
The data frame given as <code>newdata</code> input needs to have one row for each transition
in the multi-state model, and one column for each covariate.
An additional column strata (numeric) is needed to describe for each transition to
which stratum it belongs. The name has to be <code>strata</code>, even if in the original
<code>coxph</code> call another variable was used. See <code>msfit</code> for more details.
</p>


<h3>Value</h3>

<p>An 'msfit' object. See <code>mstate::msfit</code> for details.
If the S3 method <code>msfit_generic.coxrfx</code> is called, the 
returned object will be of class <code>c(msfit,coxrfx)</code>; 
otherwise, it will be of class <code>msfit</code>.
</p>


<h3>Author(s)</h3>

<p>Rui Costa, adapting the work of L. de Wreede,
M. Fiocco and H. Putter in the
<code>mstate</code> package.
</p>


<h3>References</h3>

<p>de Wreede LC, Fiocco M, and Putter H (2010). The mstate package for 
estimation and prediction in non- and semi-parametric multi-state and 
competing risks models. <em>Computer Methods and Programs in Biomedicine</em> 
<strong>99</strong>, 261–274.
</p>


<h3>See Also</h3>

<p><code>mstate::msfit</code>; <code>mstate::msprep</code>; <code>mstate::plot.msfit</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Compute cumulative hazard rates
# under a (pre-estimated) empirical Bayes Cox
# model.

#load simulated data (illness-death model,
#500 patients) and estimated empirical
# Bayes Cox model
data("mstate_data_sample")
data("coxrfx_object_sample")

# Make objects 'surv' and 'Z'
# with the data used in the estimation

#outcome data
surv&lt;-coxrfx_object_sample$surv

#covariate data
Z&lt;-coxrfx_object_sample$Z

# Build a data frame 'patient_data'
# with the covariate values for which 
# cumulative hazards are to be computed
# (patient 1 covariate values in this case).
# 'patient_data' must have one row for each
# transition in the model 
# and the same columns as 'Z'. The assignment
# of transitions to strata (made in the 'strata'
# column) must follow the original model in
# 'coxrfx_object_sample'.

patient_data&lt;-mstate_data_sample[mstate_data_sample$id==1,
   ,drop=FALSE][rep(1,3),]
patient_data$strata&lt;-patient_data$trans&lt;-1:3
patient_data&lt;-mstate::expand.covs(patient_data,
   covs=names(patient_data)[!names(patient_data)%in%
   c("id","from","to","trans","Tstart","Tstop","time",
   "to","trans","Tstart","Tstop","time","status",
   "strata")],append=TRUE)

# compute cumulative hazards
msfit_object&lt;-msfit_generic(coxrfx_object_sample,
                            patient_data,
                            coxrfx_object_sample$tmat)

# show estimates
print(msfit_object)
</code></pre>


</div>