<div class="container">

<table style="width: 100%;"><tr>
<td>etl_init</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Initialize a database using a defined schema</h2>

<h3>Description</h3>

<p>Initialize a database using a defined schema
</p>


<h3>Usage</h3>

<pre><code class="language-R">etl_init(
  obj,
  script = NULL,
  schema_name = "init",
  pkg = attr(obj, "pkg"),
  ext = NULL,
  ...
)

## Default S3 method:
etl_init(
  obj,
  script = NULL,
  schema_name = "init",
  pkg = attr(obj, "pkg"),
  ext = NULL,
  ...
)

find_schema(obj, schema_name = "init", pkg = attr(obj, "pkg"), ext = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>An <code>etl</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>script</code></td>
<td>
<p>either a vector of SQL commands to be executed, or
a file path as a character vector containing an SQL initialization script.
If <code>NULL</code> (the default), then the appropriate built-in
schema will be fetched by <code>find_schema</code>, if it exists. Note
that the flavor of SQL in this file must match the type of the source. That is,
if your object is of type <code>src_mysql</code>, then make sure that
the schema you specify here is written in MySQL (and not PostgreSQL). Please
note that SQL syntax is not, in general, completely portable. Use with caution, as this may
clobber any existing data you have in an existing database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>schema_name</code></td>
<td>
<p>The name of the schema. Default is <code>init</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkg</code></td>
<td>
<p>The package defining the schema. Should be set in <code>etl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ext</code></td>
<td>
<p>The file extension used for the SQL schema file. If NULL (the default) it
be inferred from the <code>src_*</code> class of <code>con</code>. For example, if <code>con</code>
has class <code>SQLite</code> then <code>ext</code> will be <code>sqlite</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently ignored</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the table definitions are at all non-trivial,
you may wish to include a pre-defined table schema. This function
will retrieve it.
</p>


<h3>Examples</h3>

<pre><code class="language-R">cars &lt;- etl("mtcars")
cars %&gt;%
  etl_init()
cars %&gt;%
  etl_init(script = sql("CREATE TABLE IF NOT EXISTS mtcars_alt (id INTEGER);"))
cars %&gt;%
  etl_init(schema_name = "init")
init_script &lt;- find_schema(cars, schema_name = "init")
cars %&gt;%
  etl_init(script = init_script, echo = TRUE)
src_tbls(cars)

cars &lt;- etl("mtcars")
find_schema(cars)
find_schema(cars, "init", "etl")
find_schema(cars, "my_crazy_schema", "etl")

</code></pre>


</div>