<div class="container">

<table style="width: 100%;"><tr>
<td>stop_at_n</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Stop when there are n patients in total.</h2>

<h3>Description</h3>

<p>This function adds a restriction to stop a trial when n patients have been
evaluated. It does this by adding together the number of patients treated at
all doses and stopping when that total exceeds n.
</p>
<p>Dose selectors are designed to be daisy-chained together to achieve different
behaviours. This class is a **greedy** selector, meaning that it prioritises
its own behaviour over the behaviour of other selectors in the chain. That
is, it will advocate stopping when the condition has been met, even if the
selectors further up the chain would advocate to keep going. In can be
interpreted as an overriding selector. This allows the decision to stop to
be executed as soon as it is warranted. Be aware though, that there are other
selectors that can be placed after this class that will override the stopping
behaviour. See Examples.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stop_at_n(parent_selector_factory, n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>parent_selector_factory</code></td>
<td>
<p>Object of type <code>selector_factory</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Stop when there are this many patients.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an object of type <code>selector_factory</code> that can fit a
dose-finding model to outcomes.
</p>


<h3>Examples</h3>

<pre><code class="language-R">skeleton &lt;- c(0.05, 0.1, 0.25, 0.4, 0.6)
target &lt;- 0.25

# Create CRM model that will stop when 15 patients are evaluated:
model1 &lt;- get_dfcrm(skeleton = skeleton, target = target) %&gt;%
  stop_at_n(n = 15)

# With 12 patients, this trial should not stop:
fit1 &lt;- model1 %&gt;% fit('1NNN 2NTN 2TNN 2NNN')
fit1 %&gt;% recommended_dose()
fit1 %&gt;% continue()

# With 15 patients, this trial should stop:
fit2 &lt;- model1 %&gt;% fit('1NNN 2NTN 2TNN 2NNN 2NTT')
fit2 %&gt;% recommended_dose()
fit2 %&gt;% continue()

# The stopping behaviour can be overruled by the order of selectors.
# In model2, demanding 9 at recommended dose will trump stopping at 12:
model2 &lt;- get_dfcrm(skeleton = skeleton, target = target) %&gt;%
  stop_at_n(n = 12) %&gt;%
  demand_n_at_dose(dose = 'recommended', n = 9)

# In model3, stopping at 12 will trump demanding 9 at recommended dose:
model3 &lt;- get_dfcrm(skeleton = skeleton, target = target) %&gt;%
  demand_n_at_dose(dose = 'recommended', n = 9) %&gt;%
  stop_at_n(n = 12)

# This model will continue because 9 have not been seen at recommended dose.
fit3 &lt;- model2 %&gt;% fit('1NNN 2NNN 2NNN 3NNN')
fit3 %&gt;% recommended_dose()
fit3 %&gt;% continue()

# This model will stop because 12 have been seen.
fit4 &lt;- model3 %&gt;% fit('1NNN 2NNN 2NNN 3NNN')
fit4 %&gt;% recommended_dose()
fit4 %&gt;% continue()

# With enough observations though, both models will advise stopping because
# both conditions have been met:
fit5 &lt;- model2 %&gt;% fit('1NNN 2NNN 2NNN 5NNN 5NNN 5NNN')
fit5 %&gt;% recommended_dose()
fit5 %&gt;% continue()

fit6 &lt;- model3 %&gt;% fit('1NNN 2NNN 2NNN 5NNN 5NNN 5NNN')
fit6 %&gt;% recommended_dose()
fit6 %&gt;% continue()

</code></pre>


</div>