<div class="container">

<table style="width: 100%;"><tr>
<td>myop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Myopic eye data</h2>

<h3>Description</h3>

<p>Pivot "eye" variable to one column
</p>


<h3>Usage</h3>

<pre><code class="language-R">myop(x, var = "value")

myopic(x, var = "value")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>Character vector of length 1 specifying the variable if there
is only one column per eye with no further info on the variable
(default "value")</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Out of convenience, data is often entered in a very "wide" format:
there will be two columns for the same variable, one column for each eye.
myop will pivot the eye variable to one column and keep all other
variables wide. E.g., eight columns that store data of four variables for two eyes
will be pivoted to 5 columns (one eye and four further variable columns,
see also <em>examples</em>).
</p>
<p><strong>myop requires a specific data format</strong>
</p>
<p>If there is a column called "eye" or "eyes", myop will not make
any changes - because the data is then already assumed to be in long
format. If you <em>also</em> have columns with eye-specific values,
then you have messy data. Maybe, you could remove or rename the "eye"
column and then let myop do the work.
</p>
<p>myop will only recognize meaningful coding for eyes:
</p>

<ul>
<li>
<p> Right eyes: <em>"r", "re", "od", "right"</em>
</p>
</li>
<li>
<p> Left eyes:  <em>"l", "le", "os", "left"</em>
</p>
</li>
<li>
<p> for other codes see also eye_codes
The strings for eyes need to be <strong>separated by period or underscores</strong>.
(Periods will be replaced by underscores). Any order is allowed.
</p>
</li>
<li> <p><strong>Will work</strong>: "va_r", "right_morningpressure", "night_iop.le", "gat_os_postop"
</p>
</li>
<li> <p><strong>Will fail</strong>: "VAr", "rightmorningPressure", "night_IOPle", "gatOSpostop"
</p>
</li>
</ul>
<p>An exception is when there is only one column for each eye. Then
the column names can consist of eye strings (see above) only.
In this case, <em>var</em> will be used to "name" the resulting variable.
</p>
<p>If there are only eye columns in your data (should actually not happen),
myop will create identifiers by row position.
</p>
<p><strong>Please always check the result for plausibility.</strong>
Depending a lot on how the data was entered, the results could become
quite surprising. There is basically a nearly infinite amount of
possible combinations of how to enter data, and it is likely that
myop will not be able to deal with all of them
</p>


<h3>Value</h3>

<p>A tibble, see also tibble::tibble
</p>


<h3>internal preparation</h3>


<ul>
<li>
<p> Rename data names with  myop_rename, replacing "." with "_"
</p>
</li>
<li>
<p> Use of <code>sort_substr()</code> - sorting eye strings first, then strings coding
for methods  (IOP/VA), then the rest.
</p>
</li>
</ul>
<h3>myopization</h3>

<p>The actual work is done with myopizer and myop_pivot
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example to clean a bit messy data frame
iopva &lt;- data.frame(
  id = c("a", "e", "j", "h"),
  va_r = c(37L, 36L, 33L, 38L),
  iop_r = c(38L, 40L, 33L, 34L),
  va_l = c(30L, 39L, 37L, 40L),
  iop_l = c(31L, 34L, 33L, 31L)
)
myop(iopva)

iop_wide &lt;- data.frame(id = letters[1:3],  r = 11:13 , l = 14:16)
# the variable has not been exactly named, so you can specify
# it with the var argument
myop(iop_wide, var = "iop")
</code></pre>


</div>