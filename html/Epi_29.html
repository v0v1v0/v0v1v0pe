<div class="container">

<table style="width: 100%;"><tr>
<td>cal.yr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Functions to convert character, factor and various date objects into a number,
and vice versa.
</h2>

<h3>Description</h3>

<p>Dates are converted to a numerical value, giving the calendar year as
a fractional number. 1 January 1970 is converted to 1970.0, and other
dates are converted by assuming that years are all 365.25 days long,
so inaccuracies may arise, for example, 1 Jan 2000 is converted to
1999.999. Differences between converted values will be 1/365.25 of the
difference between corresponding <code>Date</code> objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  cal.yr( x, format="%Y-%m-%d", wh=NULL )
  ## S3 method for class 'cal.yr'
as.Date( x, ... )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A factor or character vector, representing a date in format
<code>format</code>, or an object of class
<code>Date</code>,
<code>POSIXlt</code>,
<code>POSIXct</code>,
<code>date</code>,
<code>dates</code> or
<code>chron</code> (the latter two requires the <code>chron</code> package).
If <code>x</code> is a data frame, all variables in the data-frame
which are of one the classes mentioned are converted to class <code>cal.yr</code>.
See arguemt <code>wh</code>, though.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>Format of the date values if <code>x</code> is factor or character.
If this argument is supplied and <code>x</code> is a datafame, all
character variables are converted to class <code>cal.yr</code>.
Factors in the dataframe will be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wh</code></td>
<td>
<p>Indices of the variables to convert if <code>x</code> is a data frame.
Can be either a numerical or character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed on from other methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>cal.yr</code> returns a numerical vector of the same length as
<code>x</code>, of class <code>c("cal.yr","numeric")</code>. If <code>x</code> is a data frame
a dataframe with some of the columns converted to class <code>"cal.yr"</code> is
returned.
</p>
<p><code>as.Date.cal.yr</code> returns a <code>Date</code> object.
</p>


<h3>Author(s)</h3>

<p>Bendix Carstensen, Steno Diabetes Center Copenhagen, <a href="mailto:b@bxc.dk">b@bxc.dk</a>,
<a href="http://bendixcarstensen.com">http://bendixcarstensen.com</a>
</p>


<h3>See Also</h3>

<p><code>DateTimeClasses</code>,
<code>Date</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"> # Character vector of dates:
 birth &lt;- c("14/07/1852","01/04/1954","10/06/1987","16/05/1990",
            "12/11/1980","01/01/1997","01/01/1998","01/01/1999")
 # Proper conversion to class "Date":
 birth.dat &lt;- as.Date( birth, format="%d/%m/%Y" )
 # Converson of character to class "cal.yr"
 bt.yr &lt;- cal.yr( birth, format="%d/%m/%Y" )
 # Back to class "Date":
 bt.dat &lt;- as.Date( bt.yr )
 # Numerical calculation of days since 1.1.1970:
 days &lt;- Days &lt;- (bt.yr-1970)*365.25
 # Blunt assignment of class:
 class( Days ) &lt;- "Date"
 # Then data.frame() to get readable output of results:
 data.frame( birth, birth.dat, bt.yr, bt.dat, days, Days, round(Days) )
</code></pre>


</div>