<div class="container">

<table style="width: 100%;"><tr>
<td>get_features_3d</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes event-features</h2>

<h3>Description</h3>

<p>This function computes event features of 3D events.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_features_3d(dat.xyz, res.cluster, normal.stats, win_size, tt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat.xyz</code></td>
<td>
<p>The data in a cluster friendly format. The first three columns have <code>t</code>,<code>x</code> and <code>y</code> positions with the fourth column having the pixel value of that position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res.cluster</code></td>
<td>
<p>Cluster details from <code>dbscan</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normal.stats</code></td>
<td>
<p>The background statistics, output from <code>stats_3d</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>win_size</code></td>
<td>
<p>The window length of the moving window model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tt</code></td>
<td>
<p>Related to event ages. For example if <code>tt=10</code> then the event ages are <code>10, 20, 30</code> and <code>40</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>Nx22x4</code> array  is returned. Here <code>N</code> is the total number of  events extracted in all windows. The second dimension has <code>30</code> features and the class label for the <code>supervised</code> setting.  The third dimension has <code>4</code> different event ages : <code>tt, 2tt, 3tt, 4tt</code>.
For example, the element at <code>[10,6,3]</code> has the 6th feature,   of the 10th extracted event when the age of the event is <code>3tt</code>. The features are listed below:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>cluster_id</code></td>
<td>
<p>An identification number for each event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pixels</code></td>
<td>
<p>The number of pixels of each event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>length</code></td>
<td>
<p>The length of the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>The width of the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_value</code></td>
<td>
<p>The total value of the pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l2w_ratio</code></td>
<td>
<p>Length to width ratio of event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centroid_x</code></td>
<td>
<p>x coordinate of event centroid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centroid_y</code></td>
<td>
<p>y coordinate of event centroid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centroid_z</code></td>
<td>
<p>z coordinate of event centroid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>Mean value of event pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std_dev</code></td>
<td>
<p>Standard deviation of event pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slope</code></td>
<td>
<p>Slope of a linear model fitted to the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quad1</code></td>
<td>
<p>First coefficient of a quadratic model fitted to the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quad2</code></td>
<td>
<p>Second coefficient of a quadratic model fitted to the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_from_mean</code></td>
<td>
<p>Let us denote the 80th percentile of the event pixels value by <code>x</code>. How many  standard deviations is <code>x</code> is away from the mean? </p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">set.seed(1)
arr &lt;- array(rnorm(12000),dim=c(40,25,30))
arr[25:33,12:20, 20:23] &lt;- 10
# getting events
out &lt;- get_clusters_3d(arr, thres=0.985)
mean_sd &lt;- stats_3d(arr[1:20,1:6,1:8])
ftrs &lt;- get_features_3d(out$data, out$cluster$cluster, mean_sd, win_size=40, tt=2 )
</code></pre>


</div>