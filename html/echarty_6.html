<div class="container">

<table style="width: 100%;"><tr>
<td>ec.init</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Initialize command</h2>

<h3>Description</h3>

<p>Required to build a chart. In most cases this will be the only command necessary.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ec.init(
  df = NULL,
  preset = TRUE,
  ctype = "scatter",
  ...,
  series.param = NULL,
  tl.series = NULL,
  width = NULL,
  height = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Optional data.frame to be preset as <a href="https://echarts.apache.org/en/option.html#dataset">dataset</a>, default NULL <br>
By default the first column is for X values, second column is for Y, and third is for Z when in 3D.<br>
Best practice is to have the grouping column placed last. Grouping column cannot be used as axis.<br>
Timeline requires a <em>grouped data.frame</em> to build its <a href="https://echarts.apache.org/en/option.html#options">options</a>.<br>
If grouping is on multiple columns, only the first one is used to determine settings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preset</code></td>
<td>
<p>Boolean (default TRUE). Build preset attributes like dataset, series, xAxis, yAxis, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctype</code></td>
<td>
<p>Chart type, default is 'scatter'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional widget attributes. See Details. <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>series.param</code></td>
<td>
<p>Additional attributes for preset series, default is NULL.<br>
Defines a single series type. Can be used for both non-timeline and timeline series. <br>
Multiple series types need to be defined directly with <em>series=list(list(...),list...)</em> or added with ec.upd.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tl.series</code></td>
<td>
<p>Deprecated, use <em>timeline</em> and <em>series.param</em> instead.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>Optional valid CSS unit (like <code>'100%'</code>,
<code>'500px'</code>, <code>'auto'</code>) or a number, which will be coerced to a
string and have <code>'px'</code> appended.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Command <em>ec.init</em> creates a widget with createWidget, then adds some ECharts features to it.<br>
Numerical indexes for series,visualMap,etc. are R-counted (1,2...)<br></p>
<p><strong>Presets</strong>: <br>
When data.frame df is chained to <em>ec.init</em>, a <a href="https://echarts.apache.org/en/option.html#dataset">dataset</a> is preset. <br>
When the data.frame is grouped and <em>ctype</em> is not null, more datasets with legend and series are also preset. <br>
Plugin '3D' is required for 2D series 'scatterGL'. Use <em>preset=FALSE</em> and set explicitly <em>xAxis</em> and <em>yAxis</em>. <br>
Plugins 'leaflet' and 'world' preset <em>center</em> to the mean of all coordinates from df. <br>
Users can delete or overwrite any presets as needed. <br></p>
<p><strong>Widget attributes</strong>: <br>
Optional echarty widget attributes include: <br></p>

<ul>
<li>
<p> elementId - Id of the widget, default is NULL(auto-generated)
</p>
</li>
<li>
<p> load - name(s) of plugin(s) to load. A character vector or comma-delimited string. default NULL.
</p>
</li>
<li>
<p> ask - prompt user before downloading plugins when <em>load</em> is present, FALSE by default
</p>
</li>
<li>
<p> js - single string or a vector with JavaScript expressions to evaluate.<br>
single: exposed <em>chart</em> object (most common)<br>
vector:<br><code style="white-space: pre;">⁠     ⁠</code>First expression is evaluated before chart initialization. <br><code style="white-space: pre;">⁠     ⁠</code>Second is evaluated with exposed object <em>opts</em>. <br><code style="white-space: pre;">⁠     ⁠</code>Third is evaluated with exposed <em>chart</em> object after <em>opts</em> set.
</p>
</li>
<li>
<p> renderer - 'canvas'(default) or 'svg'
</p>
</li>
<li>
<p> locale - 'EN'(default) or 'ZH'. Use predefined or custom <a href="https://gist.github.com/helgasoft/0618c6537c45bfd9e86d3f9e1da497b8">like so</a>.
</p>
</li>
<li>
<p> useDirtyRect - enable dirty rectangle rendering or not, FALSE by default, see <a href="https://echarts.apache.org/en/api.html#echarts.init">here</a><br></p>
</li>
</ul>
<p><strong>Built-in plugins</strong>: <br></p>

<ul>
<li>
<p> leaflet - Leaflet maps with customizable tiles, see <a href="https://github.com/gnijuohz/echarts-leaflet#readme">source</a><br></p>
</li>
<li>
<p> world - world map with country boundaries, see <a href="https://github.com/apache/echarts/tree/master/test/data/map/js">source</a> <br></p>
</li>
<li>
<p> lottie - support for <a href="https://lottiefiles.com">lotties</a> <br></p>
</li>
<li>
<p> ecStat - statistical tools, see<a href="https://github.com/ecomfe/echarts-stat">echarts-stat</a><br></p>
</li>
<li>
<p> custom - renderers for ecr.band and ecr.ebars <br>
Plugins with one-time installation: <br></p>
</li>
<li>
<p> 3D - 3D charts and WebGL acceleration, see <a href="https://github.com/ecomfe/echarts-gl">source</a> and <a href="https://echarts.apache.org/en/option-gl.html#series">docs</a> <br></p>
</li>
<li>
<p> liquid - liquid fill, see <a href="https://github.com/ecomfe/echarts-liquidfill">source</a>  <br></p>
</li>
<li>
<p> gmodular - graph modularity, see <a href="https://github.com/ecomfe/echarts-graph-modularity">source</a>  <br></p>
</li>
<li>
<p> wordcloud - cloud of words, see <a href="https://github.com/ecomfe/echarts-wordcloud">source</a> <br>
or install your own third-party plugins.<br></p>
</li>
</ul>
<p><strong>Crosstalk</strong>:<br>
Parameter <em>df</em> should be of type SharedData, see <a href="https://helgasoft.github.io/echarty/gallery.html#crosstalk-2d">more info</a>.<br>
Optional parameter <em>xtKey</em>: unique ID column name of data frame <em>df</em>. Must be same as <em>key</em> parameter used in <em>SharedData$new()</em>. If missing, a new column <em>XkeyX</em> will be appended to df.<br>
Enabling <em>crosstalk</em> will also generate an additional dataset called <em>Xtalk</em> and bind the <strong>first series</strong> to it.<br></p>
<p><strong>Timeline</strong>:<br>
Defined by <em>series.param</em> for the <a href="https://echarts.apache.org/en/option.html#series">options series</a> and a <em>timeline</em> list for the <a href="https://echarts.apache.org/en/option.html#timeline">actual control</a>.
A grouped <em>df</em> is required, each group providing data for one option serie.
Timeline <a href="https://echarts.apache.org/en/option.html#timeline.data">data</a> and <a href="https://echarts.apache.org/en/option.html#options">options</a> will be preset for the chart.<br>
Another preset is <em>encode(x=1,y=2,z=3)</em>, which are the first 3 columns of <em>df</em>. Parameter <em>z</em> is ignored in 2D. See Details below.<br>
Optional attribute <em>groupBy</em>, a <em>df</em> column name, can create series groups inside each timeline option.<br>
Timeline cannot be used for hierarchical charts like graph,tree,treemap,sankey. Chart options/timeline have to be built directly, see <a href="https://helgasoft.github.io/echarty/uc4.html">example</a>.
</p>
<p><strong><a href="https://echarts.apache.org/en/option.html#series-line.encode">Encode</a></strong> <br>
A series attribute to define which columns to use for the axes, depending on chart type and coordinate system: <br></p>

<ul>
<li>
<p> set <em>x</em> and <em>y</em> for coordinateSystem <em>cartesian2d</em>
</p>
</li>
<li>
<p> set <em>lng</em> and <em>lat</em> for coordinateSystem <em>geo</em> and <em>scatter</em> series
</p>
</li>
<li>
<p> set <em>value</em> and <em>name</em> for coordinateSystem <em>geo</em> and <em>map</em> series
</p>
</li>
<li>
<p> set <em>radius</em> and <em>angle</em> for coordinateSystem <em>polar</em>
</p>
</li>
<li>
<p> set <em>value</em> and <em>itemName</em> for <em>pie</em> chart
Example: <code>encode(x='col3', y='col1')</code> binds xAxis to <em>df</em> column 'col3'.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A widget to plot, or to save and expand with more features.
</p>


<h3>Examples</h3>

<pre><code class="language-R"> # basic scatter chart from a data.frame, using presets
cars |&gt; ec.init()
 
 # grouping, tooltips, formatting
iris |&gt; dplyr::group_by(Species) |&gt; 
ec.init(        # init with presets
  tooltip= list(show= TRUE),
  series.param= list( 
    symbolSize= ec.clmn('Petal.Width', scale=7),
    tooltip= list(formatter= ec.clmn('Petal.Width: %@', 'Petal.Width'))
  )
)

data.frame(n=1:5) |&gt; dplyr::group_by(n) |&gt; ec.init(
  timeline= list(show=TRUE, autoPlay=TRUE),
  series.param= list(type='gauge', max=5)
)

</code></pre>


</div>