<div class="container">

<table style="width: 100%;"><tr>
<td>makeShift</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>makeShift</h2>

<h3>Description</h3>

<p>makeShift can modify prompts which were assigned by the function <code>link{esAssign}</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makeShift(esDfShift, refDf, keyPromptDf, RELEVANTINFO_ES = NULL,
  RELEVANTVN_REF = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>esDfShift</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. This argument is generated by <code>suggestShift</code> if at least one ESM questionnaire is eligible for shifting to a neighboring prompt. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refDf</code></td>
<td>
<p>a data.frame. The reference dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keyPromptDf</code></td>
<td>
<p>a data.frame. The data.frame must have exactly 2 columns. The one column's name must be SHIFTKEY (a numeric value), specifying the exact ESM questionnaire (via the use of the variable KEY). The ohter column's name must be NEW_PROMPT, specifying the new prompt index, i.e. the index after the shifting process will be over. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code>setES</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code>setREF</code> and it is extended once either by function <code>genDateTime</code> or by function <code>splitDateTime</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>After applying <code>makeShift</code> the result can be checked by using the function <code>printSuggestedShift</code> once again.
If at least one shifting of the prompt index is suggested, use the additional data.frame, which is then is supplied by <code>suggestShift</code>, called 'suggestShiftDf'.' Use its 2 columns SHIFTKEY and NEW_PROMPT to generate the argument 'keyPromptDf' in function <code>makeShift</code>.
</p>


<h3>Value</h3>

<p>a list with 3 data.frames, if at least one prompt was shifted, i.e.:
</p>

<ol>
<li>
<p> the first data.frame (called 'esDf') is the raw ESM dataset in its current state (with new colum SHIFTED),
</p>
</li>
<li>
<p> the second data.frame (called 'suggestShiftDf') includes all relevant information to act according to the decision as to which questionnaires shall be shifted. See <strong>Examples</strong> to get a clear idea of how to use 'suggestShiftDf',
</p>
</li>
<li>
<p> the third data.frame (called 'printShiftDf') contains the relevant information to print all questionnaires registered by <code>suggestShift</code> to the console, before as well as after having made the shifting. This printing to the console is done by applying the function <code>printSuggestedShift</code>.
</p>
</li>
</ol>
<p><strong>Note</strong>. Each questionnaire that got shifted to a neighboring prompt (which prior to the shift has not been assigned), will have its status changed, i.e. values get adapted in variables CV_ES, ES_MULT, PROMPT, and PROMPTEND.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code>esmprep</code> (function 22 of 29).
</p>


<h3>Examples</h3>

<pre><code class="language-R"># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute makeShift. Start ----------------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Prerequisites in order to execute makeShift. End -------------------
# -------------------------------------------------------
# Run function 22 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# sugShift is the result of function 'suggestShift'. referenceDfNew is the result
# of function 'genDateTime' or of function 'splitDateTime'.
# keyPromptDf is generated by using part of the output of function suggestShift,
# i.e. by selecting the columns NEW_PROMPT and SHIFTKEY from suggestShiftDf.
keyPromptDf &lt;- sugShift$suggestShiftDf[,c("NEW_PROMPT", "SHIFTKEY")]
madeShift &lt;- makeShift(sugShift, referenceDfNew, keyPromptDf, RELEVANTINFO_ES, RELEVANTVN_REF)
# Tip! Display the result of function 'makeShift' in the console
# in order to check whether the shifting was successful.
printSuggestedShift(madeShift, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>


</div>