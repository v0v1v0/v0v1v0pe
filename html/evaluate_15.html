<div class="container">

<table style="width: 100%;"><tr>
<td>parse_all</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Parse, retaining comments</h2>

<h3>Description</h3>

<p>Works very similarly to parse, but also keeps original formatting and
comments.
</p>


<h3>Usage</h3>

<pre><code class="language-R">parse_all(x, filename = NULL, allow_error = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object to parse.  Can be a string, a file connection, or a function.
If a connection, will be opened and closed only if it was closed initially.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>string overriding the file name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_error</code></td>
<td>
<p>whether to allow syntax errors in <code>x</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame two columns, <code>src</code> and <code>expr</code>, and one row for each complete
input in <code>x</code>. A complete input is R code that would trigger execution when
typed at the console. This might consist of multiple expressions separated
by <code style="white-space: pre;">⁠;⁠</code> or one expression spread over multiple lines (like a function
definition).
</p>
<p><code>src</code> is a character vector of source code. Each element represents a
complete input expression (which might span multiple line) and always has a
terminal <code style="white-space: pre;">⁠\n⁠</code>.
</p>
<p><code>expr</code> is a list-column of expressions. The expressions can be of any
length, depending on the structure of the complete input source:
</p>

<ul>
<li>
<p> If <code>src</code> consists of only only whitespace and/or comments, <code>expr</code> will
be length 0.
</p>
</li>
<li>
<p> If <code>src</code> a single scalar (like <code>TRUE</code>, <code>1</code>, or <code>"x"</code>), name, or
function call, <code>expr</code> will be length 1.
</p>
</li>
<li>
<p> If <code>src</code> contains multiple expressions separated by <code style="white-space: pre;">⁠;⁠</code>, <code>expr</code> will
have length two or more.
</p>
</li>
</ul>
<p>The expressions have their srcrefs removed.
</p>
<p>If there are syntax errors in <code>x</code> and <code>allow_error = TRUE</code>, the data
frame will have an attribute <code>PARSE_ERROR</code> that stores the error object.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Each of these inputs are single line, but generate different numbers of
# expressions
source &lt;- c(
  "# a comment",
  "x",
  "x;y",
  "x;y;z"
)
parsed &lt;- parse_all(source)
lengths(parsed$expr)
str(parsed$expr)

# Each of these inputs are a single expression, but span different numbers
# of lines
source &lt;- c(
  "function() {}",
  "function() {",
  "  # Hello!",
  "}",
  "function() {",
  "  # Hello!",
  "  # Goodbye!",
  "}"
)
parsed &lt;- parse_all(source)
lengths(parsed$expr)
parsed$src
</code></pre>


</div>