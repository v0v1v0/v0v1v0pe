<div class="container">

<table style="width: 100%;"><tr>
<td>fitEnrollment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit enrollment model</h2>

<h3>Description</h3>

<p>Fits a specified enrollment model to the enrollment data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fitEnrollment(
  df,
  enroll_model = "b-spline",
  nknots = 0,
  accrualTime = 0,
  showplot = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>The subject-level enrollment data, including <code>trialsdt</code>,
<code>randdt</code> and <code>cutoffdt</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enroll_model</code></td>
<td>
<p>The enrollment model which can be specified as
"Poisson", "Time-decay", "B-spline", or
"Piecewise Poisson". By default, it is set to "B-spline".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nknots</code></td>
<td>
<p>The number of inner knots for the B-spline enrollment
model. By default, it is set to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrualTime</code></td>
<td>
<p>The accrual time intervals for the piecewise Poisson
model. Must start with 0, e.g., c(0, 30) breaks the time axis into
2 accrual intervals: [0, 30) and [30, Inf). By default, it is set to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showplot</code></td>
<td>
<p>A Boolean variable to control whether or not to
show the fitted enrollment curve. By default, it is set to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For the time-decay model, the mean function is
<code>mu(t) = mu/delta*(t - 1/delta*(1 - exp(-delta*t)))</code>
and the rate function is
<code>lambda(t) = mu/delta*(1 - exp(-delta*t))</code>.
For the B-spline model, the daily enrollment rate is approximated as
<code>lambda(t) = exp(B(t)*theta)</code>,
where <code>B(t)</code> represents the B-spline basis functions.
</p>


<h3>Value</h3>

<p>A list of results from the model fit including key information
such as the enrollment model, <code>model</code>, the estimated model
parameters, <code>theta</code>, the covariance matrix, <code>vtheta</code>,
the Akaike Information Criterion, <code>aic</code>, and
the Bayesian Information Criterion, <code>bic</code>, as well as
the design matrix <code>x</code> for the B-spline enrollment model, and
<code>accrualTime</code> for the piecewise Poisson enrollment model.
</p>
<p>The fitted enrollment curve is also returned.
</p>


<h3>Author(s)</h3>

<p>Kaifeng Lu, <a href="mailto:kaifenglu@gmail.com">kaifenglu@gmail.com</a>
</p>


<h3>References</h3>

<p>Xiaoxi Zhang and Qi Long. Stochastic modeling and prediction for
accrual in clinical trials. Stat in Med. 2010; 29:649-658.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
enroll_fit &lt;- fitEnrollment(df = interimData1, enroll_model = "b-spline",
                            nknots = 1)

</code></pre>


</div>