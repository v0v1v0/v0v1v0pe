<div class="container">

<table style="width: 100%;"><tr>
<td>ergm.ego</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Inference for Exponential-Family Random Graph Models based on Egocentrically
Sampled Data</h2>

<h3>Description</h3>

<p>A wrapper around the <code>ergm</code> to fit an ERGM to an
<code>egor</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ergm.ego(
  formula,
  popsize = 1,
  offset.coef = NULL,
  constraints = ~.,
  ...,
  basis = eval_lhs.formula(formula),
  control = control.ergm.ego(),
  na.action = na.fail,
  na.rm = FALSE,
  do.fit = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An <code>formula</code> object, of the form <code>e
  ~ &lt;model terms&gt;</code>, where <code>e</code> is a <code>egor</code>
object. See <code>ergm</code> for details and examples.
</p>
<p>For a list of currently implemented egocentric terms for the RHS, see
<code>ergm.ego-terms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popsize</code></td>
<td>
<p>The size <code class="reqn">|N|</code> of the finite population network
from which the egocentric sample was taken; only affects the
shift in the coefficients of the terms modeling the overall
propensity to have ties.  Setting it to 1 (the default)
essentially uses the <code class="reqn">-\log |N'|</code> offset on the edges
term. Passing 0 disables network size adjustment and uses the
egocentric sample size; passing <code>I(N)</code> uses the specified
size <code>N</code> (though can be overridden by the <code>ppop</code>
<code>control.ergm.ego()</code> option) and disables network size
adjustment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset.coef</code></td>
<td>
<p>A vector of coefficients for the offset terms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraints</code></td>
<td>
<p>A one-sided formula <code>formula</code> giving
the sample space constraints. See <code>ergm</code> for
details and examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>ergm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basis</code></td>
<td>
<p>a value (usually an <code>egor</code>) to override the LHS of the formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>A <code>control.ergm.ego</code> control list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>How to handle missing actor attributes in egos or alters,
when the terms need them for  models that scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>How to handle missing actor attributes in egos or alters,
when the terms need them for models that do not scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.fit</code></td>
<td>
<p>Whether to actually call <code>ergm</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>ergm.ego</code> inheriting from
<code>ergm</code>, with the following additional or overridden
elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>"v"</code></td>
<td>
<p>Variance-covariance matrix of the estimate of the
sufficient statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"m"</code></td>
<td>
<p>Estimate of the sufficient
statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"egor"</code></td>
<td>
<p>The <code>egor</code> object passed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"popsize"</code></td>
<td>
<p>Population network size used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"ppopsize"</code></td>
<td>
<p>Pseudopopulation size used, see <code>control.ergm.ego</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"coef"</code></td>
<td>
<p>The
coefficients, along with the network size adjustment <code>netsize.adj</code>
coefficient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"covar"</code></td>
<td>
<p>Pseudo-MLE estimate of the
variance-covariance matrix of the parameter estimates under repeated
egocentric sampling</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"ergm.covar"</code></td>
<td>
<p> The variance-covariance matrix of
parameter estimates under the ERGM superpopulation process (without
incorporating sampling).  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>"DtDe"</code></td>
<td>
<p>Estimated Jacobian of the expectation of the sufficient
statistics with respect to the model parameters</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Pavel N. Krivitsky
</p>


<h3>References</h3>

<p>Pavel N. Krivitsky and Martina Morris (2017). "Inference for social network models from egocentrically sampled data, with application to understanding persistent racial disparities in HIV prevalence in the US." <em>Annals of Applied Statistics</em>, 11(1): 427–455. <a href="https://doi.org/10.1214/16-AOAS1010">doi:10.1214/16-AOAS1010</a>
</p>
<p>Pavel N. Krivitsky, Martina Morris, and Michał Bojanowski (2019). "Inference for Exponential-Family Random Graph Models from Egocentrically-Sampled Data with Alter–Alter Relations." NIASRA Working Paper 08-19. <a href="https://www.uow.edu.au/niasra/publications/">https://www.uow.edu.au/niasra/publications/</a>
</p>
<p>Pavel N. Krivitsky, Michał Bojanowski, and Martina Morris (2020). "Impact of survey design on estimation of exponential-family random graph models from egocentrically-sampled data." <em>Social Networks</em>, to appear. <a href="https://doi.org/10.1016/j.socnet.2020.10.001">doi:10.1016/j.socnet.2020.10.001</a>
</p>
<p>Pavel N. Krivitsky, Mark S. Handcock, and Martina Morris (2011). "Adjusting for
Network Size and Composition Effects in Exponential-Family Random Graph
Models." <em>Statistical Methodology</em>, 8(4): 319–339. <a href="https://doi.org/10.1016/j.stamet.2011.01.005">doi:10.1016/j.stamet.2011.01.005</a>
</p>


<h3>See Also</h3>

<p><code>ergm()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(faux.mesa.high)
fmh.ego &lt;- as.egor(faux.mesa.high)

head(fmh.ego)

egofit &lt;- ergm.ego(fmh.ego~edges+degree(0:3)+nodefactor("Race")+nodematch("Race")
                         +nodefactor("Sex")+nodematch("Sex")+absdiff("Grade")+gwesp(0,fix=TRUE), 
                          popsize=network.size(faux.mesa.high))

# Run convergence diagnostics
mcmc.diagnostics(egofit)

# Estimates and standard errors
summary(egofit)


</code></pre>


</div>