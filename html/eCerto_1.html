<div class="container">

<table style="width: 100%;"><tr>
<td>assert_col</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assert a specific column (type and position) in a data frame.</h2>

<h3>Description</h3>

<p><code>assert_col</code> will check in a data.frame for name, position,
type of a specific column and ensure that the return value (data frame)
contains a respective column. If possible, the current values are converted
into the specified type.
</p>


<h3>Usage</h3>

<pre><code class="language-R">assert_col(
  df,
  name,
  pos = NULL,
  type = c("character", "integer", "numeric", "factor", "logical", "Date"),
  fuzzy_name = TRUE,
  default_value = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Input data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Name of the column to ensure (and to search for).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pos</code></td>
<td>
<p>Position of this column. NULL to keep position where found in df.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Desired data type of this column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fuzzy_name</code></td>
<td>
<p>Allow fuzzy matching (additional blanks and case insensitive search allowed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_value</code></td>
<td>
<p>Default value if column needs to be created or can not be converted to specified type. Keep NULL to use pre defined default values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>tbd.
</p>


<h3>Value</h3>

<p>A data frame with a column of the specified name and type at the
specified position. An error message is attached to the result as an
attribute in case of unexpected events.
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- data.frame(
  "analyte" = c("A", "B"),
  "tmp" = rep(0L, 2),
  "unit" = c("x", "y")
)
str(x)
ac &lt;- eCerto::assert_col
str(ac(df = x, name = "analyte", pos = 1, type = "factor"))
str(ac(df = x, name = "Analyte", pos = 3, type = "character"))
str(ac(df = x, name = " Analyte", pos = 2, type = "factor"))
str(ac(df = x, name = "Analyte", pos = 2, type = "factor", fuzzy_name = FALSE))
str(ac(df = x, name = "test", type = "factor", default_value = "test"))
# this will lead to NAs in column unit because the conversion does not lead to an error
# hence the default value is not used
str(ac(df = x, name = "unit", type = "numeric", default_value = 10))
# this will lead to the specified default data in column unit because the
# conversion attempt does lead to an error
str(ac(df = x, name = "unit", type = "Date"))
str(ac(df = data.frame("test" = "2022-03-31"), name = "test", type = "Date"))

# show type and class of internal default values
x &lt;- data.frame(
  "character" = "", "integer" = 0L, "numeric" = 0, "factor" = factor(NA),
  "logical" = NA, "date" = Sys.Date(), NA
)
sapply(1:ncol(x), function(i) {
  typeof(x[, i])
})
sapply(1:ncol(x), function(i) {
  class(x[, i])
})
</code></pre>


</div>