<div class="container">

<table style="width: 100%;"><tr>
<td>NcToArray</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read Names of Variables in a NetCDF File</h2>

<h3>Description</h3>

<p>Reads the names of the variables in a NetCDF file and returns them as a vector of character strings.
</p>


<h3>Usage</h3>

<pre><code class="language-R">NcToArray(
  file_to_read,
  dim_indices = NULL,
  vars_to_read = NULL,
  drop_var_dim = FALSE,
  unlist = TRUE,
  expect_all_indices = FALSE,
  allow_out_of_range = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file_to_read</code></td>
<td>
<p>Path to the file to be read or a NetCDF object as returned by <code>easyNCDF::NcOpen</code> or <code>ncdf4::nc_open</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dim_indices</code></td>
<td>
<p>Named list with numeric vectors of indices to take for each dimension. The names should correspond to the dimension names which to take the indices for. Non-consecutive indices can be specified. If <code>expect_all_indices = FALSE</code> (default), it is not mandatory to specify the indices for all (or even any of) the dimensions. In that case all the indices along such dimensions will be read in. If <code>expect_all_indices = TRUE</code>, then indices for all the dimensions have to be specified for the function to return a data array. In that case, <code>NA</code> can be used to request all indices for a dimension if desired.
<br><br>
Since this function considers the variables in a NetCDF file are stored along a 'var' dimension, indices for the (actually non-existing) 'var'/'variable' dimension can be specified. They can be specified in 3 ways:<br>
- A vector of numeric indices: e.g. <code>list(var = c(1, 3, 5))</code> to take the 1st, 3rd and 5th found variables.<br>
- A vector of character strings with variable names: e.g. <code>list(var = c('foo', 'bar'))</code>.<br>
- A list of vectors with numeric indices or character strings: e.g. <code>list(var = list(c(1, 3, 'foo'), c(2, 'bar')))</code><br>
Vectors with combined numeric indices and character strings are accepted.<br>
Whereas the first two options will return a single extended array with the merged variables, the second option will return a list with an array for each requested variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars_to_read</code></td>
<td>
<p>This parameter is a shortcut to (and has less priority than) specifying the requested variable names via <code>dim_indices = list(var = ...)</code>. It is useful when all the indices for all the requested variables have to be taken, so the parameter <code>dim_indices</code> can be skipped, but still only a specific variable or set of variables have to be taken. Check the documentation for the parameter <code>dim_indices</code> to see the three possible ways to specify this parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_var_dim</code></td>
<td>
<p>Whether to drop the 'var' dimension this function assumes (read description). If multiple variables are requested in a vector and <code>unlist = TRUE</code>, the drop won't be performed (not possible).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unlist</code></td>
<td>
<p>Whether to merge the resulting array variables into a single array if possible (default) or not. Otherwise a list with as many arrays as requested variables is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expect_all_indices</code></td>
<td>
<p>Whether the function should stop if indices are not provided for all the dimensions of any of the requested variables (TRUE) rather than assuming that all the indices are requested for the unspecified dimensions (FALSE). By default the later is done (FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_out_of_range</code></td>
<td>
<p>Whether to allow indices out of range (simply disregard them) or to stop if indices out of range are found.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Vector of character strings with the names of the variables in the NetCDF file.
</p>


<h3>Author(s)</h3>

<p>N. Manubens, <a href="mailto:nicolau.manubens@bsc.es">nicolau.manubens@bsc.es</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Create an array from R
file_path &lt;- tempfile(fileext = '.nc')
a &lt;- array(1:9, dim = c(member = 3, time = 3))
# Store into a NetCDF twice, as two different variables
ArrayToNc(list(var_1 = a, var_2 = a + 1), file_path)
# Read the dimensions and variables in the created file
fnc &lt;- NcOpen(file_path)
fnc_dims &lt;- NcReadDims(fnc)
var_names &lt;- NcReadVarNames(fnc)
# Read the two variables from the file into an R array
a_from_file &lt;- NcToArray(fnc, vars_to_read = var_names)
NcClose(fnc)
# Check the obtained array matches the original array
print(a)
print(a_from_file[1, , ])

</code></pre>


</div>