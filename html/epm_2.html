<div class="container">

<table style="width: 100%;"><tr>
<td>addLegend</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>addLegend</h2>

<h3>Description</h3>

<p>Adds a legend to an existing plot, with some additional manual
controls.
</p>


<h3>Usage</h3>

<pre><code class="language-R">addLegend(
  r,
  params = NULL,
  direction,
  side,
  location = "right",
  nTicks = 3,
  adj = NULL,
  shortFrac = 0.02,
  longFrac = 0.3,
  axisOffset = 0,
  border = TRUE,
  ramp,
  isInteger = "auto",
  ncolors = 64,
  breaks = NULL,
  minmax = NULL,
  locs = NULL,
  label = "",
  cex.axis = 0.8,
  tcl = NA,
  labelDist = 0.7,
  minDigits = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>the epmGrid, rasterLayer, SpatRaster or sf object that has been plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>If an epmGrid plot was saved to a variable, provide that here.
Contents will override other arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction</code></td>
<td>
<p>direction of color ramp. If omitted, then direction is
automatically inferred, otherwise can be specified as <code>horizontal</code> or
<code>vertical</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>side</code></td>
<td>
<p>side for tick marks, see <code>axis</code> documentation.
Automatically inferred if omitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location</code></td>
<td>
<p>either a location name (see <code>Details</code>), or coordinates
for the corners of the bar legend <code>c(xmin, xmax, ymin, ymax)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nTicks</code></td>
<td>
<p>number of tick marks, besides min and max.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adj</code></td>
<td>
<p>if location is top, left, bottom or right, use this argument to
adjust the location of the legend, defined in percent of the figure width.
See Details for additional information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shortFrac</code></td>
<td>
<p>Percent of the plot width range that will be used as the
short dimension of the legend. Only applies to preset location options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>longFrac</code></td>
<td>
<p>Percent of the plot width range that will be used as the
long dimension of the legend. Only applies to preset location options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axisOffset</code></td>
<td>
<p>distance from color bar for labels, as a percent of the
plot width.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>logical, should the color legend have a black border</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ramp</code></td>
<td>
<p>either a vector of color names that will be interpolated, or a
color ramp function that takes an integer (see for example
<code>colorRampPalette</code>). If omitted, defaults to default epm color
palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isInteger</code></td>
<td>
<p>If <code>auto</code>, automatically determines if <code>r</code> is
made up of integer values, otherwise <code>TRUE</code> or <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncolors</code></td>
<td>
<p>grain size of color ramp</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>If a custom set of color breaks were used in plotting
<code>r</code>, pass those color breaks here. This overrides the minmax option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minmax</code></td>
<td>
<p>min and max values from which the color ramp will be derived.
If left as <code>NULL</code>, the min and max of <code>r</code> will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locs</code></td>
<td>
<p>locations of tick marks, if <code>NULL</code> automatically placed. If
this is supplied as a character vector, then the labels will be plotted
verbatim.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>text to plot alongside the legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>size of axis labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tcl</code></td>
<td>
<p>length of tick marks (see help for tcl in ?par)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelDist</code></td>
<td>
<p>distance from axis to axis labels (passed to <code>mgp</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minDigits</code></td>
<td>
<p>minimum number of significant digits for labels</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A number of predefined locations exist in this function to make it
easy to add a legend to a plot.
</p>
<p>Preset <code>locations</code> are: <code>topleft</code>, <code>topright</code>,
<code>bottomleft</code>, <code>bottomright</code>, <code>left</code>, <code>right</code>,
<code>top</code> and <code>bottom</code>. <br> If more fine-tuned control is desired,
then a numeric vector of length 4 can be supplied to <code>location</code>,
specifying the min x, max x, min y and max y values for the legend.
</p>
<p>Additionally, the <code>adj</code> argument can be used to more intuitively
adjust where the legend is placed. <code>adj</code> is defined as a percentage
of the figure width or height, left to right, or bottom to top,
respectively. For example, if the legend is at the bottom, <code>adj =
  0.8</code> will place the legend 80% of the distance from the top of the
figure, horizontally centered.
</p>
<p>If an epmGrid object was plotted with <code>plot.epmGrid</code>, and if
<code>use_tmap = FALSE</code> was specified, and if that plot was assigned to
a variable, then you can supply that variable here to the <code>params</code>
argument, and a number of options will be automatically handed over to 
this function.
</p>
<p>See examples.
</p>


<h3>Value</h3>

<p>Invisibly returns a list with the following components.
</p>

<ul>
<li>
<p> coords: 2-column matrix of xy coordinates for each color bin in the legend.
</p>
</li>
<li>
<p> width: Coordinates for the short dimension of the legend.
</p>
</li>
<li>
<p> pal: the color ramp
</p>
</li>
<li>
<p> tickLocs: the tick mark locations in plotting units
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Pascal Title
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# create square-cell epmGrid object
tamiasEPM2 &lt;- createEPMgrid(tamiasPolyList, resolution = 50000,
	cellType = 'square', method = 'centroid')

# need to disable tmap if we want to anything to a plot
plot(tamiasEPM2, use_tmap = FALSE, legend = FALSE)
addLegend(tamiasEPM2, location = 'right', label = 'richness')
addLegend(tamiasEPM2, location = 'top', label = 'richness')

# fine-tune placement
addLegend(tamiasEPM2, location=c(113281, 1265200, -1500000, -1401898), side = 1)

# Using the params option
xx &lt;- plot(tamiasEPM2, use_tmap = FALSE, legend = FALSE, 
col = viridisLite::magma)
addLegend(tamiasEPM2, params = xx, location = 'top')

# works with hex grids as well
xx &lt;- plot(tamiasEPM, use_tmap = FALSE, legend = FALSE, 
col = viridisLite::magma)
addLegend(tamiasEPM, params = xx, location = 'top')

</code></pre>


</div>