<div class="container">

<table style="width: 100%;"><tr>
<td>matchQuote</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Match isolated quotes across records 
</h2>

<h3>Description</h3>

<p>Look for unmatched quotes in a character 
vector.  If found, look for a matching 
quote starting the next character string
in the vector, possibly after a blank 
line.  If found, merge the two strings 
and return the resulting shortened 
character vector.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">matchQuote(x,  Quote='"', sep=' ', 
          maxChars2append=2, ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a character vector to scan for unmatched 
<code>Quote</code>s.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Quote</code></td>
<td>

<p>the <code>Quote</code> character that should 
appear in pairs 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>

<p><code>sep</code> argument passed to 
<code>paste</code> to combine pairs of 
successive lines with unmatched quotes.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxChars2append</code></td>
<td>

<p>maximum number of characters in the 
following string to concatenate two 
adjacent strings (possibly separated by 
a blank line) with unmatched 
<code>Quote</code>s.   
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>optional arguments for 
<code>gsub</code> 
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function was written to help parse 
data from the US Department of Health and 
Human Services on 
<a href="https://ocrportal.hhs.gov/ocr/breach/breach_report.jsf">
cyber-security breaches affecting 500 or 
more individuals</a>.  As of 2014-06-03 the 
<code>csv</code> version of these data included 
commas in quotes that are not <code>sep</code> 
characters, quotes that are not matched, 
lines with zero characters, followed by 
lines with 3 characters being a quote and 
a comma.  This function was written 
to drop the blank lines and append the 
quote-comma line to the preceding line so 
it contained matching quotes.  
</p>


<h3>Value</h3>

<p>The input character vector possibly 
shortened with the following attributes 
explaining what was found:  
</p>

<p>indices of the input <code>x</code> with 
an unmatched 
</p>
<ul>
<li>
<p><code>unmatchedQuotes</code>
<code>Quote</code>.  

</p>
</li>
<li>
<p><code>blankLinesDropped</code>
indices of the input <code>x</code> that 
were dropped because they (1) followed 
an unmatched <code>Quote</code> and (2) 
contained no non-blank characters.  

</p>
</li>
<li>
<p><code>quoteLinesAppended</code>
indices of the input <code>x</code> that were
concatenated with a preceding line 
because the two lines contained unmatched
<code>Quote</code> characters, and concatenating 
them produced a line with all <code>Quote</code>s
matched.  

</p>
</li>
<li>
<p><code>ncharsAppended</code>
an integer vector of the same length as 
<code>quoteLinesConcatenated</code> giving the
number of characters in the second line
concatenated onto the previous line.  
  
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Spencer Graves</p>


<h3>See Also</h3>

<p><code>strsplit1</code>
<code>delimMatch</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">chvec &lt;- c('abc', 'de"f', ' ', '",', 'g"h',
            'matched"quotes"', '')
ch. &lt;- matchQuote(chvec)

# check 
chv. &lt;- c('abc', 'de"f ",', 'g"h', 
          'matched"quotes"', '')
attr(chv., 'unmatchedQuotes') &lt;- c(2, 4, 5)
attr(chv., 'blankLinesDropped') &lt;- 3
attr(chv., 'quoteLinesAppended') &lt;- 4
attr(chv., 'ncharsAppended') &lt;- 2 

all.equal(ch., chv.)

</code></pre>


</div>