<div class="container">

<table style="width: 100%;"><tr>
<td>do_repeat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Repeats the same transformations on a specified set of variables/values</h2>

<h3>Description</h3>

<p>Repeats the same transformations on a specified set of variables/values
</p>


<h3>Usage</h3>

<pre><code class="language-R">do_repeat(data, ...)

as_is(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame/list. If <code>data</code> is list then <code>do_repeat</code>
will be applied to each element of the list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>stand-in name(s) followed by equals sign and a vector/list of 
replacement variables or values. They can be numeric/characters or 
variables names. Names at the top-level can be unquoted (non-standard 
evaluation). Quoted characters also considered as variables names. To avoid
this behavior use <code>as_is</code> function. For standard evaluation of 
parameters you can surround them by round brackets. Also you can use 
%to% operator and other criteria functions. Last argument
should be expression in curly brackets which will be evaluated in the scope
of data.frame <code>data</code>. See examples.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>There is a special constant <code>.N</code> which equals to number of 
cases in <code>data</code> for usage in expression inside <code>do_repeat</code>. Also 
there are a variables <code>.item_num</code> which is equal to the current 
iteration number and <code>.item_value</code> which is named list with current
stand-in variables values.
</p>


<h3>Value</h3>

<p>transformed data.frame <code>data</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(iris)
scaled_iris = do_repeat(iris, 
                        i = Sepal.Length %to% Petal.Width, 
                        {
                            i = scale(i)
                        })
head(scaled_iris)

# several stand-in names and standard evaluattion
old_names = qc(Sepal.Length, Sepal.Width, Petal.Length, Petal.Width)
new_names = paste0("scaled_", old_names)
scaled_iris = do_repeat(iris, 
                        orig = ((old_names)), 
                        scaled = ((new_names)), 
                        {
                            scaled = scale(orig)
                        })
head(scaled_iris)

# numerics
new_df = data.frame(id = 1:20)
# note the automatic creation of the sequence of variables
new_df = do_repeat(new_df, 
                   item = i1 %to% i3, 
                   value = c(1, 2, 3), 
                   {
                       item = value
                   })
head(new_df)

# the same result with internal variable '.item_num'
new_df = data.frame(id = 1:20)
new_df = do_repeat(new_df, 
                   item = i1 %to% i3,
                   {
                       item = .item_num
                   })
head(new_df)

# functions
set.seed(123)
new_df = data.frame(id = 1:20)
new_df = do_repeat(new_df, 
                   item = c(i1, i2, i3), 
                   fun = c("rnorm", "runif", "rexp"), 
                   {
                       item = fun(.N)
                   })
head(new_df)


</code></pre>


</div>