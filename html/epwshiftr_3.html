<div class="container">

<table style="width: 100%;"><tr>
<td>Cmip6Dict</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>CMIP6 Controlled Vocabularies (CVs) and Data Request Dictionary</h2>

<h3>Description</h3>

<p>The <code>Cmip6Dict</code> object provides functionalities to fetch the latest CMIP6
Controlled Vocabularies (CVs) and Data Request (DReq) information.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cmip6_dict()
</code></pre>


<h3>Details</h3>

<p>The CMIP6 CVs gives a well-defined set of global attributes that are recorded
in each CMIP6 model output, providing information necessary for interpreting
the data. The data of CMIP6 CVs is stored as JSON files in the WCRP-CMIP
<a href="https://github.com/WCRP-CMIP/CMIP6_CVs">GitHub Repo</a>.
</p>
<p>The CMIP6 DReq defines all the quantities from CMIP6 simulations that should
be archived. This includes both quantities of general interest needed from
most of the CMIP6-endorsed model intercomparison projects (MIPs) and
quantities that are more specialized and only of interest to a single
endorsed MIP. The raw data of DReq is stored a Microsoft Excel file
(<code>CMIP6_MIP_tables.xlsx</code>) in a Subversion repo.
The <code>Cmip6Dict</code> object uses the parsed DReq data that is stored in the
<a href="https://github.com/PCMDI/cmip6-cmor-tables">GitHub Repo</a>.
</p>
<p>For more information, please see:
</p>

<ul>
<li> <p><a href="https://docs.google.com/document/d/1h0r8RZr_f3-8egBMMh7aqLwy3snpD6_MrDz1q8n5XUk/edit">CMIP6 Global Attributes, DRS, Filenames, Directory Structure, and CV's</a>
</p>
</li>
<li> <p><a href="https://wcrp-cmip.github.io/WGCM_Infrastructure_Panel/CMIP6/data_request.html">CMIP6 Data Request</a>
</p>
</li>
</ul>
<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Cmip6Dict-version"><code>Cmip6Dict$version()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-is_empty"><code>Cmip6Dict$is_empty()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-timestamp"><code>Cmip6Dict$timestamp()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-built_time"><code>Cmip6Dict$built_time()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-build"><code>Cmip6Dict$build()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-get"><code>Cmip6Dict$get()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-save"><code>Cmip6Dict$save()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-load"><code>Cmip6Dict$load()</code></a>
</p>
</li>
<li> <p><a href="#method-Cmip6Dict-print"><code>Cmip6Dict$print()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-Cmip6Dict-version"></a>



<h4>Method <code>version()</code>
</h4>

<p>Get the version of CVs and Data Request
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$version()</pre></div>



<h5>Returns</h5>

<p>A list of two element:
</p>

<ul>
<li> <p><code>cvs</code>: A numeric_version object giving the version of CVs
</p>
</li>
<li> <p><code>dreq</code>: A numeric_version object giving the version of Data
Request
</p>
</li>
</ul>
<hr>
<a id="method-Cmip6Dict-is_empty"></a>



<h4>Method <code>is_empty()</code>
</h4>

<p>Is it an empty Cmip6Dict?
</p>
<p><code style="white-space: pre;">⁠$is_empty()⁠</code> checks if this <code>Cmip6Dict</code> is empty, i.e. the <code style="white-space: pre;">⁠$build() ⁠</code> or <code style="white-space: pre;">⁠$load()⁠</code> method hasn't been called yet and there is no data of
CVs and Data Request.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$is_empty()</pre></div>



<h5>Returns</h5>

<p>A single logical value of <code>TRUE</code> or <code>FALSE</code>.
</p>


<hr>
<a id="method-Cmip6Dict-timestamp"></a>



<h4>Method <code>timestamp()</code>
</h4>

<p>Get the last modified time for CVs
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$timestamp()</pre></div>



<h5>Returns</h5>

<p>A list of 14 DateTimes:
</p>

<ul>
<li> <p><code>"cvs"</code>: The last modified time for the whole CV collection
</p>
</li>
<li> <p><code>"drs"</code>: The last modified time for Data Reference Syntax (DRS)
</p>
</li>
<li> <p><code>"activity_id"</code>: The last modified time for Activity ID
</p>
</li>
<li> <p><code>"experiment_id"</code>: The last modified time for Experiment ID
</p>
</li>
<li> <p><code>"frequency"</code>: The last modified time for Frequency
</p>
</li>
<li> <p><code>"grid_label"</code>: The last modified time for Grid Label
</p>
</li>
<li> <p><code>"institution_id"</code>: The last modified time for Institution ID
</p>
</li>
<li> <p><code>"nominal_resolution"</code>: The last modified time for Nominal Resolution
</p>
</li>
<li> <p><code>"realm"</code>: The last modified time for Realm
</p>
</li>
<li> <p><code>"required_global_attributes"</code>: The last modified time for Required Global Attributes
</p>
</li>
<li> <p><code>"source_id"</code>: The last modified time for Source ID
</p>
</li>
<li> <p><code>"source_type"</code>: The last modified time for Source Type
</p>
</li>
<li> <p><code>"sub_experiment_id"</code>: The last modified time for Sub-Experiment ID
</p>
</li>
<li> <p><code>"table_id"</code>: The last modified time for Table ID
</p>
</li>
</ul>
<hr>
<a id="method-Cmip6Dict-built_time"></a>



<h4>Method <code>built_time()</code>
</h4>

<p>Get the time when the dictionary was built
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$built_time()</pre></div>



<h5>Returns</h5>

<p>A DateTime
</p>


<hr>
<a id="method-Cmip6Dict-build"></a>



<h4>Method <code>build()</code>
</h4>

<p>Fetch and parse all data of CVs and Data Request
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$build(token = NULL, force = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>token</code></dt>
<dd>
<p>A string of GitHub token that is used to access GitHub
REST APIs. If <code>NULL</code>, <code>GITHUB_PAT</code> or <code>GITHUB_TOKEN</code>
environment variable will be used if exists. Default: <code>NULL</code>.</p>
</dd>
<dt><code>force</code></dt>
<dd>
<p>Whether to force to rebuild the dict when it has been
already built before. Default: <code>FALSE</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>The updated <code>Cmip6Dict</code> itself.
</p>


<hr>
<a id="method-Cmip6Dict-get"></a>



<h4>Method <code>get()</code>
</h4>

<p>Get the data for a specific CV or Data Request
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$get(type)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>type</code></dt>
<dd>
<p>A single string indicating the type of data to list.
Should be one of:
</p>

<ul>
<li> <p><code>"drs"</code>: Data Reference Syntax (DRS)
</p>
</li>
<li> <p><code>"activity_id"</code>: Activity ID
</p>
</li>
<li> <p><code>"experiment_id"</code>: Experiment ID
</p>
</li>
<li> <p><code>"frequency"</code>: Frequency
</p>
</li>
<li> <p><code>"grid_label"</code>: Grid Label
</p>
</li>
<li> <p><code>"institution_id"</code>: Institution ID
</p>
</li>
<li> <p><code>"nominal_resolution"</code>: Nominal Resolution
</p>
</li>
<li> <p><code>"realm"</code>: Realm
</p>
</li>
<li> <p><code>"required_global_attributes"</code>: Required Global Attributes
</p>
</li>
<li> <p><code>"source_id"</code>: Source ID
</p>
</li>
<li> <p><code>"source_type"</code>: Source Type
</p>
</li>
<li> <p><code>"sub_experiment_id"</code>: Sub-Experiment ID
</p>
</li>
<li> <p><code>"table_id"</code>: Table ID
</p>
</li>
<li> <p><code>"dreq"</code>: Data Request
</p>
</li>
</ul>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>For <code>"drs"</code>, "activity_id"<code style="white-space: pre;">⁠, ⁠</code>"frequency"<code style="white-space: pre;">⁠, ⁠</code>"grid_label"<code style="white-space: pre;">⁠, ⁠</code>"institution_id"<code style="white-space: pre;">⁠, ⁠</code>"source_type"<code>and</code>"sub_experiment_id"', a
list.
</p>
<p>For <code>"experiment_id"</code>, <code>"source_id"</code> and <code>"dreq"</code>, a data.table.
</p>
<p>For <code>"nominal_resolution"</code>, <code>"required_global_attributes"</code> and
<code>"table_id"</code>, a character vector.
</p>


<hr>
<a id="method-Cmip6Dict-save"></a>



<h4>Method <code>save()</code>
</h4>

<p>Save the Cmip6Dict object
</p>
<p><code style="white-space: pre;">⁠$save()⁠</code> stores all the core data of current <code>Cmip6Dict</code> object into
an RDS file named <code>CMIP6DICT</code> in the specified folder.
This file can be reloaded via <code style="white-space: pre;">⁠$load()⁠</code> method to restore the last
state of current <code>Cmip6Dict</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$save(dir = getOption("epwshiftr.dir", "."))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dir</code></dt>
<dd>
<p>A single string giving the directory to save the RDS file.
Default is set to the global option <code>epwshiftr.dir</code>. The
directory will be created if not exists. If this global option
is not set, the current working directory is used.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A single string giving the full path of the RDS file.
</p>


<hr>
<a id="method-Cmip6Dict-load"></a>



<h4>Method <code>load()</code>
</h4>

<p>Load the saved Cmip6Dict object from file
</p>
<p><code style="white-space: pre;">⁠$load()⁠</code> loads the RDS file named <code>CMIP6DICT</code> that is created using
<code style="white-space: pre;">⁠$save()⁠</code> method.
</p>
<p>Please note that the file should be exactly the same as <code>CMIP6DICT</code>
without file extension.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$load(dir = getOption("epwshiftr.dir", "."))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dir</code></dt>
<dd>
<p>A single string giving the directory to find the RDS file.
Default is set to the global option <code>epwshiftr.dir</code>. If this
global option is not set, the current working directory is
used.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A single string giving the full path of the RDS file.
</p>


<hr>
<a id="method-Cmip6Dict-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Print a summary of the current <code>Cmip6Dict</code> object
</p>
<p><code style="white-space: pre;">⁠$print()⁠</code> gives the summary of current <code>Cmip6Dict</code> object including
the version of CVs and Data Request, and the last built time.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cmip6Dict$print()</pre></div>



<h5>Returns</h5>

<p>The <code>Cmip6Dict</code> object itself, invisibly.
</p>




<h3>Author(s)</h3>

<p>Hongyuan Jia
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# create a new Cmip6Dict object
dict &lt;- cmip6_dict()

# by default, there is no data when the Cmip6Dict was created
dict$is_empty()

# fetch and parse all CVs and Data Request data
dict$build()

# get the version of CVs nand Data Request
dict$version()

# get the last modified time for each CV and Data Request
dict$timestamp()

# get the time when the dict was built
dict$built_time()

# get the data of CVs and DReq
dict$get("activity_id")
dict$get("experiment_id")
dict$get("sub_experiment_id")
dict$get("institution_id")
dict$get("source_id")
dict$get("table_id")
dict$get("frequency")
dict$get("grid_label")
dict$get("realm")
dict$get("source_type")
dict$get("dreq")

# save the dict object for later usage
# default location is the value of global option "epwshiftr.dir"
dict$save()

# the saved dict object can be reloaded
new_dict &lt;- cmip6_dict()
new_dict$load()

# print will show the version summary and the last built time
dict$print()

## End(Not run)
</code></pre>


</div>