<div class="container">

<table style="width: 100%;"><tr>
<td>DoFCorrection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Degrees of Freedom</h2>

<h3>Description</h3>

<p>Calculates the degrees of freedom for a statistic
(or of a contrast between two statistics) based on the
jackknife and imputation variance estimates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">DoFCorrection(
  varEstA,
  varEstB = varEstA,
  varA,
  varB = varA,
  method = c("WS", "JR")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>varEstA</code></td>
<td>
<p>the <code>varEstInput</code> object returned from certain functions, such as
<code>lm.sdf</code> when <code>returnVarEstInputs=</code><code>TRUE</code>).
The variable <code>varA</code> must be on this dataset.
See Examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varEstB</code></td>
<td>
<p>similar to the <code>varEstA</code> argument.
If left blank, both are assumed to come
from <code>varEstA</code>. When set, the degrees of freedom
are for a contrast between <code>varA</code> and <code>varB</code>,
and the <code>varB</code> values are taken from <code>varEstB</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varA</code></td>
<td>
<p>a character that names the statistic in the <code>varEstA</code>
argument for which the degrees of freedom calculation is required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varB</code></td>
<td>
<p>a character that names the statistic in the <code>varEstB</code>
argument for which a covariance is required. When <code>varB</code>
is specified, returns the degrees of freedom for
the contrast between <code>varA</code> and <code>varB</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character that is either <code>WS</code> for the Welch-Satterthwaite
formula or
<code>JR</code> for the Johnson-Rust correction to the
Welch-Satterthwaite formula</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This calculation happens under the notion that statistics
have little variance within strata, and
some strata will contribute fewer than a full degree of freedom.
</p>
<p>The functions are not vectorized, so both <code>varA</code> and
<code>varB</code> must contain exactly one variable name.
</p>
<p>The method used to compute the degrees of freedom is in the vignette titled
<a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf"><em>Statistical Methods Used in EdSurvey</em></a>
section “Estimation of Degrees of Freedom.”
</p>


<h3>Value</h3>

<p>numeric; the estimated degrees of freedom
</p>


<h3>Author(s)</h3>

<p>Paul Bailey
</p>


<h3>References</h3>

<p>Johnson, E. G., &amp; Rust, K. F. (1992). Population inferences and variance estimation for NAEP data. <em>Journal of Educational Statistics,</em> <em>17,</em> 175–190.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
sdf &lt;- readNAEP(path=system.file("extdata/data", "M36NT2PM.dat", package="NAEPprimer"))
lm1 &lt;- lm.sdf(formula=composite ~ dsex + b017451, data=sdf, returnVarEstInputs=TRUE)
summary(lm1)
# this output agrees with summary of lm1 coefficient for dsex
DoFCorrection(lm1$varEstInputs,
              varA="dsexFemale",
              method="JR")
# second example, a covariance term requires more work
# first, estimate the covariance between two regression coefficients
# note that the variable names are parallel to what they are called in lm1 output
covFEveryDay &lt;- varEstToCov(lm1$varEstInputs,
                            varA="dsexFemale",
                            varB="b017451Every day",
                            jkSumMultiplier=
                            EdSurvey:::getAttributes(data=sdf, attribute="jkSumMultiplier"))
# second, find the difference and the SE of the difference
se &lt;- lm1$coefmat["dsexFemale","se"] + lm1$coefmat["b017451Every day","se"] +
      -2*covFEveryDay
# third, calculate the t-statistic
tv &lt;- (coef(lm1)["dsexFemale"] - coef(lm1)["b017451Every day"])/se
# fourth, calculate the p-value, which requires the estimated degrees of freedom
dofFEveryDay &lt;- DoFCorrection(lm1$varEstInputs,
                              varA="dsexFemale",
                              varB="b017451Every day",
                              method="JR")
# finally, the p-value
2*(1-pt(abs(tv), df=dofFEveryDay))

## End(Not run)
</code></pre>


</div>