<div class="container">

<table style="width: 100%;"><tr>
<td>aux_psdsummary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate aggregated PSDs over long time periods</h2>

<h3>Description</h3>

<p>The function generates a long time PSD with aggregated time and frequency
resolution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">aux_psdsummary(
  start,
  stop,
  ID,
  window,
  component = "BHZ",
  sensor,
  logger,
  gain = 1,
  dir,
  hours_skip,
  res = 1000,
  n = 100,
  cpu,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p><code>POSIXct</code> value, start time for PSD 
calculation. If a character string (or vector) is provided, the function 
will try to convert it to POSIXct.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop</code></td>
<td>
<p><code>POSIXct</code> value, stop time for PSD calculation. 
If a character string (or vector) is provided, the function will try to 
convert it to POSIXct.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID</code></td>
<td>
<p><code>Character</code> vector, station ID to be processed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p><code>Numeric</code> value, time window size for the PSD 
calculation. Should be appropriately large to avoid extensive calculation
times, usually at the order of 0.1 percent of the total PSD duration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>component</code></td>
<td>
<p><code>Character</code> value or vector, seismic component to 
be used. If omitted, the function will use <code>"BHZ"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensor</code></td>
<td>
<p><code>Character</code> value, sensor keyword for the deconvolution 
step (see <code>signal_deconvolve</code> for details and keywords). If omitted, 
no deconvolution will be attempted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logger</code></td>
<td>
<p><code>Character</code> value, logger keyword for the deconvolution 
step (see <code>signal_deconvolve</code> for details and keywords). If omitted, 
no deconvolution will be attempted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gain</code></td>
<td>
<p><code>Numeric</code> value, signal preamplification factor used for 
the deconvolution step (see <code>signal_deconvolve</code> for details. Default
value is <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p><code>Character</code> value, path to directory that contains the 
seismic files. See <code>aux_getevent</code> for details and constraints on the 
data structure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hours_skip</code></td>
<td>
<p><code>Integer</code> vector, one or more full hours that will
be excluded from the PSD generation. This optional value is useful if one 
wants to omit noisy daytime hours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p><code>Numeric</code> value, frequency resolution of the PSD, by 
default set to <code>1000</code>. This is used to reduce the resulting data 
size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p><code>Numeric</code> value, number of times to try to find a time 
snippet with data to estimate the frequency vector length. By
default set to <code>100</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cpu</code></td>
<td>
<p><code>Numeric</code> value, fraction of CPUs to use. If omitted, 
only one CPU will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>Logical</code> value, option to show extended function 
information as the function is running. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function will calculate PSDs using the Welch method (see 
<code>signal_spectrogram</code>), with no overlap of the main time windows. The 
sub-windows will be automatically set to 10 
the overlap of sub-windows to 0.5.
</p>


<h3>Value</h3>

<p><code>eseis</code> object, a spectrogram
</p>


<h3>Author(s)</h3>

<p>Michael Dietze
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

p &lt;- aux_psdsummary(start = "2017-04-15 19:00:00 UTC",
                    stop = "2017-04-15 22:00:00 UTC",
                    ID = "RUEG1",
                    component = "BHE",
                    dir = "~/data/sac/",
                    sensor = "TC120s", 
                    logger = "Cube3ext",
                    window = 600,
                    res = 1000,
                    verbose = TRUE)
                    
plot(p)


## End(Not run)

</code></pre>


</div>